bug_report_id,bug_report_desc,bug_report_time
WFCORE-4230,"DeletionCollisionTest#testFileLockByRemoveContent fails on Java 12, Byteman related issue
Similar situation like in WFCORE-3869 case. Byteman needs update.

Running WildFly Core Testsuite with Byteman 4.0.5-SNAPSHOT fixes the failure on JDK 12 (12-ea+19 in my case). 

BYTEMAN-372 brings support for Java 12 bytecode.",2018/11/16 2:59 PM
WFCORE-4223,"""add"" operation for /subsystem=elytron/server-ssl-sni-context  doesn't require ""host-context-map"" attribute, however add a server-ssl-sni-context without this attribute results in an IllegalArgumentException. Set the ""host-context-map"" and the ""add"" operation works.

{code}
[standalone@localhost:9990 /] /subsystem=elytron/server-ssl-sni-context=sn3:add(default-ssl-context=wssl_ctx)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException"",
    ""rolled-back"" => true,
    ""response-headers"" => {""process-state"" => ""reload-required""}
}
{code}

{code}
11:29:09,803 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 3) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""server-ssl-sni-context"" => ""sn3"")
]): java.lang.IllegalArgumentException
        at org.jboss.dmr.ModelValue.getKeys(ModelValue.java:139)
        at org.jboss.dmr.ModelNode.keys(ModelNode.java:1580)
        at org.wildfly.extension.elytron.SSLDefinitions$7.getValueSupplier(SSLDefinitions.java:1046)
        at org.wildfly.extension.elytron.TrivialAddHandler.performRuntime(TrivialAddHandler.java:68)
        at org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:159)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:999)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:743)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:467)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1411)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:423)
        at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:243)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:289)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:255)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:243)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:240)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:138)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:162)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:158)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:313)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
{code}

{code}
/subsystem=elytron/server-ssl-sni-context=sn1:read-operation-description(name=add)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""operation-name"" => ""add"",
        ""description"" => ""Adds a SNI context"",
        ""request-properties"" => {
            ""default-ssl-context"" => {
                ""type"" => STRING,
                ""description"" => ""The context to use if no SNI information is present, or if it does not match any mappings"",
                ""expressions-allowed"" => false,
                ""required"" => true,
                ""nillable"" => false,
                ""capability-reference"" => ""org.wildfly.security.ssl-context"",
                ""min-length"" => 1L,
                ""max-length"" => 2147483647L
            },
            ""host-context-map"" => {
                ""type"" => OBJECT,
                ""description"" => ""A mapping between a server name and an SSContext"",
                ""expressions-allowed"" => false,
                ""required"" => false,
                ""nillable"" => true,
                ""capability-reference"" => ""org.wildfly.security.ssl-context"",
                ""value-type"" => STRING
            }
        },
        ""reply-properties"" => {},
        ""read-only"" => false,
        ""restart-required"" => ""resource-services"",
        ""runtime-only"" => false
    },
    ""response-headers"" => {""process-state"" => ""reload-required""}
}
{code}",2018/11/13 8:30 AM
WFCORE-4221,"{noformat}
cd testsuite/standalone/
mvn test -Delytron -Dtest=ReadConfigAsFeaturesStandaloneTestCase
{noformat}

{noformat}
[INFO] Running org.wildfly.core.test.standalone.mgmt.api.core.ReadConfigAsFeaturesStandaloneTestCase
[ERROR] Tests run: 10, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.06 s <<< FAILURE! - in org.wildfly.core.test.standalone.mgmt.api.core.ReadConfigAsFeaturesStandaloneTestCase
[ERROR] removeChildrenTest(org.wildfly.core.test.standalone.mgmt.api.core.ReadConfigAsFeaturesStandaloneTestCase)  Time elapsed: 0.166 s  <<< ERROR!
org.wildfly.core.testrunner.UnsuccessfulOperationException: 
""WFLYCTL0367: Cannot remove capability 'org.wildfly.security.http-authentication-factory.management-http-authentication' as it is required by other capabilities:
capability 'org.wildfly.management.http-interface' requires it for attribute 'http-authentication-factory' at address '/core-service=management/management-interface=http-interface'""
	at org.wildfly.core.testrunner.ManagementClient.checkSuccessful(ManagementClient.java:247)
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:235)
	at org.wildfly.core.test.standalone.mgmt.api.core.ReadConfigAsFeaturesStandaloneTestCase.doTest(ReadConfigAsFeaturesStandaloneTestCase.java:309)
	at org.wildfly.core.test.standalone.mgmt.api.core.ReadConfigAsFeaturesStandaloneTestCase.doTest(ReadConfigAsFeaturesStandaloneTestCase.java:304)
	at org.wildfly.core.test.standalone.mgmt.api.core.ReadConfigAsFeaturesStandaloneTestCase.removeChildrenTest(ReadConfigAsFeaturesStandaloneTestCase.java:128)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   ReadConfigAsFeaturesStandaloneTestCase.removeChildrenTest:128->doTest:304->doTest:309 » UnsuccessfulOperation
[INFO] 
[ERROR] Tests run: 10, Failures: 0, Errors: 1, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
{noformat}
",2018/11/13 5:22 AM
WFCORE-4220,"{noformat}
cd testsuite/standalone/
mvn test -Delytron -Dtest=SecurityCommandsTestCase
{noformat}

{noformat}
[INFO] Running org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase
[ERROR] Tests run: 17, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 22.482 s <<< FAILURE! - in org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase
[ERROR] testEnableSSLInteractiveConfirmNative(org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase)  Time elapsed: 0.17 s  <<< ERROR!
org.jboss.as.cli.CommandLineException: 
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {
        ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.core.management.security.realm.ManagementRealm""],
        ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.management is missing [org.wildfly.core.management.security.realm.ManagementRealm]""]
    },
    ""rolled-back"" => true
}
	at org.jboss.as.cli.handlers.OperationRequestHandler.handle(OperationRequestHandler.java:94)
	at org.jboss.as.cli.impl.CommandContextImpl.handleOperation(CommandContextImpl.java:1800)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:809)
	at org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase.enableNative(SecurityCommandsTestCase.java:678)
	at org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase.testEnableSSLInteractiveConfirmNative(SecurityCommandsTestCase.java:482)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[ERROR] testEnableSSLNative(org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase)  Time elapsed: 0.148 s  <<< ERROR!
org.jboss.as.cli.CommandLineException: 
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0212: Duplicate resource [
    (\""socket-binding-group\"" => \""standard-sockets\""),
    (\""socket-binding\"" => \""management-native\"")
]"",
    ""rolled-back"" => true
}
	at org.jboss.as.cli.handlers.OperationRequestHandler.handle(OperationRequestHandler.java:94)
	at org.jboss.as.cli.impl.CommandContextImpl.handleOperation(CommandContextImpl.java:1800)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:809)
	at org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase.enableNative(SecurityCommandsTestCase.java:677)
	at org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase.testEnableSSLNative(SecurityCommandsTestCase.java:396)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[INFO] 
{noformat}",2018/11/13 5:15 AM
WFCORE-4219,"{noformat}
cd testsuite/standalone/
mvn test -Delytron -Dtest=SecurityAuthCommandsTestCase
{noformat}

{noformat}
[INFO] Running org.jboss.as.test.integration.management.cli.SecurityAuthCommandsTestCase
[ERROR] Tests run: 14, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 7.44 s <<< FAILURE! - in null
[ERROR] testDisableAuthManagement(org.jboss.as.test.integration.management.cli.SecurityAuthCommandsTestCase)  Time elapsed: 0.261 s  <<< ERROR!
java.lang.Exception: Should have fail
	at org.jboss.as.test.integration.management.cli.SecurityAuthCommandsTestCase.testDisableAuthManagement(SecurityAuthCommandsTestCase.java:705)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[ERROR] testOOBSASLManagementNative(org.jboss.as.test.integration.management.cli.SecurityAuthCommandsTestCase)  Time elapsed: 0.17 s  <<< ERROR!
org.jboss.as.cli.CommandLineException: 
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {
        ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.core.management.security.realm.ManagementRealm""],
        ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.management is missing [org.wildfly.core.management.security.realm.ManagementRealm]""]
    },
    ""rolled-back"" => true
}
	at org.jboss.as.cli.handlers.OperationRequestHandler.handle(OperationRequestHandler.java:94)
	at org.jboss.as.cli.impl.CommandContextImpl.handleOperation(CommandContextImpl.java:1800)
	at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:809)
	at org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase.enableNative(SecurityCommandsTestCase.java:678)
	at org.jboss.as.test.integration.management.cli.SecurityAuthCommandsTestCase.testOOBSASLManagementNative(SecurityAuthCommandsTestCase.java:423)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[ERROR] Failure when constructing test  Time elapsed: 0.431 s  <<< ERROR!
java.lang.RuntimeException: java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:238)
	at org.wildfly.core.testrunner.WildflyTestRunner.checkServerState(WildflyTestRunner.java:167)
	at org.wildfly.core.testrunner.WildflyTestRunner.runTearDownTasks(WildflyTestRunner.java:138)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:111)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
Caused by: java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:149)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:75)
	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.execute(DelegatingModelControllerClient.java:63)
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:234)
	... 21 more
Caused by: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:128)
	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:259)
	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:70)
	at org.jboss.as.protocol.mgmt.ManagementClientChannelStrategy$Establishing.getChannel(ManagementClientChannelStrategy.java:167)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient.getOrCreateChannel(RemotingModelControllerClient.java:146)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient$1.getChannel(RemotingModelControllerClient.java:60)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:135)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:110)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:263)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:168)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147)
	... 24 more
Caused by: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed:
   ANONYMOUS: javax.security.sasl.SaslException: ELY05092: Authentication name is empty
	at org.jboss.remoting3.remote.ClientConnectionOpenListener.allMechanismsFailed(ClientConnectionOpenListener.java:109)
	at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:402)
	at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:242)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)
	at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:89)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:591)
	at ...asynchronous invocation...(Unknown Source)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:571)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:533)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:521)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connect(ProtocolConnectionUtils.java:204)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:120)
	... 34 more
	Suppressed: javax.security.sasl.SaslException: ELY05092: Authentication name is empty
		at org.wildfly.security.sasl.anonymous.AnonymousSaslClient.evaluateMessage(AnonymousSaslClient.java:74)
		at org.wildfly.security.sasl.util.AbstractSaslParticipant.evaluateMessage(AbstractSaslParticipant.java:199)
		at org.wildfly.security.sasl.util.AbstractSaslClient.evaluateChallenge(AbstractSaslClient.java:79)
		at org.wildfly.security.sasl.util.AbstractDelegatingSaslClient.evaluateChallenge(AbstractDelegatingSaslClient.java:54)
		at org.wildfly.security.sasl.util.PrivilegedSaslClient.lambda$evaluateChallenge$0(PrivilegedSaslClient.java:55)
		at java.security.AccessController.doPrivileged(Native Method)
		at org.wildfly.security.sasl.util.PrivilegedSaslClient.evaluateChallenge(PrivilegedSaslClient.java:55)
		at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.lambda$handleEvent$1(ClientConnectionOpenListener.java:460)
		at org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:949)
		at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
		at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
		at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
		at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
		at java.lang.Thread.run(Thread.java:748)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
[ERROR]   SecurityAuthCommandsTestCase.testDisableAuthManagement:705  Should have fail
[ERROR]   SecurityAuthCommandsTestCase.testOOBSASLManagementNative:423 » CommandLine {
 ...
[INFO] 
[ERROR] Tests run: 14, Failures: 0, Errors: 3, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE",2018/11/13 5:09 AM
WFCORE-4218,"{noformat}
cd testsuite/standalone/
mvn test -Delytron -Dtest=ReloadSASLFactoryTestCase
{noformat}

{noformat}
[INFO] Running org.jboss.as.test.integration.management.cli.ReloadSASLFactoryTestCase
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.446 s <<< FAILURE! - in null
[ERROR] Failure when constructing test  Time elapsed: 2.443 s  <<< ERROR!
java.lang.RuntimeException: java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:238)
	at org.wildfly.core.testrunner.WildflyTestRunner.checkServerState(WildflyTestRunner.java:167)
	at org.wildfly.core.testrunner.WildflyTestRunner.runTearDownTasks(WildflyTestRunner.java:138)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:111)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
Caused by: java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:149)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:75)
	at org.jboss.as.controller.client.helpers.DelegatingModelControllerClient.execute(DelegatingModelControllerClient.java:63)
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:234)
	... 21 more
Caused by: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:128)
	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:259)
	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:70)
	at org.jboss.as.protocol.mgmt.ManagementClientChannelStrategy$Establishing.getChannel(ManagementClientChannelStrategy.java:167)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient.getOrCreateChannel(RemotingModelControllerClient.java:146)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient$1.getChannel(RemotingModelControllerClient.java:60)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:135)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:110)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:263)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:168)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147)
	... 24 more
Caused by: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed:
   ANONYMOUS: javax.security.sasl.SaslException: ELY05092: Authentication name is empty
	at org.jboss.remoting3.remote.ClientConnectionOpenListener.allMechanismsFailed(ClientConnectionOpenListener.java:109)
	at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:402)
	at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:242)
	at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
	at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)
	at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:89)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:591)
	at ...asynchronous invocation...(Unknown Source)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:571)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:533)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:521)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connect(ProtocolConnectionUtils.java:204)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:120)
	... 34 more
	Suppressed: javax.security.sasl.SaslException: ELY05092: Authentication name is empty
		at org.wildfly.security.sasl.anonymous.AnonymousSaslClient.evaluateMessage(AnonymousSaslClient.java:74)
		at org.wildfly.security.sasl.util.AbstractSaslParticipant.evaluateMessage(AbstractSaslParticipant.java:199)
		at org.wildfly.security.sasl.util.AbstractSaslClient.evaluateChallenge(AbstractSaslClient.java:79)
		at org.wildfly.security.sasl.util.AbstractDelegatingSaslClient.evaluateChallenge(AbstractDelegatingSaslClient.java:54)
		at org.wildfly.security.sasl.util.PrivilegedSaslClient.lambda$evaluateChallenge$0(PrivilegedSaslClient.java:55)
		at java.security.AccessController.doPrivileged(Native Method)
		at org.wildfly.security.sasl.util.PrivilegedSaslClient.evaluateChallenge(PrivilegedSaslClient.java:55)
		at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.lambda$handleEvent$1(ClientConnectionOpenListener.java:460)
		at org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:949)
		at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
		at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
		at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
		at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
		at java.lang.Thread.run(Thread.java:748)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://127.0.0.1:9990. The connection failed
[INFO] 
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
{noformat}",2018/11/13 5:06 AM
WFCORE-4215,"{noformat}
cd testsuite/manualmode/
mvn test -Delytron -Dtest=HTTPSConnectionWithCLITestCase
{noformat}

{noformat}
[INFO] Running org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase
[ERROR] Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.004 s <<< FAILURE! - in org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase
[ERROR] org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase  Time elapsed: 0.003 s  <<< ERROR!
java.lang.RuntimeException: 
{
    ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.core.management.security.realm.ManagementRealm""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.management is missing [org.wildfly.core.management.security.realm.ManagementRealm]""]
}
	at org.jboss.as.test.integration.security.common.CoreUtils.applyUpdate(CoreUtils.java:265)
	at org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase$ServerResourcesSetup.setup(HTTPSConnectionWithCLITestCase.java:234)
	at org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase.prepareServer(HTTPSConnectionWithCLITestCase.java:105)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[ERROR] org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase  Time elapsed: 0.004 s  <<< ERROR!
java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remoting://127.0.0.1:9999. The connection failed
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:149)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:80)
	at org.jboss.as.test.integration.security.common.CoreUtils.applyUpdate(CoreUtils.java:257)
	at org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfaceTestCase.resetHttpInterfaceConfiguration(HTTPSManagementInterfaceTestCase.java:380)
	at org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase.resetTestConfiguration(HTTPSConnectionWithCLITestCase.java:155)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
Caused by: java.net.ConnectException: WFLYPRT0053: Could not connect to remoting://127.0.0.1:9999. The connection failed
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:128)
	at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:259)
	at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:70)
	at org.jboss.as.protocol.mgmt.ManagementClientChannelStrategy$Establishing.getChannel(ManagementClientChannelStrategy.java:167)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient.getOrCreateChannel(RemotingModelControllerClient.java:146)
	at org.jboss.as.controller.client.impl.RemotingModelControllerClient$1.getChannel(RemotingModelControllerClient.java:60)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:135)
	at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:110)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:263)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:168)
	at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147)
	... 32 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.xnio.nio.WorkerThread$ConnectHandle.handleReady(WorkerThread.java:327)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:591)
	at ...asynchronous invocation...(Unknown Source)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:571)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:533)
	at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:521)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connect(ProtocolConnectionUtils.java:204)
	at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:120)
	... 42 more

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR] org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase.org.wildfly.core.test.standalone.mgmt.HTTPSConnectionWithCLITestCase
[ERROR]   Run 1: HTTPSConnectionWithCLITestCase.prepareServer:105 » Runtime {
    ""WFLYCTL0412:...
[ERROR]   Run 2: HTTPSConnectionWithCLITestCase.resetTestConfiguration:155 » IO java.net.Connec...
[INFO] 
[INFO] 
[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
{noformat}
",2018/11/13 4:30 AM
WFCORE-4213,"cd testsuite/manualmode/
mvn test -Delytron -Dtest=CLIAuthenticationTestCase

{code}
[INFO] Running org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase
[ERROR] Tests run: 3, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 34.361 s <<< FAILURE! - in org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase
[ERROR] testSaslAuth(org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase)  Time elapsed: 21.797 s  <<< ERROR!
java.lang.Exception: 
ry-name=test-sasl-factory --new-security-domain-name=test-sasl-security-domainile-system-realm-name=fs-test-realm --new-auth-facto 
Server reloaded.
Command success.
Authentication configured for management http-interface
sasl authentication-factory=management-sasl-authentication
security-domain=ManagementDomain
[standalone@127.0.0.1:9990 /] 
[standalone@127.0.0.1:9990 /] 
	at org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase.testSaslAuth(CLIAuthenticationTestCase.java:298)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
Caused by: java.lang.AssertionError
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertTrue(Assert.java:52)
	at org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase.testSaslAuth(CLIAuthenticationTestCase.java:262)
	... 40 more

[ERROR] testHttpAuth(org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase)  Time elapsed: 2.194 s  <<< ERROR!
org.wildfly.core.testrunner.UnsuccessfulOperationException: 
""WFLYCTL0367: Cannot remove capability 'org.wildfly.security.realm-mapper.fs-test-realm' as it is required by other capabilities:
capability 'org.wildfly.security.sasl-authentication-factory.management-sasl-authentication' requires it for attribute 'realm-mapper' at address '/subsystem=elytron/sasl-authentication-factory=management-sasl-authentication'""
	at org.wildfly.core.testrunner.ManagementClient.checkSuccessful(ManagementClient.java:247)
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:235)
	at org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase.cleanTest(CLIAuthenticationTestCase.java:169)
	at org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase.testHttpAuth(CLIAuthenticationTestCase.java:228)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[ERROR] org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase  Time elapsed: 12.56 s  <<< ERROR!
org.wildfly.core.testrunner.UnsuccessfulOperationException: 
""WFLYCTL0367: Cannot remove capability 'org.wildfly.security.security-realm.fs-test-realm' as it is required by other capabilities:
capability 'org.wildfly.security.security-domain.ManagementDomain' requires it for attribute 'realm' at address '/subsystem=elytron/security-domain=ManagementDomain'""
	at org.wildfly.core.testrunner.ManagementClient.checkSuccessful(ManagementClient.java:247)
	at org.wildfly.core.testrunner.ManagementClient.executeForResult(ManagementClient.java:235)
	at org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase.cleanConfig(CLIAuthenticationTestCase.java:136)
	at org.jboss.as.test.manualmode.management.cli.CLIAuthenticationTestCase.afterClass(CLIAuthenticationTestCase.java:98)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   CLIAuthenticationTestCase.afterClass:98->cleanConfig:136 » UnsuccessfulOperation
[ERROR]   CLIAuthenticationTestCase.testHttpAuth:228->cleanTest:169 » UnsuccessfulOperation
[ERROR]   CLIAuthenticationTestCase.testSaslAuth:298  security enable-sasl-management --...
[INFO] 
[ERROR] Tests run: 3, Failures: 0, Errors: 3, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE

{code}
",2018/11/13 4:12 AM
WFCORE-4206,"javax.annotation.api doesn't seem use by the module. Optional dep could be removed.
",2018/11/08 9:53 AM
WFCORE-4200,NoData,2018/11/07 8:22 AM
WFCORE-4196,"SNICombinedWithALPNTestCase added with WFCORE-3873 does not conform with IBM JDK key algorithm name. This needs to be fixed.

Also as IBM JDK 8 and lower does not contain ALPN implementation and neither the ALPN-hack work there (it works only with Oracle JDK and Open JDK as it depends on JDK internals) we would have to provide ALPN in such situation somehow. We can either use Jetty ALPN implementation or wildfly-openssl using OpenSSL libraries. Both variants would bring unwanted difficulties with running this testsuite in our environment.

Let's skip these tests for IBM JDK less than version 9. With newer IBM JDK version, there will probably be ALPN already part of JDK, so we can execute it then.",2018/11/02 7:50 AM
WFCORE-4192,"Customer impact: 
Possibly in testing scenarios, production scenarios will very likely use security.

Scenario description: Automated test ([source code|http://git.app.eng.bos.redhat.com/git/jbossqe/eap-tests-ejb.git/tree/ejb-multi-server-ts/src/test/java/org/jboss/qa/ejb/tests/jbeap10217/ServerToServerCallsFromStatelessToStatefulBean_JBEAP13730_TestCase.java?h=security-exception-anonymous]) which does these steps:
1. starts two servers (with standalone-ha.xml profile, but they don't form a cluster): CLUSTER1_NODE1 and CLUSTER2_NODE1 (the original scenario was simplified from 2 clusters to 2 servers)
2. creates remote outbound connection on CLUSTER1_NODE1 to CLUSTER2_NODE1:
{code:xml}
        <subsystem xmlns=""urn:jboss:domain:remoting:4.0"">
            <endpoint/>
            <http-connector name=""http-remoting-connector"" connector-ref=""default"" security-realm=""ApplicationRealm""/>
            <outbound-connections>
                <remote-outbound-connection name=""connection-to-cluster2"" outbound-socket-binding-ref=""connection-to-cluster2""/>
            </outbound-connections>
        </subsystem>
{code}
3. deletes security-realm=""ApplicationRealm"" from CLUSTER2_NODE1:
{code:xml}
    <subsystem xmlns=""urn:jboss:domain:remoting:4.0"">
      <endpoint/>
      <http-connector connector-ref=""default"" name=""http-remoting-connector""/>
    </subsystem>
{code}

4. deploys intermediary bean on CLUSTER1_NODE1 ([source code|http://git.app.eng.bos.redhat.com/git/jbossqe/eap-tests-ejb.git/tree/ejb-multi-server-ts/src/test/java/org/jboss/qa/ejb/tests/jbeap10217/beans/IntermediaryBeanStateless.java?h=security-exception-anonymous]) and target bean on CLUSTER2_NODE1 ([source code|http://git.app.eng.bos.redhat.com/git/jbossqe/eap-tests-ejb.git/tree/ejb-multi-server-ts/src/test/java/org/jboss/qa/ejb/tests/jbeap10217/beans/TargetBeanStateful.java?h=security-exception-anonymous])
5. invokes intermediary bean with this code:
{code:java}
        final Properties properties = new Properties();
        properties.put(Context.INITIAL_CONTEXT_FACTORY, WildFlyInitialContextFactory.class.getName());
        final InitialContext ejbCtx = new InitialContext(properties);
        final IntermediaryBeanRemote bean = (IntermediaryBeanRemote)ejbCtx
                .lookup(""ejb:/bean-intermediary/"" + IntermediaryBeanStateless.class.getSimpleName() + ""!""
                        + IntermediaryBeanRemote.class.getName());
        for (int i = 0; i < 200; i++) {
            bean.call();
        }
{code}

When intermediary bean tries to invoke target bean,  it gets this exception:
{code}
CLUSTER1_NODE1: 09:29:34,536 ERROR [org.jboss.as.ejb3.invocation] (default task-6) WFLYEJB0034: EJB Invocation failed on component IntermediaryBeanStateless for method public abstract void org.jboss.qa.ejb.tests.jbeap10217.beans.IntermediaryBeanRemote.call(): java.lang.SecurityException: WFTXN0013: The peer threw a SecurityException; see peer logs for more information
        at org.wildfly.transaction.client.provider.remoting.TransactionClientChannel.setRollbackOnly(TransactionClientChannel.java:178)
        at org.wildfly.transaction.client.provider.remoting.RemotingRemoteTransactionPeer$1.end(RemotingRemoteTransactionPeer.java:158)
        at org.wildfly.transaction.client.SubordinateXAResource.end(SubordinateXAResource.java:130)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.doEnd(TransactionImple.java:1089)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.endAssociation(TransactionImple.java:1060)
        at com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord.endAssociation(XAResourceRecord.java:1287)
        at com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord.topLevelAbort(XAResourceRecord.java:313)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:3023)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:3002)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.Abort(BasicAction.java:1674)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.Abort(BasicAction.java:1615)
        at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:99)
        at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:162)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1289)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:126)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:89)
        at org.wildfly.transaction.client.LocalTransaction.commitAndDissociate(LocalTransaction.java:73)
        at org.wildfly.transaction.client.ContextTransactionManager.commit(ContextTransactionManager.java:71)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:92)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:279)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:332)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:240)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
        at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)
        at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.remote.EJBRemoteTransactionPropagatingInterceptor.processInvocation(EJBRemoteTransactionPropagatingInterceptor.java:89)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.deployment.processors.EjbSuspendInterceptor.processInvocation(EjbSuspendInterceptor.java:57)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)
        at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:609)
        at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)
        at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)
        at org.jboss.as.ejb3.remote.AssociationImpl$$Lambda$1232/202321503.apply(Unknown Source)
        at org.wildfly.security.auth.server.SecurityIdentity.runAsFunctionEx(SecurityIdentity.java:380)
        at org.jboss.as.ejb3.remote.AssociationImpl.invokeWithIdentity(AssociationImpl.java:535)
        at org.jboss.as.ejb3.remote.AssociationImpl.invokeMethod(AssociationImpl.java:530)
        at org.jboss.as.ejb3.remote.AssociationImpl.lambda$receiveInvocationRequest$0(AssociationImpl.java:193)
        at org.jboss.as.ejb3.remote.AssociationImpl$$Lambda$1230/1343168004.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: Remote exception java.lang.SecurityException: WFTXN0088: User anonymous does not have permission (""org.wildfly.transaction.client.RemoteTransactionPermission"" """")
        at org.wildfly.transaction.client.provider.remoting.TransactionServerChannel.getSecurityIdentity(TransactionServerChannel.java:745)
        at org.wildfly.transaction.client.provider.remoting.TransactionServerChannel.handleXaTxnRollbackOnly(TransactionServerChannel.java:390)
        at org.wildfly.transaction.client.provider.remoting.TransactionServerChannel$ReceiverImpl.handleMessage(TransactionServerChannel.java:132)
        at org.jboss.remoting3.remote.RemoteConnectionChannel.lambda$handleMessageData$3(RemoteConnectionChannel.java:430)
        at org.jboss.remoting3.remote.RemoteConnectionChannel$$Lambda$901/21589536.run(Unknown Source)
        at org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:926)
        at org.jboss.remoting3.EndpointImpl$TrackingExecutor$$Lambda$885/1175809082.run(Unknown Source)
        ... 3 more

{code}

It seems, that transaction client is trying to check the ""org.wildfly.transaction.client.RemoteTransactionPermission"". This permission is bound to Elytron but Elytron is not running? 

The permission is defined in standalone-ha.xml on CLUSTER2_NODE1:
{code:xml}
          <permission-mapping>
            <principal name=""anonymous""/>
            <permission module=""org.wildfly.extension.batch.jberet"" target-name=""*"" class-name=""org.wildfly.extension.batch.jberet.deployment.BatchPermission""/>
            <permission module=""org.wildfly.transaction.client"" class-name=""org.wildfly.transaction.client.RemoteTransactionPermission""/>
            <permission module=""org.jboss.ejb-client"" class-name=""org.jboss.ejb.client.RemoteEJBPermission""/>
          </permission-mapping>
{code}

Please check https://github.com/wildfly/wildfly-transaction-client/blob/master/src/main/java/org/wildfly/transaction/client/provider/remoting/TransactionServerChannel.java#L744 
",2018/10/31 10:41 AM
WFCORE-4183,"The transaction subsystem has a read-write runtime-only attribute whose value it stores in the resource's DMR model node.  Its value is not persisted, so it really is runtime-only. (The value controls behavior of some runtime-only custom ops; this setup is basically a way of storing a semi-permanent param for those ops so it doesn't need to be passed with each invocation. Odd, but it is what it is.)

Problem is read-resource calls end up including the attribute when they should not:
 
{code}
[disconnected /] embed-server --admin-only=false
[standalone@embedded /] /subsystem=transactions/log-store=log-store:write-attribute(name=expose-all-logs,value=false)
{
    ""outcome"" => ""success"",
    ""result"" => undefined
}

[standalone@embedded /] /subsystem=transactions/log-store=log-store:read-resource(include-runtime=false)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""expose-all-logs"" => false,
        ""type"" => ""default"",
        ""transactions"" => undefined
    }
}
{code}

This happens because of ReadResourceHandler's behavior of trying to check for attributes in the DMR model that are not reflected in the ManagementResourceRegistration. Two possible fixes:

1) Make those checks a bit more sophisticated.

2) Remove that handling altogether as it's been *at least* five years since it was valid to have an attribute that is not reflected in the MRR.

I think I'll try #2.",2018/10/27 1:05 PM
WFCORE-4182,There are a few small typos in the description texts for the shutdown and reload operation. More info in the attached PR.,2018/10/26 8:14 AM
WFCORE-4166,"HttpListenerRegistryService.SERVICE_NAME should be deprecated and the remoting subsystem should add a RuntimeCapability that exposes ListenerRegistry.  The HttpListenerRegistryService should then be exposed under that capability's ServiceName, with an alias added for the legacy HttpListenerRegistryService.SERVICE_NAME.

This will help eliminate a hard dependency on the org.jboss.as.remoting module from the messaging subsystem in full.",2018/10/15 9:21 AM
WFCORE-4165,Various services in the appserver depend on the SuspendController via SuspendController.SERVICE_NAME. This should be exposed via a capability.,2018/10/14 10:32 AM
WFCORE-4159,"Running the testsuite in on JDKs other than Oracle Java 1.8 causes Maven to run into a compilation error with the following message:

...
00:20:08 [INFO] WildFly Core Test Suite: Shared .................... SUCCESS [  1.555 s]
00:20:08 [INFO] WildFly: Vault Test Feature Pack ................... SUCCESS [  0.203 s]
00:20:08 [INFO] WildFly Core Test Suite: Aggregator ................ SUCCESS [  0.599 s]
00:20:08 [INFO] WildFly Core Test Suite: Standalone Integration Tests FAILURE [  4.565 s]
00:20:08 [INFO] WildFly Core Test Suite: Elytron Integration Tests . SUCCESS [01:54 min]
00:20:08 [INFO] WildFly Core Test Suite: Embedded Integration Tests  SUCCESS [ 31.858 s]
00:20:08 [INFO] wildfly-script-tests ............................... SUCCESS [ 17.741 s]
00:20:08 [INFO] WildFly Core Test Suite: Role Based Access Control . SUCCESS [02:51 min]
00:20:08 [INFO] WildFly Core Test Suite: Domain Mode Integration Tests SUCCESS [26:36 min]
00:20:08 [INFO] WildFly Core Test Suite: Manual Mode Tests ......... SUCCESS [11:26 min]
00:20:08 [INFO] WildFly Core Test Suite: Patching 7.0.0.Alpha3-SNAPSHOT SUCCESS [14:21 min]
00:20:08 [INFO] ------------------------------------------------------------------------
00:20:08 [INFO] BUILD FAILURE
00:20:08 [INFO] ------------------------------------------------------------------------
00:20:08 [INFO] Total time: 01:14 h
00:20:08 [INFO] Finished at: 2018-10-09T00:20:07Z
00:20:08 [INFO] ------------------------------------------------------------------------
00:20:08 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:testCompile (default-testCompile) on project wildfly-core-testsuite-standalone: Compilation failure: Compilation failure: 
00:20:08 [ERROR] /home/hudson/hudson_workspace/workspace/eap-7.x-as-testsuite-core-rhel/28995480/testsuite/standalone/src/test/java/org/jboss/as/test/integration/management/cli/LongOutputTestCase.java:[3,27] package com.sun.javafx.util does not exist
00:20:08 [ERROR] /home/hudson/hudson_workspace/workspace/eap-7.x-as-testsuite-core-rhel/28995480/testsuite/standalone/src/test/java/org/jboss/as/test/integration/management/cli/LongOutputTestCase.java:[240,13] cannot find symbol
00:20:08 [ERROR]   symbol:   variable Utils
00:20:08 [ERROR]   location: class org.jboss.as.test.integration.management.cli.LongOutputTestCase
...

Probably caused by a change in [WFCORE-4096|https://issues.jboss.org/browse/WFCORE-4096].",2018/10/09 4:28 AM
WFCORE-4158,"The {{RootSubsystemOperationsTestCase}} periodically fails on Windows. The failure occurs in a {{@BeforeClass}} setup which attempts to clear the log directory. A file appears to still be locked by something from a previous test, likely the {{LoggingSubsystemTestCase}}. The failures seem to be consistent with the {{another.log}} being locked.

{code}
[00:47:20][Step 3/5] [INFO] Running org.jboss.as.logging.LoggingSubsystemTestCase
[00:47:34][Step 3/5] [INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 14.059 s - in org.jboss.as.logging.LoggingSubsystemTestCase
[00:47:34][Step 3/5] [INFO] Running org.jboss.as.logging.logmanager.Log4jAppenderTestCase
[00:47:34][Step 3/5] [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in org.jboss.as.logging.logmanager.Log4jAppenderTestCase
[00:47:34][Step 3/5] [INFO] Running org.jboss.as.logging.RootSubsystemOperationsTestCase
[00:47:34][Step 3/5] [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.001 s <<< FAILURE! - in org.jboss.as.logging.RootSubsystemOperationsTestCase
[00:47:34][Step 3/5] [ERROR] org.jboss.as.logging.RootSubsystemOperationsTestCase  Time elapsed: 0.001 s  <<< ERROR!
[00:47:34][Step 3/5] java.nio.file.FileSystemException: 
[00:47:34][Step 3/5] C:\buildAgent\work\e9bccef30f12678d\logging\target\logs\another.log: The process cannot access the file because it is being used by another process.
[00:47:34][Step 3/5] 
[00:47:34][Step 3/5]    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86)
[00:47:34][Step 3/5]    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
[00:47:34][Step 3/5]    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
[00:47:34][Step 3/5]    at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:269)
[00:47:34][Step 3/5]    at sun.nio.fs.AbstractFileSystemProvider.delete(AbstractFileSystemProvider.java:103)
[00:47:34][Step 3/5]    at java.nio.file.Files.delete(Files.java:1126)
[00:47:34][Step 3/5]    at org.jboss.as.logging.AbstractLoggingSubsystemTest$1.visitFile(AbstractLoggingSubsystemTest.java:502)
[00:47:34][Step 3/5]    at org.jboss.as.logging.AbstractLoggingSubsystemTest$1.visitFile(AbstractLoggingSubsystemTest.java:499)
[00:47:34][Step 3/5]    at java.nio.file.Files.walkFileTree(Files.java:2670)
[00:47:34][Step 3/5]    at java.nio.file.Files.walkFileTree(Files.java:2742)
[00:47:34][Step 3/5]    at org.jboss.as.logging.AbstractLoggingSubsystemTest.clearDirectory(AbstractLoggingSubsystemTest.java:499)
[00:47:34][Step 3/5]    at org.jboss.as.logging.AbstractOperationsTestCase.setupLoggingDir(AbstractOperationsTestCase.java:53)
[00:47:34][Step 3/5]    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[00:47:34][Step 3/5]    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
[00:47:34][Step 3/5]    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[00:47:34][Step 3/5]    at java.lang.reflect.Method.invoke(Method.java:498)
[00:47:34][Step 3/5]    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
[00:47:34][Step 3/5]    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
[00:47:34][Step 3/5]    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
[00:47:34][Step 3/5]    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
[00:47:34][Step 3/5]    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
[00:47:34][Step 3/5]    at org.junit.runners.Suite.runChild(Suite.java:128)
[00:47:34][Step 3/5]    at org.junit.runners.Suite.runChild(Suite.java:27)
[00:47:34][Step 3/5]    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
[00:47:34][Step 3/5]    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
[00:47:34][Step 3/5]    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
[00:47:34][Step 3/5]    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
[00:47:34][Step 3/5]    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
[00:47:34][Step 3/5]    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
[00:47:34][Step 3/5]    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
[00:47:34][Step 3/5] 
[00:47:34][Step 3/5] [INFO] Running org.jboss.as.logging.validators.SuffixValidatorTestCase
[00:47:34][Step 3/5] [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in org.jboss.as.logging.validators.SuffixValidatorTestCase
[00:47:34][Step 3/5] org.jboss.as.logging.RootSubsystemOperationsTestCase
[00:47:34][org.jboss.as.logging.RootSubsystemOperationsTestCase] RootSubsystemOperationsTestCase
[00:47:34][RootSubsystemOperationsTestCase] java.nio.file.FileSystemException: C:\buildAgent\work\e9bccef30f12678d\logging\target\logs\another.log: The process cannot access the file because it is being used by another process.
[00:47:34][RootSubsystemOperationsTestCase] java.nio.file.FileSystemException: 
C:\buildAgent\work\e9bccef30f12678d\logging\target\logs\another.log: The process cannot access the file because it is being used by another process.

    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
    at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:269)
    at sun.nio.fs.AbstractFileSystemProvider.delete(AbstractFileSystemProvider.java:103)
    at java.nio.file.Files.delete(Files.java:1126)
    at org.jboss.as.logging.AbstractLoggingSubsystemTest$1.visitFile(AbstractLoggingSubsystemTest.java:502)
    at org.jboss.as.logging.AbstractLoggingSubsystemTest$1.visitFile(AbstractLoggingSubsystemTest.java:499)
    at java.nio.file.Files.walkFileTree(Files.java:2670)
    at java.nio.file.Files.walkFileTree(Files.java:2742)
    at org.jboss.as.logging.AbstractLoggingSubsystemTest.clearDirectory(AbstractLoggingSubsystemTest.java:499)
    at org.jboss.as.logging.AbstractOperationsTestCase.setupLoggingDir(AbstractOperationsTestCase.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:27)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
    at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
[00:47:08][Step 3/5] Failed tests detected
[00:47:34][Step 3/5] [INFO] 
[00:47:34][Step 3/5] [INFO] Results:
[00:47:34][Step 3/5] [INFO] 
[00:47:34][Step 3/5] [ERROR] Errors: 
[00:47:34][Step 3/5] [ERROR]   RootSubsystemOperationsTestCase>AbstractOperationsTestCase.setupLoggingDir:53->AbstractLoggingSubsystemTest.clearDirectory:499 ¯ FileSystem
[00:47:34][Step 3/5] [INFO] 
[00:47:34][Step 3/5] [ERROR] Tests run: 71, Failures: 0, Errors: 1, Skipped: 9
[00:47:34][Step 3/5] [INFO] 
[00:47:34][Step 3/5] [ERROR] There are test failures.
{code}",2018/10/08 12:00 PM
WFCORE-4152,"Customer has domain mode, they have the following enabled
- RBAC
- Management realm with ssl and ldap

When HC is disconnected from the DC due to bad GC performance, it then cannot connect to the DC with the following errors

2018-08-15 04:30:19,035 WARN  [org.jboss.as.host.controller] (management task-3) WFLYHC0015: Connection to remote host-controller closed. Trying to reconnect.
2018-08-15 04:30:19,036 INFO  [org.jboss.as.host.controller] (Host Controller Service Threads - 149) WFLYHC0150: Trying to reconnect to master host controller.
2018-08-15 04:30:21,006 ERROR [org.jboss.as.host.controller] (Host Controller Service Threads - 151) WFLYHC0143: Failed to apply domain-wide configuration from master host controller. Operation outcome: failed. Failure description ""WFLYCTL0313: Unauthorized to execute operation 'server-set-reload-required' for resource '[]' -- \""WFLYCTL0332: Permission denied\""""
due to this , We are not able to restart any JVMs in this domain. The only way we could recover was to restart all DC/HC & JVMs. I have collected the logs and config files for DC/HC/JVM and I am uploading it to the case. Please review and let us know what is the root cause of this issue and what can be done to prevent it. 

There is a management operation is requires reload in the log.
",2018/10/04 5:31 AM
WFCORE-4148,"Check and consider to put escaped quotes (\"") back to the -Xloggc in standalone.sh

See the discussion [here|https://github.com/wildfly/wildfly-core/pull/3496#discussion_r221509989]",2018/10/02 8:36 AM
WFCORE-4147,"Wrong JAVA_OPTS propagation, wrong PowerShell GC logging

Merging of [PR3496|https://github.com/wildfly/wildfly-core/pull/3496] introduces:
* new blocker regression
** Wrong JAVA_OPTS propagation on JDK8
*** Default JAVA_OPTS, like max heap size (xmx), xms, etc. are not propagated to JVM on bat scripts
*** set ""GC_LOG=true""
*** standalone.bat
*** ->
*** {noformat}===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: ""C:\Users\Administrator\playground\wfly.30.gc\wildfly""

  JAVA: ""C:\Program Files\Java\jdk1.8.0_121\bin\java""

  JAVA_OPTS: """"-Dprogram.name=standalone.bat -Xms64M -Xmx512M -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman"" -Xloggc:""C:\Users\Administrator\playground\wfly.30.gc\wildfly\standalone\log\gc.log"" -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=3M -XX:-TraceClassUnloading ""

==============================================================================={noformat}
*** it looks like some quotation bug
*** according to the jconsole - max heap size (Xmx) is not set correctly (~1.8GB), according to the cli - program.name is not set correctly (program.name = ""standalone.bat -Xms64M -Xmx512M -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman"")
* new blocker bug
** wrong PowerShell GC logging
*** ""standalone.bat + jdk11 + gc enabled"" creates:
**** standalone\log\gc.log
**** standalone\log\gc.log.0
*** ""standalone.ps1 + jdk11 + gc enabled"" creates:
**** * standalone\log\gc.log

Target release of this jira should be WF15",2018/10/02 8:21 AM
WFCORE-4141,"Also, get rid of the serverEnvironment field null checks.

Minor thing; I just happened to find a commit fixing this in a different semi-dormant branch and figure I might as well get it pushed in. ",2018/09/28 12:50 PM
WFCORE-4140,"ExtensionAddHandler rollback handling passes the extension resource to ExtensionRegistry.remove when the API wants the root resource. This results in this failure:

{code}
2018-09-27 17:21:19,300 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0190: Step handler org.jboss.as.controller.extension.ExtensionAddHandler@4bdb1e35 for operation add at address [(""extension"" => ""org.jboss.as.test.extension"")] failed handling operation rollback -- java.lang.NullPointerException: java.lang.NullPointerException
	at org.jboss.as.controller.extension.ExtensionRegistry.hasSubsystemsRegistered(ExtensionRegistry.java:372)
	at org.jboss.as.controller.extension.ExtensionRegistry.removeExtension(ExtensionRegistry.java:342)
	at org.jboss.as.controller.extension.ExtensionAddHandler$1.handleRollback(ExtensionAddHandler.java:97)
	at org.jboss.as.controller.AbstractOperationContext$RollbackDelegatingResultHandler.handleResult(AbstractOperationContext.java:1561)
	at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1533)
	at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1515)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1472)
	at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1455)
	at org.jboss.as.controller.AbstractOperationContext$Step.access$400(AbstractOperationContext.java:1319)
	at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:876)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:756)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:467)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1411)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:423)
{code}

Also, ExtensionResource should not return null from getChildren. Fixing that would eliminate the NPE but the rollback handling wouldn't work properly with the wrong object being passed in.",2018/09/27 6:45 PM
WFCORE-4136,"Slave HC fails to boot if it connects to a DC that has a rollout-plan configured when the slave was shut down.

See Steps to Reproduce.

Failure is: 

{code}
[Host Controller] 14:51:04,208 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 4) WFLYCTL0013: Operation (""add"") failed - address: ([(""management-client-content"" => ""rollout-plans"")]): org.jboss.as.management.client.content.ContentStorageException: java.io.FileNotFoundException: /Users/bstansberry/tmp/support/02184219/slave/domain/data/content/2d/56893cc4da1c67a79f4845a57ae90c04a969b4/content (No such file or directory)
[Host Controller] 	at org.jboss.as.management.client.content.ManagedDMRContentTypeResource.loadContent(ManagedDMRContentTypeResource.java:306)
[Host Controller] 	at org.jboss.as.management.client.content.ManagedDMRContentTypeResource.<init>(ManagedDMRContentTypeResource.java:91)
[Host Controller] 	at org.jboss.as.management.client.content.ManagedDMRContentTypeAddHandler.execute(ManagedDMRContentTypeAddHandler.java:58)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:982)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:726)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:450)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1402)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:418)
[Host Controller] 	at org.jboss.as.controller.AbstractControllerService.internalExecute(AbstractControllerService.java:490)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService.access$1100(DomainModelControllerService.java:200)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor$1.lambda$apply$0(DomainModelControllerService.java:1372)
[Host Controller] 	at org.jboss.as.controller.access.InVmAccess.runInVm(InVmAccess.java:63)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor$1.apply(DomainModelControllerService.java:1372)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor$1.apply(DomainModelControllerService.java:1369)
[Host Controller] 	at org.jboss.as.host.controller.SecurityActions$Execution$1.execute(SecurityActions.java:77)
[Host Controller] 	at org.jboss.as.host.controller.SecurityActions.privilegedExecution(SecurityActions.java:47)
[Host Controller] 	at org.jboss.as.host.controller.DomainModelControllerService$InternalExecutor.execute(DomainModelControllerService.java:1375)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnectionService.applyRemoteDomainModel(RemoteDomainConnectionService.java:603)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnectionService.access$1200(RemoteDomainConnectionService.java:138)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnectionService$3.applyDomainModel(RemoteDomainConnectionService.java:546)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnection.applyDomainModel(RemoteDomainConnection.java:325)
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnection$RegisterSubsystemsRequest$1.execute(RemoteDomainConnection.java:468)
[Host Controller] 	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
[Host Controller] 	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
[Host Controller] 	at java.lang.Thread.run(Thread.java:748)
[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
[Host Controller] Caused by: java.io.FileNotFoundException: /Users/bstansberry/tmp/support/02184219/slave/domain/data/content/2d/56893cc4da1c67a79f4845a57ae90c04a969b4/content (No such file or directory)
[Host Controller] 	at java.io.FileInputStream.open0(Native Method)
[Host Controller] 	at java.io.FileInputStream.open(FileInputStream.java:195)
[Host Controller] 	at java.io.FileInputStream.<init>(FileInputStream.java:138)
[Host Controller] 	at org.jboss.vfs.spi.RootFileSystem.openInputStream(RootFileSystem.java:51)
[Host Controller] 	at org.jboss.vfs.VirtualFile.openStream(VirtualFile.java:318)
[Host Controller] 	at org.jboss.as.management.client.content.ManagedDMRContentTypeResource.loadContent(ManagedDMRContentTypeResource.java:292)
[Host Controller] 	... 27 more
[Host Controller] 
[Host Controller] 14:51:04,212 ERROR [org.jboss.as.host.controller] (Host Controller Service Threads - 4) WFLYHC0143: Failed to apply domain-wide configuration from master host controller. Operation outcome: failed. Failure description {""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-552"" => ""WFLYCTL0158: Operation handler failed: org.jboss.as.management.client.content.ContentStorageException: java.io.FileNotFoundException: /Users/bstansberry/tmp/support/02184219/slave/domain/data/content/2d/56893cc4da1c67a79f4845a57ae90c04a969b4/content (No such file or directory)""}}
[Host Controller] 14:51:04,218 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0001: Could not connect to remote domain controller remote://127.0.0.1:9999: 1-$-
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnection$RegisterSubsystemsRequest$1.execute(RemoteDomainConnection.java:472)
...
[Host Controller] 14:51:04,219 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0147: No domain controller discovery options remain.
[Host Controller] 14:51:04,220 ERROR [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0002: Could not connect to master. Error was: java.lang.IllegalStateException: WFLYHC0120: Tried all domain controller discovery option(s) but unable to connect
[Host Controller] 14:51:04,221 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0178: Aborting with exit code 99
{code}",2018/09/26 4:18 PM
WFCORE-4129,"When EAP is installed via RPM packages and started in domain mode, there are following info messages visible in the {{server.log}}:
{code}
[INFO]       [line 163] 2018-08-31 11:22:18,251 WARN  [org.jboss.as.server] (main) WFLYSRV0266: Server home is set to '/opt/rh/eap7/root/usr/share/wildfly/domain/servers/server-one', but server real home is '/var/opt/rh/eap7/lib/wildfly/domain/servers/server-one' - unpredictable results may occur.
[INFO]       [line 4] 2018-08-31 10:25:47,525 WARN  [org.jboss.as.server] (main) WFLYSRV0266: Server home is set to '/opt/rh/eap7/root/usr/share/wildfly/domain/servers/server-two', but server real home is '/var/opt/rh/eap7/lib/wildfly/domain/servers/server-two' - unpredictable results may occur.
{code}

Based on the [comment in issue JBEAP-10261|https://issues.jboss.org/browse/JBEAP-10261?focusedCommentId=13407443&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13407443], it looks like a side effect of that. So main problem is probably in the startup scripts and not in RPM themselves.

Even though, those messages are just INFO level, still - I believe that as this is a default RPM installation no such disturbing message takes place in the log. We should either be sure that this kind of installation makes no trouble or we should adjust the installation way itself so such info message does not have to be printed.",2018/09/26 4:49 AM
WFCORE-4124,The {{CliCommandBuilder}} does not currently add the modular JVM arguments to the command for launching CLI. This should be added if this is a modular environment.,2018/09/20 7:06 PM
WFCORE-4121,"Currently the launchers {{DomainCommandBuilder}} adds modular JDK arguments to the process controller, but not the host controller. This means when using the default JVM arguments the host controller won't start.",2018/09/20 2:21 PM
WFCORE-4120,"The {{ExtensionAddHandler}} is not checking that the module that is being added as extension really has an Extension service. 

That means we can do odd things like:
{{domain@localhost:9990 /] /extension=io.netty:add}}

This operation completes successfully and io.netty is added to the extensions section in the configuration files, which is incorrect.
",2018/09/20 11:13 AM
WFCORE-4116,"Using WF14 and Oracle JDK 10.0.2, there is an illegal reflective access warning while WF boots:

{code}
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.jboss.as.server.deployment.reflect.ClassReflectionIndex (jar:file:/Users/.../wildfly-14.0.0.Final/modules/system/layers/base/org/jboss/as/server/main/wildfly-server-6.0.1.Final.jar!/) to method java.lang.Object.finalize()
WARNING: Please consider reporting this to the maintainers of org.jboss.as.server.deployment.reflect.ClassReflectionIndex
{code}",2018/09/17 8:59 AM
WFCORE-4092,I believe the intent is to not have any public classes or interfaces in the elytron maven module other than those excluded from export in the module.xml or ones expressly intended to be API to other subsystems or end users. I don't think ModifiableKeyStoreDecorator is either.,2018/09/06 3:12 PM
WFCORE-4086,"WFCORE-3943 introduced a new method which accepts a class loader for the reflective invocation. This fails with any release of WildFly Core prior to 6.0.0.Alpha5 as the method including the class loader is not present. The method using the class loader should be checked and fallback to the method without the class loader parameter.

Note that this _may_ affect the migration tool which could require a 6.0.2.Final release of WildFly Core.",2018/09/04 11:25 AM
WFCORE-4082,NoData,2018/08/31 10:48 AM
WFCORE-4077,"The {{common.sh}} script introduced a new function using the function keyword. This does not appear to work with all shells, specifically dash. In bash the keyword is also deprecated. The ""function"" keyword should be removed  from the {{common.sh}} script.",2018/08/29 12:27 PM
WFCORE-4075,"Proper cleanup of InterdependentDeploymentTestCase

If this test fails, test's deployments needs to be un-deployed. ",2018/08/29 4:24 AM
WFCORE-4065,Logging subsystem formatters are in a different order (legacy matches historical order) and legacy licenses files don't include some galleon plugins.,2018/08/24 6:59 PM
WFCORE-4225,"Following log message is logged during the deploy operation of a deployment:
{code}
10:52:11,703 INFO  [io.jaegertracing.Configuration] (ServerService Thread Pool -- 72) Initialized tracer=JaegerTracer(version=Java-0.30.6, serviceName=helloworld-rs.war, reporter=RemoteReporter(sender=UdpSender(), closeEnqueueTimeout=1000), sampler=RemoteControlledSampler(maxOperations=2000, manager=HttpSamplingManager(hostPort=localhost:5778), sampler=ProbabilisticSampler(tags={sampler.type=probabilistic, sampler.param=0.001})), tags={hostname=dhcp-10-40-5-80.brq.redhat.com, jaeger.version=Java-0.30.6, ip=10.40.5.80}, zipkinSharedRpcSpan=false, expandExceptionLogs=false)
{code}

This information is too verbose for INFO level. I propose to do one of following:

# Remove this log message from INFO level - note that very similar message is also logged on DEBUG level:
{code}
10:52:11,714 DEBUG [org.wildfly.microprofile.opentracing.smallrye] (ServerService Thread Pool -- 72) WFLYTRAC0001: Tracer initialized: JaegerTracer(version=Java-0.30.6, serviceName=helloworld-rs.war, reporter=RemoteReporter(sender=UdpSender(), closeEnqueueTimeout=1000), sampler=RemoteControlledSampler(maxOperations=2000, manager=HttpSamplingManager(hostPort=localhost:5778), sampler=ProbabilisticSampler(tags={sampler.type=probabilistic, sampler.param=0.001})), tags={hostname=dhcp-10-40-5-80.brq.redhat.com, jaeger.version=Java-0.30.6, ip=10.40.5.80}, zipkinSharedRpcSpan=false, expandExceptionLogs=false)
{code}
# Simplify the log message on INFO level to something simple, like:
{code}
10:52:11,703 INFO  [io.jaegertracing.Configuration] (ServerService Thread Pool -- 72) Initialized tracer for service helloworld-rs.war
{code}

This issue is a followup of a WFLY-10904.",2018/08/24 10:08 AM
WFCORE-4061,"ApplicationTypeConfigWriteAttributeHandler and SensitivityClassificationWriteAttributeHandler update the runtime state of the relevant ApplicationTypeConfig or AbstractSensitivity without any logic to revert the change if the op rolls back, e.g. if they are run in a composite or as a domain mode op where rollout fails.",2018/08/23 12:34 PM
WFCORE-4060,"We need to make sure that when the {{obtain-certificate}} operation is used to obtain a certificate from Let's Encrypt staging server and then used again to obtain a certificate from Let's Encrypt's non-staging server that the appropriate account URL is used (i.e., the account URL should start with the staging endpoint in the first case and it should start with the non-staging endpoint in the second case). For example, the following scenario should work properly:

{code}

# Try to obtain a certificate first using the staging endpoint and then again using the non-staging endpoint with the same certificate-authority-account
/subsystem=elytron/key-store=key-store3:add(credential-reference={clear-text=password},type=JKS,path=keystore3.jks)
/subsystem=elytron/certificate-authority-account=ca_letsenc3:add(alias=server,key-store=key-store3)
/subsystem=elytron/key-store=key-store3:obtain-certificate(alias=app3,certificate-authority-account=ca_letsenc3,domain-names=[""mydomain.com""],agree-to-terms-of-service,algorithm=RSA,staging=true) 
/subsystem=elytron/key-store=key-store3:obtain-certificate(alias=app3,certificate-authority-account=ca_letsenc3,domain-names=[""mydomain.com""],agree-to-terms-of-service,algorithm=RSA,staging=false) 
{code}

Other certificate authority management operations should also be able to handle switching between staging and non-staging using the same {{certificate-authority-account}}.",2018/08/22 4:11 PM
WFCORE-4051,"Creating 2-way SSL Context fails with error.

{code}
12:04:28,689 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC000001: Failed to start service org.wildfly.security.ssl-context.ssl-context-client-cert: org.jboss.msc.service.StartException in service org.wildfly.security.ssl-context.ssl-context-client-cert: java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used
	at org.wildfly.extension.elytron.SSLDefinitions$6.lambda$getValueSupplier$1(SSLDefinitions.java:982)
	at org.wildfly.extension.elytron.TrivialService.start(TrivialService.java:53)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1736)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1698)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1556)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used
	at sun.security.ssl.SSLContextImpl.chooseTrustManager(SSLContextImpl.java:115)
	at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:78)
	at javax.net.ssl.SSLContext.init(SSLContext.java:282)
	at org.wildfly.security.ssl.SSLContextBuilder.lambda$build$0(SSLContextBuilder.java:372)
	at org.wildfly.security.OneTimeSecurityFactory.create(OneTimeSecurityFactory.java:53)
	at org.wildfly.extension.elytron.SSLDefinitions$6.lambda$getValueSupplier$1(SSLDefinitions.java:980)
	... 9 more

12:04:28,690 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""server-ssl-context"" => ""ssl-context-client-cert"")
]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.ssl-context.ssl-context-client-cert"" => ""java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used
    Caused by: java.security.KeyManagementException: FIPS mode: only SunJSSE TrustManagers may be used""}}
{code}

Seems DelegatingTrustManager is created always.",2018/08/21 7:08 AM
WFCORE-4049,"In the past we used the following properties:

-Dsun.util.logging.disableCallerCheck=true
-Djdk.attach.allowAttachSelf=true

to activate some workarounds on modular JDKs.
These workarounds are not needed anymore.
",2018/08/21 5:51 AM
WFCORE-4047,"Testsuite hang in https://ci.wildfly.org/viewLog.html?buildId=118052&buildTypeId=WF_PullRequest_LinuxElytro&tab=buildResultsDiv

{code}
[11:30:50][Step 2/3] 2018-08-20 11:30:49
Full thread dump Java HotSpot(TM) Server VM (25.152-b16 mixed mode):

""Attach Listener"" #182 daemon prio=9 os_prio=0 tid=0xa3950000 nid=0x3e28 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

""XNIO-1 Accept"" #181 prio=5 os_prio=0 tid=0xa1ec2000 nid=0x56d4 runnable [0xa090b000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)
	- locked <0xe55f89f0> (a sun.nio.ch.Util$3)
	- locked <0xe55f89e0> (a java.util.Collections$UnmodifiableSet)
	- locked <0xe55f88e8> (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:101)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:532)

""XNIO-1 I/O-2"" #180 prio=5 os_prio=0 tid=0xa1ec1800 nid=0x56d3 runnable [0xa11ad000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)
	- locked <0xe55f7d60> (a sun.nio.ch.Util$3)
	- locked <0xe55f7d50> (a java.util.Collections$UnmodifiableSet)
	- locked <0xe55f7c58> (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:101)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:532)

""XNIO-1 I/O-1"" #179 prio=5 os_prio=0 tid=0x9f4bc400 nid=0x56d2 runnable [0xa18ad000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)
	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)
	- locked <0xe55f83a8> (a sun.nio.ch.Util$3)
	- locked <0xe55f8398> (a java.util.Collections$UnmodifiableSet)
	- locked <0xe55f82a0> (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)
	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:101)
	at org.xnio.nio.WorkerThread.run(WorkerThread.java:532)

""MSC service thread 11-8"" #178 prio=5 os_prio=0 tid=0x09d34c00 nid=0x56d0 waiting for monitor entry [0xa08ba000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at org.jboss.msc.service.ServiceControllerImpl.dependencyAvailable(ServiceControllerImpl.java:850)
	- waiting to lock <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceControllerImpl$DependencyAvailableTask.inform(ServiceControllerImpl.java:1665)
	at org.jboss.msc.service.ServiceControllerImpl$DependentsControllerTask.execute(ServiceControllerImpl.java:1612)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1556)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
	at java.lang.Thread.run(Thread.java:748)

""Controller Boot Thread"" #177 prio=5 os_prio=0 tid=0x9fc9c400 nid=0x56cf waiting for monitor entry [0xa0efe000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at org.jboss.msc.service.ServiceControllerImpl.getImmediateUnavailableDependencies(ServiceControllerImpl.java:1287)
	- waiting to lock <0xe5718bf0> (a org.jboss.msc.service.ServiceRegistrationImpl)
	- locked <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceControllerImpl.getUnavailableDependencies(ServiceControllerImpl.java:1279)
	at org.jboss.as.controller.ServiceVerificationHelper.execute(ServiceVerificationHelper.java:93)
	- locked <0xe575c008> (a org.jboss.as.controller.ServiceVerificationHelper)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:999)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:743)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:467)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1411)
	at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:495)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:470)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:432)
	at org.jboss.as.model.test.ModelTestModelControllerService.boot(ModelTestModelControllerService.java:276)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:419)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:372)
	at java.lang.Thread.run(Thread.java:748)

""MSC service thread 11-7"" #176 prio=5 os_prio=0 tid=0xa3954800 nid=0x56ce waiting on condition [0x9fa5c000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xe570b240> (a org.jboss.threads.EnhancedQueueExecutor)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1410)
	at java.lang.Thread.run(Thread.java:748)

""MSC service thread 11-6"" #175 prio=5 os_prio=0 tid=0xa0a57c00 nid=0x56cd waiting for monitor entry [0xa095c000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at org.jboss.msc.service.ServiceControllerImpl.dependencyAvailable(ServiceControllerImpl.java:850)
	- waiting to lock <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceControllerImpl$DependencyAvailableTask.inform(ServiceControllerImpl.java:1665)
	at org.jboss.msc.service.ServiceControllerImpl$DependentsControllerTask.execute(ServiceControllerImpl.java:1612)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1556)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
	at java.lang.Thread.run(Thread.java:748)

""MSC service thread 11-5"" #174 prio=5 os_prio=0 tid=0xa12a8000 nid=0x56cc waiting on condition [0xa0686000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xe570b240> (a org.jboss.threads.EnhancedQueueExecutor)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1410)
	at java.lang.Thread.run(Thread.java:748)

""MSC service thread 11-4"" #173 prio=5 os_prio=0 tid=0xa0a59400 nid=0x56cb waiting on condition [0x9fe5c000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xe570b240> (a org.jboss.threads.EnhancedQueueExecutor)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1410)
	at java.lang.Thread.run(Thread.java:748)

""MSC service thread 11-3"" #172 prio=5 os_prio=0 tid=0xa0a56800 nid=0x56ca waiting on condition [0x9fead000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xe570b240> (a org.jboss.threads.EnhancedQueueExecutor)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1410)
	at java.lang.Thread.run(Thread.java:748)

""MSC service thread 11-2"" #171 prio=5 os_prio=0 tid=0xa129ac00 nid=0x56c9 waiting for monitor entry [0xa0bac000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at org.jboss.msc.service.ServiceControllerImpl.dependencyAvailable(ServiceControllerImpl.java:850)
	- waiting to lock <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceControllerImpl$DependencyAvailableTask.inform(ServiceControllerImpl.java:1665)
	at org.jboss.msc.service.ServiceControllerImpl$DependentsControllerTask.execute(ServiceControllerImpl.java:1612)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1556)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
	at java.lang.Thread.run(Thread.java:748)

""MSC service thread 11-1"" #170 prio=5 os_prio=0 tid=0x9fc9d000 nid=0x56c8 waiting on condition [0x9fbfe000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xe570b240> (a org.jboss.threads.EnhancedQueueExecutor)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1410)
	at java.lang.Thread.run(Thread.java:748)

""Reference Reaper"" #14 daemon prio=5 os_prio=0 tid=0xa16e1000 nid=0x5628 in Object.wait() [0xa18fe000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0xa749ccf8> (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)
	- locked <0xa749ccf8> (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)
	at org.jboss.modules.ref.References$ReaperThread.run(References.java:64)

""process reaper"" #11 daemon prio=10 os_prio=0 tid=0x09c3a800 nid=0x5626 waiting on condition [0xa288c000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xa73305f8> (a java.util.concurrent.SynchronousQueue$TransferStack)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)
	at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)

""surefire-forkedjvm-ping-30s"" #10 daemon prio=5 os_prio=0 tid=0xa3164c00 nid=0x5624 waiting on condition [0xa3271000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0xa71c1c00> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)

""surefire-forkedjvm-command-thread"" #9 daemon prio=5 os_prio=0 tid=0xa3154c00 nid=0x5623 runnable [0xa32c2000]
   java.lang.Thread.State: RUNNABLE
	at java.io.FileInputStream.readBytes(Native Method)
	at java.io.FileInputStream.read(FileInputStream.java:255)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	- locked <0xa71f9040> (a java.io.BufferedInputStream)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.maven.surefire.booter.MasterProcessCommand.decode(MasterProcessCommand.java:115)
	at org.apache.maven.surefire.booter.CommandReader$CommandRunnable.run(CommandReader.java:391)
	at java.lang.Thread.run(Thread.java:748)

""Service Thread"" #8 daemon prio=9 os_prio=0 tid=0xa3aab400 nid=0x5621 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

""C1 CompilerThread2"" #7 daemon prio=9 os_prio=0 tid=0xa3aa7c00 nid=0x5620 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

""C2 CompilerThread1"" #6 daemon prio=9 os_prio=0 tid=0xa3aa6800 nid=0x561f waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

""C2 CompilerThread0"" #5 daemon prio=9 os_prio=0 tid=0xa3aa4800 nid=0x561e waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

""Signal Dispatcher"" #4 daemon prio=9 os_prio=0 tid=0xa3aa3000 nid=0x561d runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

""Finalizer"" #3 daemon prio=8 os_prio=0 tid=0xa3a88c00 nid=0x561c in Object.wait() [0xa3b57000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)
	- locked <0xa71f7ee8> (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)
	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)

""Reference Handler"" #2 daemon prio=10 os_prio=0 tid=0xa3a86000 nid=0x561b in Object.wait() [0xa677d000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at java.lang.ref.Reference.tryHandlePending(Reference.java:191)
	- locked <0xa71ec3e8> (a java.lang.ref.Reference$Lock)
	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)

""main"" #1 prio=5 os_prio=0 tid=0xf6507400 nid=0x5615 waiting for monitor entry [0xf666f000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at org.jboss.msc.service.ServiceControllerImpl.getState(ServiceControllerImpl.java:1101)
	- waiting to lock <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceContainerImpl.detectCircularity(ServiceContainerImpl.java:806)
	at org.jboss.msc.service.ServiceContainerImpl.detectCircularity(ServiceContainerImpl.java:784)
	- locked <0xe5718bf0> (a org.jboss.msc.service.ServiceRegistrationImpl)
	at org.jboss.msc.service.ServiceContainerImpl.install(ServiceContainerImpl.java:761)
	at org.jboss.msc.service.ServiceTargetImpl.install(ServiceTargetImpl.java:260)
	at org.jboss.msc.service.ObsoleteServiceBuilderImpl.install(ObsoleteServiceBuilderImpl.java:293)
	at org.wildfly.extension.undertow.AbstractUndertowSubsystemTestCase$RuntimeInitialization.addExtraServices(AbstractUndertowSubsystemTestCase.java:240)
	at org.jboss.as.subsystem.test.AbstractKernelServicesImpl.create(AbstractKernelServicesImpl.java:127)
	at org.jboss.as.subsystem.test.SubsystemTestDelegate$KernelServicesBuilderImpl.build(SubsystemTestDelegate.java:568)
	at org.wildfly.extension.undertow.UndertowSubsystem11TestCase.testRuntime(UndertowSubsystem11TestCase.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

""VM Thread"" os_prio=0 tid=0xa3a81800 nid=0x561a runnable 

""GC task thread#0 (ParallelGC)"" os_prio=0 tid=0xf6510c00 nid=0x5616 runnable 

""GC task thread#1 (ParallelGC)"" os_prio=0 tid=0xf6512000 nid=0x5617 runnable 

""GC task thread#2 (ParallelGC)"" os_prio=0 tid=0xf6513800 nid=0x5618 runnable 

""GC task thread#3 (ParallelGC)"" os_prio=0 tid=0xf6514c00 nid=0x5619 runnable 

""VM Periodic Task Thread"" os_prio=0 tid=0xa3ab7400 nid=0x5622 waiting on condition 

JNI global references: 706


Found one Java-level deadlock:
=============================
""MSC service thread 11-8"":
  waiting to lock monitor 0xa221b37c (object 0xe561fa38, a org.jboss.msc.service.ServiceControllerImpl),
  which is held by ""Controller Boot Thread""
""Controller Boot Thread"":
  waiting to lock monitor 0xa20b3f64 (object 0xe5718bf0, a org.jboss.msc.service.ServiceRegistrationImpl),
  which is held by ""main""
""main"":
  waiting to lock monitor 0xa221b37c (object 0xe561fa38, a org.jboss.msc.service.ServiceControllerImpl),
  which is held by ""Controller Boot Thread""

Java stack information for the threads listed above:
===================================================
""MSC service thread 11-8"":
	at org.jboss.msc.service.ServiceControllerImpl.dependencyAvailable(ServiceControllerImpl.java:850)
	- waiting to lock <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceControllerImpl$DependencyAvailableTask.inform(ServiceControllerImpl.java:1665)
	at org.jboss.msc.service.ServiceControllerImpl$DependentsControllerTask.execute(ServiceControllerImpl.java:1612)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1556)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
	at java.lang.Thread.run(Thread.java:748)
""Controller Boot Thread"":
	at org.jboss.msc.service.ServiceControllerImpl.getImmediateUnavailableDependencies(ServiceControllerImpl.java:1287)
	- waiting to lock <0xe5718bf0> (a org.jboss.msc.service.ServiceRegistrationImpl)
	- locked <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceControllerImpl.getUnavailableDependencies(ServiceControllerImpl.java:1279)
	at org.jboss.as.controller.ServiceVerificationHelper.execute(ServiceVerificationHelper.java:93)
	- locked <0xe575c008> (a org.jboss.as.controller.ServiceVerificationHelper)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:999)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:743)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:467)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1411)
	at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:495)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:470)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:432)
	at org.jboss.as.model.test.ModelTestModelControllerService.boot(ModelTestModelControllerService.java:276)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:419)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:372)
	at java.lang.Thread.run(Thread.java:748)
""main"":
	at org.jboss.msc.service.ServiceControllerImpl.getState(ServiceControllerImpl.java:1101)
	- waiting to lock <0xe561fa38> (a org.jboss.msc.service.ServiceControllerImpl)
	at org.jboss.msc.service.ServiceContainerImpl.detectCircularity(ServiceContainerImpl.java:806)
	at org.jboss.msc.service.ServiceContainerImpl.detectCircularity(ServiceContainerImpl.java:784)
	- locked <0xe5718bf0> (a org.jboss.msc.service.ServiceRegistrationImpl)
	at org.jboss.msc.service.ServiceContainerImpl.install(ServiceContainerImpl.java:761)
	at org.jboss.msc.service.ServiceTargetImpl.install(ServiceTargetImpl.java:260)
	at org.jboss.msc.service.ObsoleteServiceBuilderImpl.install(ObsoleteServiceBuilderImpl.java:293)
	at org.wildfly.extension.undertow.AbstractUndertowSubsystemTestCase$RuntimeInitialization.addExtraServices(AbstractUndertowSubsystemTestCase.java:240)
	at org.jboss.as.subsystem.test.AbstractKernelServicesImpl.create(AbstractKernelServicesImpl.java:127)
	at org.jboss.as.subsystem.test.SubsystemTestDelegate$KernelServicesBuilderImpl.build(SubsystemTestDelegate.java:568)
	at org.wildfly.extension.undertow.UndertowSubsystem11TestCase.testRuntime(UndertowSubsystem11TestCase.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)

Found 1 deadlock.
{code}

What's going on here is the main thread in subsystem test fixture AbstractKernelServicesImpl at L115 installs a Service<ModelController>. Like a normal, non-test-fixture boot that spawns the ControllerBootThread to do parsing and run the boot management ops.  Then main continues on to L127 where it starts adding any additional services the test wants. AbstractUndertowSubsystemTestCase.RuntimeInitialization installs a bunch.

So, we have two threads, ControllerBootThread and main, installing services. And then of course MSC threads can also install services.

What the subsystem test fixtures does where main is adding services at the same time the boot thread is running is unorthodox in terms of how a real server would operate. But, it's been this way for years and I've never seen a deadlock like this before.

[~ropalka] I'm assigning this to you because this seems more like an MSC problem.",2018/08/20 7:20 PM
WFCORE-4039,JvmOptionsBuilderFactory uses wrong JDK to detect if server is going to be running on JDK8 or above.,2018/08/15 9:07 AM
WFCORE-4034,"There is a RuntimeException when call a key-store=keys:revoke-certificate on a existing alias, but having failed to obtain certificate from CA

Steps to reproduce
{code}
/subsystem=elytron/key-store=keyst2:add(credential-reference={clear-text=senha},type=JKS,path=keyst2.jks)
/subsystem=elytron/certificate-authority-account=ca_letsenc2:add(alias=www.cnn.com,key-store=keyst2)
/subsystem=elytron/key-store=keyst2:obtain-certificate(alias=www.cnn.com,certificate-authority-account=ca_letsenc2,domain-names=[""www.cnn.com""],agree-to-terms-of-service,algorithm=RSA)
/subsystem=elytron/key-store=keyst2:revoke-certificate(alias=www.cnn.com,certificate-authority-account=ca_letsenc2)
{code}

obtain-certificate results in an exception, then call revoke-certificate
{code}
/subsystem=elytron/key-store=keyst2:obtain-certificate(alias=www.cnn.com,certificate-authority-account=ca_letsenc2,domain-names=[""www.cnn.com""],agree-to-terms-of-service,algorithm=RSA)
{
    ""outcome"" => ""failed"",                                                                                                                                                                                                                   
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.RuntimeException: org.wildfly.security.x500.cert.acme.AcmeException: ELY10048: Challenge response failed validation by the ACME ser                           
ver"",                                                                                                                                                                                                                                        
    ""rolled-back"" => true                                                                                                                                                                                                                    
}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=keyst2:revoke-certificate(alias=www.cnn.com,certificate-authority-account=ca_letsenc2)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.RuntimeException: org.wildfly.security.x500.cert.acme.AcmeException: No such certificate"",
    ""rolled-back"" => true
}
{code}

I understand it make no sense to revoke a certificate that doesn't exist in CA provider, but it was more an accident to discover it as I was playing with the operations. 

Probably a WARN message would be more appropriate than a RuntimeException.",2018/08/14 2:48 PM
WFCORE-4024,"We currently have the following scattered around various test poms:
{code}
 <dependency>
             <groupId>xalan</groupId>
             <artifactId>xalan</artifactId>
             <version>2.7.1.jbossorg-2</version>
             <scope>test</scope>
{quote}

This should be managed by the root pom",2018/08/13 4:40 AM
WFCORE-4022,"Currently, executing the {{key-store}} {{obtain-certificate}} operation results in:

{code}
{
    ""outcome"" => ""failed"",
    ""result"" => undefined,
    ""failure-description"" => ""Parameter 'type' may not be null"",
    ""response-headers"" => {""process-state"" => ""reload-required""},
    ""rolled-back"" => true
}
{code}

This is due to a recent Let's Encrypt change where a new challenge type was introduced but not officially added to the ACME v2 protocol spec yet. The {{WildFlyAcmeClient}} only needs to be able to handle the ""http-01"" challenge type but should be able to handle being presented with many challenge options.",2018/08/10 5:57 PM
WFCORE-4302,"Based on the [text from analasys|https://github.com/wildfly/wildfly-proposals/blob/master/security/WFCORE-3873_SNI_Support.adoc#hard-requirements]:
{quote}
Wildcard names use * as a wildcard, and can only be used to match a single level of subdomain in much the same way as with wildcard certificates.
{quote}

As such, in case I have configured SNI mapping for:
{code}
.*\\.example\\.com
{code}
I expect that this mapping is selected for any single level of subdomain of example.com although, in case of any extra subdomain, this mapping is not utilized. In other words, following hostnames should match:
{code}
test.example.com
another-test.example.com
{code}
although following should not be matched and default server-ssl-context shall be used instead:
{code}
two-sublevel.one-sublevel.example.com
{code}

Current behaviour also matches also 'two-sublevel.one-sublevel.example.com'.",2018/08/10 8:54 AM
WFCORE-4014,"WFCORE-3970 (including test) was not implemented correctly - the delegating object should ensure the trustmanager will be changed also for sslcontext, which already keeps reference to the trustmanager.",2018/08/10 2:32 AM
WFCORE-4001,NoData,2018/08/07 12:56 PM
WFCORE-4000,NoData,2018/08/07 12:55 PM
WFCORE-3995,"1) Start the EAP in standalone or domain mode and connect to CLI and create a user with Deployer or Maintainer role

~~~
- Create a user named ""maintainer"" using adduser.sh, then follow below steps to add it to the maintainer role

    /core-service=management/access=authorization/role-mapping=Maintainer:add()
    /core-service=management/access=authorization/role-mapping=Maintainer/include=maintainer:add(name=maintainer, type=user)
    /core-service=management/access=authorization:write-attribute(name=provider, value=rbac)
    reload

~~~

2) Apply application constraint to data-sources

~~~
/core-service=management/access=authorization/constraint=application-classification/type=datasources/classification=data-source:write-attribute(name=configured-application,value=true)
/core-service=management/access=authorization/constraint=application-classification/type=datasources/classification=xa-data-source:write-attribute(name=configured-application,value=true) 
~~~

3) Set sensitivity-constraints to false for security credential requires-write

~~~
/core-service=management/access=authorization/constraint=sensitivity-classification/type=core/classification=credential:write-attribute(name=configured-requires-write,value=false)
/core-service=management/access=authorization/constraint=sensitivity-classification/type=core/classification=security-domain-ref:write-attribute(name=configured-requires-write,value=false)

/core-service=management/access=authorization/constraint=sensitivity-classification/type=datasources/classification=data-source-security:write-attribute(name=configured-requires-write,value=false)
/core-service=management/access=authorization/constraint=sensitivity-classification/type=datasources/classification=data-source-security:write-attribute(name=configured-requires-read,value=false)
~~~

4) Try to read / write the datasource's user-name and password: 

{code}
[standalone@localhost:9990 /] /subsystem=datasources/data-source=ExampleDS:write-attribute(name=user-name, sa)
{
    ""outcome"" => ""failed"",
    ""result"" => undefined,
    ""failure-description"" => ""WFLYCTL0313: Unauthorized to execute operation 'write-attribute' for resource '[
    (\""subsystem\"" => \""datasources\""),
    (\""data-source\"" => \""ExampleDS\"")
]' -- \""WFLYCTL0332: Permission denied\"""",
    ""rolled-back"" => true
}

{code}

{code}
        <access-control provider=""rbac"">
            <role-mapping>
                <role name=""SuperUser"">
                    <include>
                        <user name=""$local""/>
                    </include>
                </role>
                <role name=""Maintainer"">
                    <include>
                        <user alias=""maintainer"" name=""maintainer""/>
                    </include>
                </role>
            </role-mapping>
            <constraints>
                <sensitive-classifications>
                    <sensitive-classification type=""core"" name=""credential"" requires-write=""false""/>
                    <sensitive-classification type=""core"" name=""security-domain-ref"" requires-write=""false""/>
                    <sensitive-classification type=""datasources"" name=""data-source-security"" requires-addressable=""false"" requires-read=""false"" requires-write=""false""/>

                </sensitive-classifications>
                <application-classifications>
                    <application-classification type=""datasources"" name=""data-source"" application=""true""/>
                    <application-classification type=""datasources"" name=""xa-data-source"" application=""true""/>
                </application-classifications>
            </constraints>
        </access-control>
{code}",2018/08/07 1:46 AM
WFCORE-3993,"Compilation of Elytron module of wildfly-core on IBM jdk fails.
*reproduce*
{noformat}
mvn install -pl elytron
...
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:testCompile (default-testCompile) on project wildfly-elytron-integration: Compilation failure
[ERROR] /home/pkremens/devel/wildfly-core/elytron/src/test/java/org/wildfly/extension/elytron/KeyStoresTestCase.java:[87,23] package sun.security.ec does not exist
{noformat}
",2018/08/06 7:29 AM
WFCORE-3987,"The {{ReloadWithRolloutPlanTestCase}} test executes a {{reload}} operation, but doesn't wait for the reload to complete. This can cause intermittent errors in subsequent tests which assume the host controller or servers are started.",2018/07/31 2:16 PM
WFCORE-3963,Fix https://issues.jboss.org/browse/WFCORE-3826 fixes anonymous authentication but breaks authenticated mode (for example PLAIN mode with username/password). See https://issues.jboss.org/browse/JBEAP-14647 for more details.,2018/07/12 9:45 AM
WFCORE-3962,"As per request, copying MODULES-372 to WFCORE as well.

*Affected scripts*
\[standalone|domain|add-user|appclient|jboss-cli|jdr|vault|wsconsume|wsprovide\].\[bat|sh|ps1\]

*Logs*
Starting WFLY with JDK 11 using {{standalone.sh}} yields:
{code}
org.jboss.modules.ModuleNotFoundException: java.se
	at org.jboss.modules.Module.addPaths(Module.java:1266)
	at org.jboss.modules.Module.link(Module.java:1622)
	at org.jboss.modules.Module.relinkIfNecessary(Module.java:1650)
	at org.jboss.modules.ModuleLoader.loadModule(ModuleLoader.java:296)
	at org.jboss.modules.Main.main(Main.java:437)
{code}

Output of {{java -version}}:
{code}
openjdk version ""11-ea"" 2018-09-25
OpenJDK Runtime Environment 18.9 (build 11-ea+21)
OpenJDK 64-Bit Server VM 18.9 (build 11-ea+21, mixed mode)
{code}",2018/07/12 8:41 AM
WFCORE-3952,"Attempting to use -DallTests -Delytron results in the following error: -

{noformat}
[ERROR] }
[ERROR] Cannot start embedded Host Controller: WFLYEMB0022: Cannot invoke 'start' on embedded process: WFLYHC0097: Domain base directory does not exist: /home/darranl/src/wildfly13/wildfly-core/testsuite/standalone/target/wildfly-core/domain
{noformat}

I believe this is actually caused by WFCORE-3769 which provisions a standalone server only.

We don't currently run -Delytron jobs for WildFly Core but this bug causes problems with experimental builds where we may want to use -Delytron.",2018/07/03 11:49 AM
WFCORE-3948,"Attachments#ADDITIONAL_MODULES is attached to the top level DU, but modified by sub deployments in ManifestClassPathProcessor#createAdditionalModule without any sort of synchronisation. This can result in ConcurrentModificationException when the list is read/written to by other sub deployments at the same time.",2018/07/01 9:30 PM
WFCORE-3946,The {{ControllerInitializer.addRemoteOutboundSocketBinding()}} requires that a dummy {{ControllerInitializer.addSocketBinding()}} is added. The implementation should also check if the {{outboundSocketBindings}} are not empty so the default socket bindings are added during initialization.,2018/06/26 7:25 PM
WFCORE-3944,"The problem only occurs when backup mode (--backup flag) is on, and it actually is unrelated to patching. (I only noticed it when patching because that's usually when I restart the host.) I will attach an example you can use to verify the bug.
",2018/06/25 10:10 AM
WFCORE-3943,"The embedded server, when it is used by Galleon, launched via client/jboss-cli-client.jar or in the test suite, is using the application classloader. The embedded server when is launched via CLI uses the {{org.jboss.as.cli}} module classloader.

Running the embedded server using inconsistent classloaders could lead to different bugs and strange behaviors, for example, we are using different implementations of XMLStreamWriter when the embedded server is executed via CLI and via Galleon.

Specifically, this issue cannot be reproduced with the test suite, because the woodstock XMLStreamWriter is already in the classpath.

As suggested by [~brian.stansberry], we should use {{org.jboss.as.controller}} classloader to run the embedded server operations.",2018/06/22 10:37 AM
WFCORE-3942,"When browsing  a deployment content you can specify a path, entering "".."" before calling for completion will crash the console.",2018/06/20 6:50 AM
WFCORE-3941,"If JBOSS_HOME is set then :

Running $JBOSS_HOME/bin/elytron-tool.sh results in a warning:
WARNING JBOSS_HOME may be pointing to a different installation - unpredictable results may occur.

This script has two issues :
It sets *SANITIZED_JBOSS_HOME* to *$JBOSS_HOME/..*  instead of *$JBOSS_HOME*
It compares *RESOLVED_JBOSS*  to *SANITIZED_JBOSS_HOME*,  instead of *RESOLVED_JBOSS_HOME*

*Current elytron-tool.sh :*
----------------------------------------------------------------------------------

RESOLVED_JBOSS_HOME=`cd ""$DIRNAME/..""; pwd`
if [ ""x$JBOSS_HOME"" = ""x"" ]; then

    JBOSS_HOME=$RESOLVED_JBOSS_HOME
else
 SANITIZED_JBOSS_HOME=`cd ""$JBOSS_HOME/..""; pwd`
 if [ ""$RESOLVED_JBOSS"" != ""$SANITIZED_JBOSS_HOME"" ]; then
   echo ""WARNING JBOSS_HOME may be pointing to a different installation - unpredictable results may occur.""
   echo """"
 fi
fi
export JBOSS_HOME
---------------------------------------------------------------------------------

*Expected elytron-tool.sh*
---------------------------------------------------------------------------------

RESOLVED_JBOSS_HOME=`cd ""$DIRNAME/..""; pwd`
if [ ""x$JBOSS_HOME"" = ""x"" ]; then

    JBOSS_HOME=$RESOLVED_JBOSS_HOME
else
 SANITIZED_JBOSS_HOME=`cd ""$JBOSS_HOME""; pwd`
 if [ ""$RESOLVED_JBOSS_HOME"" != ""$SANITIZED_JBOSS_HOME"" ]; then
   echo ""WARNING JBOSS_HOME may be pointing to a different installation - unpredictable results may occur.""
   echo """"
 fi
fi
export JBOSS_HOME
------------------------------------------------------------------------------",2018/06/20 12:46 AM
WFCORE-3908,"When adding an property with invalid name to the remoting connector and subsequent reload, the server fails to start. 

See server stack-trace:

{code:java}
2017-09-27 15:23:08,755 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 62) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""remoting""),
    (""connector"" => ""bbb"")
]): java.lang.IllegalArgumentException: XNIO000005: No such field named ""bbb"" in class org.xnio.Options
	at org.xnio.Option.fromString(Option.java:157)
	at org.jboss.as.remoting.ConnectorUtils.addOptions(ConnectorUtils.java:164)
	at org.jboss.as.remoting.ConnectorUtils.getFullOptions(ConnectorUtils.java:82)
	at org.jboss.as.remoting.ConnectorAdd.launchServices(ConnectorAdd.java:82)
	at org.jboss.as.remoting.ConnectorAdd.performRuntime(ConnectorAdd.java:78)
	at org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:337)
	at org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:151)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:976)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:722)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:446)
	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:386)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)
{code}",2018/06/06 5:09 AM
WFCORE-3905,"From Brians's comment at https://github.com/wildfly/wildfly-core/pull/3336#pullrequestreview-125435804:

bq. Reviewing this I see a few issues in SuspendController. 1) The Timer allocated at L98 is pointless unless timeoutMillis > 0. 2) The timeout() method can be private (same with activityPaused()). 3) The logging at L74-L78 is incorrect if timeoutMillis == 0. The ""suspendingServerWithNoTimeout"" message is not correct in that case as 'no timeout' doesn't mean '0 ms'.",2018/06/05 6:30 AM
WFCORE-4224,"-secmgr and SECMGR=true env property doesn't work for domain.ps1 script

Steps to reproduce:
# start powershell
# .\domain.bat ""-secmgr""
# WMIC PROCESS get Commandline | findstr java
# check that ""-secmgr"" property is present in PC or HC
# exit domain.bat
# .\domain.ps1 ""-secmgr""
# WMIC PROCESS get Commandline | findstr java
# check that ""-secmgr"" property is *not* present in PC or HC

Secmgr can't be enabled also by $env:SECMGR = ""true""

This issue is not about java-opts, but it is related with WFCORE-3830",2018/06/05 4:14 AM
WFCORE-3904,"When you write some command into the CLI prompt (without enter), move cursor to beginning of line and hit TAB, the CLI crashes on {{NullPointerException}}.

{code}
[standalone@localhost:9990  /] /system-property=x:read-resource
read-resource  read-resource-description                                       Exception in thread ""CLI Terminal Connection (uninterruptable)"" java.lang.NullPointerException
	at org.jboss.as.cli.impl.aesh.cmd.operation.OperationCommandContainer.isOperation(OperationCommandContainer.java:53)
	at org.jboss.as.cli.impl.aesh.CLICommandRegistry.getCommand(CLICommandRegistry.java:258)
	at org.jboss.as.cli.impl.aesh.CLICommandRegistry.isLegacyCommand(CLICommandRegistry.java:343)
	at org.jboss.as.cli.impl.aesh.CLICompletionHandler.complete(CLICompletionHandler.java:134)
	at org.jboss.as.cli.impl.CLICommandCompleter.doComplete(CLICommandCompleter.java:132)
	at org.jboss.as.cli.impl.CLICommandCompleter.complete(CLICommandCompleter.java:54)
	at org.jboss.as.cli.impl.aesh.CLICompletionHandler.complete(CLICompletionHandler.java:69)
	at org.jboss.as.cli.impl.aesh.CLICompletionHandler.complete(CLICompletionHandler.java:45)
	at org.aesh.readline.completion.CompletionHandler.createCompletionList(CompletionHandler.java:134)
	at org.aesh.readline.completion.CompletionHandler.complete(CompletionHandler.java:102)
	at org.aesh.readline.action.mappings.Complete.accept(Complete.java:62)
	at org.aesh.readline.Readline$AeshInputProcessor.parse(Readline.java:245)
	at org.aesh.readline.Readline$AeshInputProcessor.access$100(Readline.java:174)
	at org.aesh.readline.Readline.readInput(Readline.java:95)
	at org.aesh.readline.Readline.access$1000(Readline.java:57)
	at org.aesh.readline.Readline$AeshInputProcessor.lambda$start$1(Readline.java:333)
	at org.aesh.terminal.EventDecoder.accept(EventDecoder.java:118)
	at org.aesh.terminal.EventDecoder.accept(EventDecoder.java:31)
	at org.aesh.io.Decoder.write(Decoder.java:133)
	at org.aesh.readline.tty.terminal.TerminalConnection.openBlocking(TerminalConnection.java:212)
	at org.aesh.readline.tty.terminal.TerminalConnection.openBlocking(TerminalConnection.java:199)
	at org.jboss.as.cli.impl.ReadlineConsole$CLITerminalConnection.lambda$null$1(ReadlineConsole.java:171)
	at java.lang.Thread.run(Thread.java:748)
{code}",2018/06/05 3:10 AM
WFCORE-3897,"Configuring a host with:

 <server name=""server-one"" group=""main-server-group"" auto-start=""false""/>
        <server name=""server-two"" group=""main-server-group"" auto-start=""false"">
            <socket-bindings port-offset=""150""/>
        </server>

And no server-goup with that name in the domain.xml, the host starts and all management operations fail.",2018/05/29 4:09 AM
WFCORE-3891,"When trying to create an {{xml-formatter}} or {{json-formatter}} with the same name as another resource (e.g. a {{file-handler}}), the operation fails:
{code}
[standalone@localhost:9990  /] /subsystem=logging/file-handler=test:add(file={path=aaa.log})
{""outcome"" => ""success""}
[standalone@localhost:9990  /] /subsystem=logging/xml-formatter=test:add
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: No property \""dateFormat\"" setter found for formatter \""test\"""",
    ""rolled-back"" => true
}
{code}

Similarly vice-versa, when trying to create another resource in logging subsystem with the same name as an {{xml-formatter}} or a {{json-formatter}}, the operation fails:
{code}
[standalone@localhost:9990  /] /subsystem=logging/json-formatter=test:add
{""outcome"" => ""success""}
[standalone@localhost:9990  /] /subsystem=logging/file-handler=test:add(file={path=test.log})
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: No property \""pattern\"" setter found for formatter \""test\"""",
    ""rolled-back"" => true
}
{code}

The same scenario works for e.g. {{pattern-formatter}}:
{code}
[standalone@localhost:9990  /] /subsystem=logging/file-handler=test:add(file={path=test.log})
{""outcome"" => ""success""}
[standalone@localhost:9990  /] /subsystem=logging/pattern-formatter=test:add
{""outcome"" => ""success""}
{code}
",2018/05/25 7:30 AM
WFCORE-3889,"Use Case: securing EJB with kerberos ldap realm

{code}
10:01:21,168 ERROR [org.jboss.as.domain.management.security] (default task-1) WFLYDM0093: Login failed using Keytab for principal 'remote/localhost@JBOSS.ORG' to handle request for host 'localhost': javax.security.auth.login.LoginException: unable to find LoginModule class: com.sun.security.auth.module.Krb5LoginModule from [Module ""org.wildfly.extension.io"" version 5.0.0.Beta4 from local module loader @7a5d012c (finder: local module finder @3fb6a447 (roots: /home/mchoma/Repos/tests-ldap-kerberos/tests/target/dist/jboss-eap/modules,/home/mchoma/Repos/tests-ldap-kerberos/tests/target/dist/jboss-eap/modules/system/layers/base))]
	at javax.security.auth.login.LoginContext.invoke(LoginContext.java:794)
	at javax.security.auth.login.LoginContext.access$000(LoginContext.java:195)
	at javax.security.auth.login.LoginContext$4.run(LoginContext.java:682)
	at javax.security.auth.login.LoginContext$4.run(LoginContext.java:680)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)
	at javax.security.auth.login.LoginContext.login(LoginContext.java:587)
	at org.jboss.as.domain.management.security.KeytabService.createSubjectIdentity(KeytabService.java:209)
	at org.jboss.as.domain.management.security.KeytabIdentityFactoryService.getSubjectIdentity(KeytabIdentityFactoryService.java:152)
	at org.jboss.as.domain.management.security.SecurityRealmService.getSubjectIdentity(SecurityRealmService.java:565)
	at org.jboss.as.domain.management.security.SecurityRealmService.getGSSKerberosCredential(SecurityRealmService.java:616)
	at org.jboss.as.domain.management.security.SecurityRealmService.lambda$null$2(SecurityRealmService.java:275)
	at org.wildfly.security.credential.source.CredentialSource$4.getCredential(CredentialSource.java:325)
	at org.wildfly.security.auth.server.ServerAuthenticationContext$1.handleOne(ServerAuthenticationContext.java:978)
	at org.wildfly.security.auth.server.ServerAuthenticationContext$1.handle(ServerAuthenticationContext.java:839)
	at org.wildfly.security.sasl.util.TrustManagerSaslServerFactory.lambda$createSaslServer$0(TrustManagerSaslServerFactory.java:96)
	at org.wildfly.security.sasl.gssapi.GssapiServer.<init>(GssapiServer.java:89)
	at org.wildfly.security.sasl.gssapi.GssapiServerFactory.createSaslServer(GssapiServerFactory.java:44)
	at org.wildfly.security.sasl.util.SecurityProviderSaslServerFactory.createSaslServer(SecurityProviderSaslServerFactory.java:84)
	at org.wildfly.security.sasl.util.FilterMechanismSaslServerFactory.createSaslServer(FilterMechanismSaslServerFactory.java:88)
	at org.wildfly.security.sasl.util.PropertiesSaslServerFactory.createSaslServer(PropertiesSaslServerFactory.java:56)
	at org.wildfly.security.sasl.util.AbstractDelegatingSaslServerFactory.createSaslServer(AbstractDelegatingSaslServerFactory.java:66)
	at org.wildfly.security.sasl.util.AbstractDelegatingSaslServerFactory.createSaslServer(AbstractDelegatingSaslServerFactory.java:66)
	at org.wildfly.security.sasl.util.SetMechanismInformationSaslServerFactory.createSaslServer(SetMechanismInformationSaslServerFactory.java:80)
	at org.wildfly.security.sasl.util.AuthenticationCompleteCallbackSaslServerFactory.createSaslServer(AuthenticationCompleteCallbackSaslServerFactory.java:51)
	at org.wildfly.security.sasl.util.TrustManagerSaslServerFactory.createSaslServer(TrustManagerSaslServerFactory.java:72)
	at org.wildfly.security.sasl.util.AuthenticationTimeoutSaslServerFactory.createSaslServer(AuthenticationTimeoutSaslServerFactory.java:74)
	at org.wildfly.security.sasl.util.AbstractDelegatingSaslServerFactory.createSaslServer(AbstractDelegatingSaslServerFactory.java:66)
	at org.wildfly.security.sasl.util.ProtocolSaslServerFactory.createSaslServer(ProtocolSaslServerFactory.java:48)
	at org.wildfly.security.sasl.util.AbstractDelegatingSaslServerFactory.createSaslServer(AbstractDelegatingSaslServerFactory.java:66)
	at org.wildfly.security.sasl.util.ServerNameSaslServerFactory.createSaslServer(ServerNameSaslServerFactory.java:48)
	at org.wildfly.security.sasl.util.SecurityIdentitySaslServerFactory.createSaslServer(SecurityIdentitySaslServerFactory.java:53)
	at org.wildfly.security.auth.server.SaslAuthenticationFactory.doCreate(SaslAuthenticationFactory.java:61)
	at org.wildfly.security.auth.server.SaslAuthenticationFactory.doCreate(SaslAuthenticationFactory.java:52)
	at org.wildfly.security.auth.server.AbstractMechanismAuthenticationFactory.createMechanism(AbstractMechanismAuthenticationFactory.java:54)
	at org.jboss.remoting3.ConnectionImpl.lambda$receiveAuthRequest$2(ConnectionImpl.java:196)
	at org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:926)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
	at java.lang.Thread.run(Thread.java:748)
{code}",2018/05/25 4:06 AM
WFCORE-3884,"Use Case: securing EJB with legacy ldap realm

{code}
javax.naming.NamingException: WFLYNAM0027: Failed instantiate InitialContextFactory com.sun.jndi.ldap.LdapCtxFactory from classloader ModuleClassLoader for Module ""org.wildfly.extension.io"" version 5.0.0.Final-redhat-20180517 from local module loader @2ea6137 (finder: local module finder @41ee392b (roots: /home/mchoma/Repos/tests-ldap-kerberos/tests/target/dist/jboss-eap/modules,/home/mchoma/Repos/tests-ldap-kerberos/tests/target/dist/jboss-eap/modules/system/layers/base)) [Root exception is java.lang.ClassNotFoundException: com.sun.jndi.ldap.LdapCtxFactory from [Module ""org.wildfly.extension.io"" version 5.0.0.Final-redhat-20180517 from local module loader @2ea6137 (finder: local module finder @41ee392b (roots: /home/mchoma/Repos/tests-ldap-kerberos/tests/target/dist/jboss-eap/modules,/home/mchoma/Repos/tests-ldap-kerberos/tests/target/dist/jboss-eap/modules/system/layers/base))]]
{code}

from
{code}
Thread [default task-1] (Suspended)	
	owns: AuthenticationTimeoutSaslServerFactory$DelegatingTimeoutSaslServer  (id=500)	
	UserLdapCallbackHandler.lambda$getPrincipalMapper$0(Principal) line: 143	
	2024198162.apply(Object) line: not available	
	712660640(Function<T,R>).lambda$andThen$1(Function, Object) line: 88	
	1508181426.apply(Object) line: not available	
	ServerAuthenticationContext.rewriteAll(Principal, Function<Principal,Principal>, Function<Principal,Principal>, Function<Principal,Principal>) line: 1114	
	ServerAuthenticationContext.assignName(SecurityIdentity, MechanismConfiguration, MechanismRealmConfiguration, Principal, Evidence, IdentityCredentials, IdentityCredentials, boolean) line: 1144	
	ServerAuthenticationContext$InitialState(ServerAuthenticationContext$UnassignedState).setPrincipal(Principal, boolean) line: 1691	
	ServerAuthenticationContext.setAuthenticationPrincipal(Principal, boolean) line: 408	
	ServerAuthenticationContext.setAuthenticationName(String, boolean) line: 382	
	ServerAuthenticationContext.setAuthenticationName(String) line: 366	
	ServerAuthenticationContext$1.handleOne(Callback[], int) line: 898	
	ServerAuthenticationContext$1.handle(Callback[]) line: 839	
	TrustManagerSaslServerFactory.lambda$createSaslServer$0(CallbackHandler, Callback[]) line: 96	
	1848118324.handle(Callback[]) line: not available	
	PlainSaslServer.evaluateResponse(byte[]) line: 117	
	AuthenticationCompleteCallbackSaslServerFactory$1.evaluateResponse(byte[]) line: 58	
	AuthenticationTimeoutSaslServerFactory$DelegatingTimeoutSaslServer.evaluateResponse(byte[]) line: 106	
	SecurityIdentitySaslServerFactory$1.evaluateResponse(byte[]) line: 59	
	SaslUtils.evaluateResponse(SaslServer, ByteBuffer) line: 245	
	SaslUtils.evaluateResponse(SaslServer, ByteBuffer, ByteBuffer) line: 217	
	ServerConnectionOpenListener$AuthStepRunnable.run() line: 486	
	EndpointImpl$TrackingExecutor.lambda$execute$0(Runnable) line: 926	
	1160617561.run() line: not available	
	ContextClassLoaderSavingRunnable.run() line: 35	
	EnhancedQueueExecutor.safeRun(Runnable) line: 1985	
	EnhancedQueueExecutor$ThreadBody.doRunTask(Runnable) line: 1487	
	EnhancedQueueExecutor$ThreadBody.run() line: 1349	
	Thread.run() line: 748	
{code}

Please also log somewhere this exception. It was very hard to find out.",2018/05/24 9:51 AM
WFCORE-3868,"EAP's EE-Concurrency Managed Executor Service is expected to skip the tasks that are pending in its execution queue upon server shutdown as [documented here |https://docs.jboss.org/author/display/WFLY/Suspend%2C+Resume+and+Graceful+shutdown] 
This is necessary to cope with scenario where a polling-type task is re-scheduling a new instance of itself just before exiting (so that there is always one task polling - pattern used e.g. by Spring message listeners",2018/05/22 3:21 AM
WFCORE-3866,"The cli/pom.xml has this in the ""dependencies"" section:

{code}
        <!-- added here as it is dep of embedded and needs to be included in shaded jar-->
        <dependency>
            <groupId>org.jboss.msc</groupId>
            <artifactId>jboss-msc</artifactId>
        </dependency>
{code}

But that's out of date. The analysis for WFCORE-3765 showed that any need for MSC is only on the ""embedded server"" side, loaded by JBoss Modules, and is not on the embedding app side, needed on the classpath. There used to be use of MSC on the embedding app side but that was removed long ago.

Fixing this will reduce the size of the jboss-cli-client.jar.",2018/05/21 3:50 PM
WFCORE-3859,NoData,2018/05/16 9:56 AM
WFCORE-3853,"CLI prompt contains extra space when colors are enabled. In below examples first line is printed with colors and second without it.

{code:title=Examples}
[disconnected  /]
[disconnected /]
[standalone@embedded  /]
[standalone@embedded /]
{code}",2018/05/15 8:25 AM
WFCORE-3831,"jboss-cli.ps1 script doesn't return exit value correctly

Steps to reproduce:
# start Command prompt in Windows
# PowerShell \-ExecutionPolicy Bypass -File jboss-cli.ps1 ""\-\-commands=nonsence"" \-\-timeout=10000
# echo %ERRORLEVEL%
#* ""0"" is printed, ""1"" should be printed
# add ""exit 5"" to the end of jboss-cli.ps1 file
# PowerShell \-ExecutionPolicy Bypass -File jboss-cli.ps1 ""\-\-commands=nonsence"" \-\-timeout=10000
# echo %ERRORLEVEL%
#* ""5"" is printed


cc: [~jperkins-rhn], [~eduda_jira], [~jdenise@redhat.com]",2018/05/11 7:32 AM
WFCORE-3830,"*Domain:*
JAVA_OPTS is not passed to PC and HC JVMs in domain.ps1

Steps to reproduce:
# start powershell
# $env:JAVA_OPTS = ""-Da=b""
# ./domain.bat
# WMIC PROCESS get Commandline | findstr java
# check that ""a"" property is present in PC or HC
# exit domain.bat
# ./domain.ps1
# WMIC PROCESS get Commandline | findstr java
# check that ""a"" property is *not* present in PC or HC

cc: [~jperkins-rhn]

----

*Standalone:*
PRESERVE_JAVA_OPTS parameter is not used correctly in standalone.conf.ps1 and standalone.ps1. If user define JAVA_OPTS, default JAVA_OPTS should be ignored (like bat scripts behaviour)",2018/05/11 5:15 AM
WFCORE-3828,"CLI throws java.lang.ArrayIndexOutOfBoundsException user tries to clear screen (Ctrl+L) with cursor at the starting position.
*reproduce*
{noformat}
wildfly-core] (master)$ ./build/target/wildfly-core-5.0.0.Beta1-SNAPSHOT/bin/jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
# type 'a'
[disconnected  /] a[]
# press ""home"" or left cursor key to move the cursor back to initial position
[disconnected  /] []a
# clear the screen (Ctrl+L)
Exception in thread ""CLI Terminal Connection (uninterruptable)"" java.lang.ArrayIndexOutOfBoundsException: -1
	at org.aesh.readline.Buffer.printInsertedData(Buffer.java:561)
	at org.aesh.readline.Buffer.insert(Buffer.java:217)
	at org.aesh.readline.AeshConsoleBuffer.writeChars(AeshConsoleBuffer.java:143)
	at org.aesh.readline.action.mappings.Clear.accept(Clear.java:39)
	at org.aesh.readline.Readline$AeshInputProcessor.parse(Readline.java:245)
	at org.aesh.readline.Readline$AeshInputProcessor.access$100(Readline.java:174)
	at org.aesh.readline.Readline.readInput(Readline.java:95)
	at org.aesh.readline.Readline.access$1000(Readline.java:57)
	at org.aesh.readline.Readline$AeshInputProcessor.lambda$start$1(Readline.java:333)
	at org.aesh.terminal.EventDecoder.accept(EventDecoder.java:118)
	at org.aesh.terminal.EventDecoder.accept(EventDecoder.java:31)
	at org.aesh.io.Decoder.write(Decoder.java:133)
	at org.aesh.readline.tty.terminal.TerminalConnection.openBlocking(TerminalConnection.java:212)
	at org.aesh.readline.tty.terminal.TerminalConnection.openBlocking(TerminalConnection.java:199)
	at org.jboss.as.cli.impl.ReadlineConsole$CLITerminalConnection.lambda$null$1(ReadlineConsole.java:171)
	at java.lang.Thread.run(Thread.java:748)
{noformat}
CLI session is terminated.",2018/05/11 4:33 AM
WFCORE-3826,"Anonymous authentication for ejbs works on EAP 7.0.x using the following configuration:

        <subsystem xmlns=""urn:jboss:domain:remoting:4.0"">
            <endpoint/>
            <http-connector name=""http-remoting-connector"" connector-ref=""default"" security-realm=""ApplicationRealm"">
                <properties>
                    <property name=""SASL_MECHANISMS"" value=""ANONYMOUS,PLAIN""/>
                    <property name=""SASL_POLICY_NOANONYMOUS"" value=""false""/>
                </properties>
            </http-connector>
        </subsystem>

Unfortunately, this same configuration does not work on 7.1.1.  It looks
like the server still wants to use DIGEST-MD5 based authentication.

Has the legacy based configuration (non-elytron) for anonymous ejb
access changed on eap 7.1.1?

I am attaching the standalone.xml, server.log and client log.

Customer does not want to use elytron at the moment.",2018/05/11 3:36 AM
WFCORE-3822,"When using the CLI client JAR and specifying different {{--jboss-home}} directories when starting different embedded servers the {{jboss.server.log.dir}} is not updated to the new home directory.

The CLI {{EnvironmentRestorer}} likely needs to handle this property as it's specifically set in the command handler.",2018/05/10 4:26 PM
WFCORE-3810,The galleon pack zip should be called wildfly-core-galleon-pack-${project.version}.zip. Now it is wildfly-core-feature-pack-${project.version}.zip,2018/05/08 10:51 AM
WFCORE-3804,"You can execute this op:

/host=master/server=server-one:reload

But if you try and tab complete the op name, the reload op does not appear.
 
Same thing with suspend.

Further, with suspend if you do:

/host=master/server=server-one:suspend(timeout=10)

the CLI will reject the op complaining that param 'timeout' is invalid. Disable validation in jboss-cli.xml though and it will work.

The reason for all this is that the read-operation-names and read-operation-description ops the CLI invokes in the background before executing an op are aimed at /host=master/server=server-one, and on the domain server root resource the 'reload' and 'suspend' operation definitions are marked with setPrivateEntry.

When the user actually executes the ops, the handler is actually on the HC, so it works fine. It's just that the CLI can't see the description of the op.",2018/05/04 6:28 PM
WFCORE-3797,"WildFly: Logging Subsystem unit tests fails on IBM jdk with:
{noformat}
java.lang.IllegalStateException: WFLYLOG0078: The logging subsystem requires the log manager to be org.jboss.logmanager.LogManager. The subsystem has not be initialized and cannot be used. To use JBoss Log Manager you must add the system property ""java.util.logging.manager"" and set it to ""org.jboss.logmanager.LogManager""
	at org.jboss.as.logging.LoggingExtension.initialize(LoggingExtension.java:168)
	at org.jboss.as.subsystem.test.TestModelControllerService.preBoot(TestModelControllerService.java:158)
	at org.jboss.as.model.test.ModelTestModelControllerService.boot(ModelTestModelControllerService.java:264)
	at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:419)
	at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:372)
	at java.lang.Thread.run(Thread.java:811)
{noformat}
The test works fine with *4.0.0.Final*, starts failing in *5.0.0.Alpha1*.

This doens't look like a functional issue to me as I was able to workaround the issue by either running the test with the older surefire instance ( -Dversion.surefire.plugin=2.19 is the last working ) or by extending {{surefire.system.args}} in pom.xml with {{-Djava.util.logging.manager=org.jboss.logmanager.LogManager}}. The other however produces the following warnings upon test execution
{noformat}
...
[WARNING] The system property java.util.logging.manager is configured twice! The property appears in <argLine/> and any of <systemPropertyVariables/>, <systemProperties/> or user property.
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running org.jboss.as.logging.HandlerLegacyOperationsTestCase
[WARNING] Corrupted STDOUT by directly writing to native stream in forked JVM 1. See FAQ web page and the dump file /home/pkremens/devel/wildfly-core/logging/target/surefire-reports/2018-05-03T13-49-32_779-jvmRun1.dumpstream
...
{noformat}",2018/05/03 7:53 AM
WFCORE-3795,ObjectAttributeDefinition are described as features but their required capabilities are not displayed.,2018/05/03 5:32 AM
WFCORE-3793,"When creating a configuration from scratch using an embedded server like this :

{code:java}
embed-server --admin-only --empty-config --server-config=sasl-upgrade.xml --remove-existing
{code}

Then configure the minimal extensions :

{code:java}
 batch
/interface=management:add(inet-address=${jboss.bind.address.management:127.0.0.1})
/interface=public:add(inet-address=${jboss.bind.address:127.0.0.1})
run-batch
/socket-binding-group=standard-sockets:add(default-interface=public,port-offset=${jboss.socket.binding.port-offset:0})
batch
/socket-binding-group=standard-sockets/socket-binding=management-http:add(interface=management,port=${jboss.management.http.port:9990})
/socket-binding-group=standard-sockets/socket-binding=management-https:add(interface=management,port=${jboss.management.https.port:9993})
run-batch
batch
/extension=org.jboss.as.logging:add
/extension=org.wildfly.extension.core-management:add
/extension=org.wildfly.extension.elytron:add
/extension=org.jboss.as.jmx:add
/extension=org.wildfly.extension.request-controller:add
/extension=org.wildfly.extension.discovery:add
/extension=org.wildfly.extension.security.manager:add
run-batch
{code}

Then execute the 2 following scripts :
batch --file=/home/ehsavoie/galleon-scripts/configure_elytron.cli
batch --file=/home/ehsavoie/galleon-scripts/configure_realms.cli

Then it will fail with the following error : 
Failure: {""WFLYCTL0412: Required services that are not installed:"" => [""elytron.security-properties"",""elytron.provider-registration""],""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""org.wildfly.core.management.security.realm.ApplicationRealm.ssl-context is missing [elytron.security-properties, elytron.provider-registration]""]}

Since those services are added at boottime only by the ElytronAdd handler we shouldn't fail if we are already in a reload-required or admin-only mode.

",2018/05/02 6:20 PM
WFCORE-3789,"Unable to pass any attribute to jboss-cli.ps1 script

{noformat}
C:\wildfly\wildfly-12.0.0.Final\bin> PowerShell -ExecutionPolicy Bypass -File jboss-cli.ps1 --help
'--help-Dcom.ibm.jsse2.overrideDefaultTLS=true' is not a valid operation name.

C:\wildfly\wildfly-12.0.0.Final\bin> PowerShell -ExecutionPolicy Bypass -File jboss-cli.ps1 --version
'--version-Dcom.ibm.jsse2.overrideDefaultTLS=true' is not a valid operation name
.

C:\wildfly\wildfly-12.0.0.Final\bin> PowerShell -ExecutionPolicy Bypass -File jboss-cli.ps1 -c
'-c-Dcom.ibm.jsse2.overrideDefaultTLS=true' is not a valid operation name.

C:\wildfly\wildfly-12.0.0.Final\bin> PowerShell -ExecutionPolicy Bypass -File jboss-cli.ps1
You are disconnected at the moment. Type 'connect' to connect to the server or '
help' for the list of supported commands.
[disconnected /]
{noformat}

I am using PowerShell 4.0

{noformat}
PS C:\> $PSVersionTable.PSVersion

Major  Minor  Build  Revision
-----  -----  -----  --------
4      0      -1     -1


PS C:\>
{noformat}

This behaviour is caused by this change:

https://github.com/wildfly/wildfly-core/blame/master/core-feature-pack/src/main/resources/content/bin/jboss-cli.ps1#L13",2018/05/02 7:57 AM
WFCORE-3768,"Sigh.

https://ci.wildfly.org/project.html?projectId=WildFlyCore&buildTypeId=&tab=testDetails&testNameId=-9006729237004188283&order=TEST_STATUS_DESC&branch_WildFlyCore=__all_branches__&itemsCount=50",2018/04/26 2:36 PM
WFCORE-3760,"If the user goes to admin-only mode without restarting the servers and tries to come back to normal mode restarting them, the following warning is logged:
{noformat}
WARN  [org.jboss.as.process] (ProcessController-threads - 3) WFLYPC0005: Attempted to register duplicate named process 'Server:server-master'
{noformat}

The domain gets in an unstable state since the reload operation does not end correctly, DC has to be manually restarted.",2018/04/20 5:09 AM
WFCORE-3757,"The org.jboss.as.test.integration.mgmt.access.PropertiesRoleMappingTestCase is run 3 times in the rbac test suite accross 3 different surefire execution:
* one as PropertiesRoleMappingTestCase
* one in LdapRoleMappingG2UTestCase Suite
* one in LdapRoleMappingU2GTestCase Suite

We had an issue with WFCORE-3705 that was making the test fails for the 2 ldap suites.
The maven execution was failing but our CI was reporting that the test suite was failing as TeamCity does not distinguish the test execution across different suites.

The regression was identified only during the release of WildFly Core 5.0.0.Alpha3.
The rbac test suite should reliably report any failures and we need to make sure that our CI handle them properly.
",2018/04/19 4:02 AM
WFCORE-3751,"CapabilityReferenceRecorder.DefaultCapabilityReferenceRecorder should be generalized to handle capabilities that use a dynamic name mapper.

While most users can workaround the problem by using ContextDependencyRecorder instead - this is limited to resources that define a single capability.",2018/04/17 9:12 AM
WFCORE-3733,"This will allow the ee8.preview.mode property to work correctly, otherwise EE8 API's get loaded too early.",2018/04/09 7:51 PM
WFCORE-3730,"Server does not start on domain mode when setting relative-to in the path
{code:java}  
  <paths>
        <path name=""apps.log.dir"" path=""/apps/logs"" relative-to=""jboss.domain.base.dir""/>
    </paths>
{code}

{code:java}
[Host Controller] 13:28:05,730 ERROR [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0362: Capabilities required by resource '/path=apps.log.dir' are not available: 

[Host Controller] org.wildfly.management.path.jboss.domain.base.dir in context 'global'; Possible registration points for this capability: 

[Host Controller] /host=master/path=* 

[Host Controller] /host=master/server-config=*/path=* 

[Host Controller] /path=* 

{code}
",2018/04/05 9:25 PM
WFCORE-3722,"{noformat}
$ grep ""<version.org.wildfly.build-tools>"" `find . -name pom.xml`
./pom.xml:        <version.org.wildfly.build-tools>1.2.10.Final</version.org.wildfly.build-tools>
./pom.xml:        <version.org.wildfly.build-tools>1.2.10.Final</version.org.wildfly.build-tools>
{noformat}
{noformat}
$ grep ""<version.org.wildfly.checkstyle-config>"" `find . -name pom.xml`
./pom.xml:        <version.org.wildfly.checkstyle-config>1.0.5.Final</version.org.wildfly.checkstyle-config>
./pom.xml:        <version.org.wildfly.checkstyle-config>1.0.5.Final</version.org.wildfly.checkstyle-config>
{noformat}
{noformat}
$ grep ""<version.org.wildfly.plugin>"" `find . -name pom.xml`
./pom.xml:        <version.org.wildfly.plugin>1.2.0.Final</version.org.wildfly.plugin>
./pom.xml:        <version.org.wildfly.plugin>1.2.0.Final</version.org.wildfly.plugin>
{noformat}",2018/03/29 6:37 PM
WFCORE-3718,"{quote}
[2:26 PM] Kabir Khan: @ctomc following https://developer.jboss.org/wiki/WildFlyCoreReleaseProcess, and using 
mvn versions:set -DnewVersion=5.0.0.Alpha2
[2:26 PM] Kabir Khan: it seems to keep component-matrix/pom.xml as -SNAPSHOT
[2:26 PM] Kabir Khan: $git grep ""\-SNAPSHOT""  
component-matrix/pom.xml:    <version>5.0.0.Alpha2-SNAPSHOT</version>
[2:27 PM] Tomaz Cerar: damn, that is not good
[2:27 PM] Tomaz Cerar: versions plugin is bit stupid in some cases
[2:27 PM] Kabir Khan: Should it be in the list of modules?
[2:27 PM] Tomaz Cerar: it is
{quote}
All other versions are correctly replaced. I'd hazard a guess that this also happens in WF full.

CC [~bstansbe@redhat.com] - for the 5.0.0.Alpha2 release I'm using the old find/sed way",2018/03/29 9:32 AM
WFCORE-3715,"When using ps1 (power-shell) scripts in a windows environment the JBOSS_HOME environment variable is always unset at the end. For example using the {{jboss-cli.ps1}} script.

That variable can be set by the user and this not be affected by the execution of the scripts.",2018/03/29 12:36 AM
WFCORE-3711,"Quitting of multi-page output mode by Ctrl-C does not work as expected. In the analysis \[1\] of the feature it is written that Ctrl-C is supported way how to quit the multi-page output mode. However it kills the whole CLI.

\[1\] https://developer.jboss.org/wiki/CLI-PagingLongCLIOutput",2018/03/26 9:19 AM
WFCORE-3707,The logging subsystem add handler does not extend the {{AbstractBoottimeAddStepHandler}} and therefore must add the restart level flag. Either the {{LoggingSubsystemAdd}} operation handler needs to extend the {{AbstractBoottimeAddStepHandler}} or the {{LoggingResourceDefinition}} needs to include the restart level flag.,2018/03/22 2:46 PM
WFCORE-3698,"Some system properties are set when a standalone server or host controller are created with the embedded server API. When the embedded server is stopped these properties should be reset to their previous value if applicable.

Some system properties, such as {{module.path}}, cannot and should not be reset. With the {{ModuleLoader}} the {{module.path}} system property is effectively static and can only be set once.

There is no requirement to reset all system properties and overridden properties should be honored where applicable.",2018/03/19 5:56 PM
WFCORE-3674,"For JBoss EAP 7.1.0.GA in Windows (e.g. Microsoft Windows Server 2016):

Cannot connect to JBoss controller via CLI by passing password in command line if password contains '!' character. Wrapping password by double quotes does not help.

For example:
{code}
jboss-cli.bat -c controller=localhost --user=myuser --password=mypass1!
Failed to connect to the controller: Unable to authenticate against controller at localhost:9990: Authentication failed: all available authentication mechanisms failed:
   DIGEST-MD5: javax.security.sasl.SaslException: DIGEST-MD5: Server rejected authentication
Press any key to continue . . .
{code}

In the same time it is possible to connect with such password when cli prompts for it or via management console.

",2018/03/07 2:19 PM
WFCORE-3671,"Start up EAP 6.4 or 7.0 in domain mode and connect with jboss-cli.sh

I can do these commands:
[domain@localhost:9990 /] cd host
[domain@localhost:9990 host] cd master
[domain@localhost:9990 host=master] 

On EAP 7.1 it gives me an error:
Failed to validate address: the response from the controller doesn't contain result.

I can only do ""cd host=master"" successfully.

Is this a bug/regression or an intentional change in EAP 7.1?",2018/03/07 4:06 AM
WFCORE-3670,"This is a follow up to JBEAP-13094.
Having a deployment with jboss-deployment-structure like this:

{code}
<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?>
<jboss-deployment-structure xmlns=""urn:jboss:deployment-structure:1.2"">

  <module name=""deployment.application-exception-api"">
    <resources>
     <resource-root path=""application-exception-api.jar""/>
    </resources>
    <dependencies>
			<module name=""javax.ejb.api"" export=""true""/>
			<module name=""javaee.api"" export=""true""/>
			<module name=""javax.api"" export=""true""/>
    </dependencies>
    <module-alias name=""deployment.api"" />
  </module>  

	<sub-deployment name=""application-exception-ejb.jar"">
		<dependencies>
			<module name=""deployment.api"" annotations=""true"" meta-inf=""export""/>
		</dependencies>
	</sub-deployment>

</jboss-deployment-structure>
{code}

it fails to parse.",2018/03/06 10:26 PM
WFCORE-3656,"The current Apache Commons Logging implementation delegates to the JBoss Log Manager. This can be a problem for embedded servers where the JBoss Log Manager may not be used. We should have an implementation that writes to JBoss Logging. This will allow any log manager that JBoss Logging supports to be used.

This is currently blocking provisioning from working with the embedded server API.",2018/02/26 4:02 PM
WFCORE-3649,"{noformat}
[rhusar@syrah x]$ ./bin/jboss-cli.sh -c
[standalone@localhost:9990 /] deploy ~/git/clusterbench/clusterbench-ee7-ear/target/clusterbench-ee7.ear
[standalone@localhost:9990 /] deploy ~/git/clusterbench/clusterbench-ee7-ear/target/clusterbench-ee7.ear
org.jboss.as.cli.CommandFormatException: 'clusterbench-ee7.ear' already exists in the deployment repository (use --replace to replace the existing content in the repository).
[standalone@localhost:9990 /] deploy --replace ~/git/clusterbench/clusterbench-ee7-ear/target/clusterbench-ee7.ear
Unrecognized arguments: [--replace]
[standalone@localhost:9990 /] deploy --force ~/git/clusterbench/clusterbench-ee7-ear/target/clusterbench-ee7.ear
[standalone@localhost:9990 /]
{noformat}

same in domain

{noformat}
[domain@localhost:9990 /] deploy --all-server-groups ~/git/clusterbench/clusterbench-ee7-ear/target/clusterbench-ee7.ear
org.jboss.as.cli.CommandFormatException: 'clusterbench-ee7.ear' already exists in the deployment repository (use --replace to replace the existing content in the repository).
[domain@localhost:9990 /] deploy --all-server-groups --replace ~/git/clusterbench/clusterbench-ee7-ear/target/clusterbench-ee7.ear
Unrecognized arguments: [--replace]
{noformat}",2018/02/26 7:00 AM
WFCORE-3648,"e.g. 
in standalone mode, missing all 3
{noformat}
[standalone@localhost:9990 /] deployment deploy-file --
--headers=  --name=  --runtime-name=  --unmanaged
{noformat}

in domain mode missing --replace

{noformat}
[domain@localhost:9990 /] deployment deploy-file --
--all-server-groups  --headers=  --name=  --runtime-name=  --server-groups=  --unmanaged
[domain@localhost:9990 /] deployment deploy-file --
{noformat}",2018/02/26 6:36 AM
WFCORE-3647,"The Auto more/less in CLI for multi-page output (WFCORE-426) does not work correctly on Cygwin. Each key has to be pushed twice to interact.

It was hit on following Cygwin version.
{code}
$ uname -a
CYGWIN_NT-6.3 WIN-VSOI9S1FO1Q 2.10.0(0.325/5/3) 2018-02-02 15:16 x86_64 Cygwin
{code}",2018/02/26 6:20 AM
WFCORE-3642,The test should stop the domain cleanly,2018/02/23 6:56 AM
WFCORE-3640,"A script contains:
connect
ls -l

CLI launched: boss-cli.sh --file=script

If the connect command implies some userName and password, then from this point the output is collected internally but not printed.

That is a regression. The work around it to establish the connection outside the script.
",2018/02/22 11:18 AM
WFCORE-3638,"There is some unused code.

http://station5.brq.redhat.com:8080/reports.htm#v10035/p10031/fileInstanceId=9425670&defectInstanceId=2071628&mergedDefectId=26084
http://station5.brq.redhat.com:8080/reports.htm#v10035/p10031/fileInstanceId=9425697&defectInstanceId=2071908&mergedDefectId=26092
http://station5.brq.redhat.com:8080/reports.htm#v10035/p10031/fileInstanceId=9425679&defectInstanceId=2071870&mergedDefectId=26091

readonly/readonly",2018/02/22 9:35 AM
WFCORE-3616,"The suspend-state attribute def says the attribute is required, but if the SuspendController service is not up it returns undefined.

This can primarily happen if the value is read while the server is shutting down, e.g. https://ci.wildfly.org/viewLog.html?buildId=90460&buildTypeId=WildFlyCore_PullRequest

Since we have graceful startup implemented, I think SUSPENDED is a correct value if the suspend controller is not present. If we're booting and the suspend controller isn't installed yet, it's suspended. And once we get to the point in shutdown where the SC is gone, it's last state was SUSPENDED.",2018/02/16 6:45 PM
WFCORE-3605,"[Host Controller] &amp#27;[31m] failed handling operation rollback -- java.lang.NullPointerException: java.lang.NullPointerException&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.server.services.security.VaultAddHandler.rollbackRuntime(VaultAddHandler.java:97)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractAddStepHandler$1$1.handleRollback(AbstractAddStepHandler.java:156)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext$RollbackDelegatingResultHandler.handleResult(AbstractOperationContext.java:1528)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1500)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1482)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1439)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1422)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext$Step.access$400(AbstractOperationContext.java:1286)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:859)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:739)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:450)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1408)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:516)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:468)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.host.controller.DomainModelControllerService.boot(DomainModelControllerService.java:666)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:370)&amp#27;[0m
[Host Controller] &amp#27;[31m<>at java.lang.Thread.run(Thread.java:748)&amp#27;[0m
",2018/02/14 5:18 AM
WFCORE-3604,"When attribute {{required-attributes}} of Elytron x500-attribute-principal-decoder is added in CLI command then it fails with UnsupportedOperationException:

{code}
/subsystem=elytron/x500-attribute-principal-decoder=x500-decoder:add(attribute-name=cn,required-attributes=[cn])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.UnsupportedOperationException"",
    ""rolled-back"" => true
}
{code}

Complete stack trace: -

{noformat}
13:03:44,179 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""x500-attribute-principal-decoder"" => ""x500-decoder"")
]): java.lang.UnsupportedOperationException
	at java.util.AbstractList.add(AbstractList.java:148)
	at java.util.AbstractList.add(AbstractList.java:108)
	at java.util.AbstractCollection.addAll(AbstractCollection.java:344)
	at org.wildfly.extension.elytron.PrincipalDecoderDefinitions$2.getValueSupplier(PrincipalDecoderDefinitions.java:196)
	at org.wildfly.extension.elytron.PrincipalDecoderDefinitions$PrincipalDecoderAddHandler.performRuntime(PrincipalDecoderDefinitions.java:293)
	at org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:325)
	at org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:151)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:982)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:726)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:450)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1408)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:418)
	at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:243)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:263)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:229)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:243)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:217)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:137)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:161)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:287)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:244)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:157)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1979)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1481)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1374)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:485)
{noformat}",2018/02/14 2:20 AM
WFCORE-3600,"JSON-P 1.1 is not loaded when ee8.preview.mode property is defined in standalone.xml file.

Early investigation done by James and Stuart indicates that Elytron uses JSON-P stuff too early and it prevents JSON-P 1.1 activation when ee8.preview.mode property is defined in standalone.xml file.

CCing [~jperkins-rhn] [~sdouglas1@redhat.com] [~jgreene@redhat.com] [~kkhan1@redhat.com] [~bstansbe@redhat.com]
",2018/02/13 6:05 AM
WFCORE-3575,An attempt to connect that fails makes the current context unusable.,2018/02/05 3:17 PM
WFCORE-3572,"Reproducer:

{code}
0. build wildfly from master
1. ./standalone.sh
2. ./jboss-cli.sh
   connect
   reload
   reload
   reload
   ...
{code}

In log there occurs NPE:

{code}
09:52:28,772 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 4.0.0.Alpha7 ""Kenny"" started in 196ms - Started 292 of 532 services (327 services are lazy, passive or on-demand)
09:52:32,175 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0008: Undertow HTTPS listener https suspending
09:52:32,176 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-8) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]
09:52:32,176 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0008: Undertow HTTP listener default suspending
09:52:32,176 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0019: Host default-host stopping
09:52:32,176 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080
09:52:32,177 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0007: Undertow HTTPS listener https stopped, was bound to 127.0.0.1:8443
09:52:32,179 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0004: Undertow 1.4.22.Final stopping
09:52:32,180 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-8) WFLYJCA0019: Stopped Driver service with driver-name = h2
09:52:32,184 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-1) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]
09:52:32,182 ERROR [org.jboss.threads.errors] (management task-1) Thread Thread[management task-1,5,main] threw an uncaught exception: java.lang.NullPointerException
	at org.jboss.as.server.mgmt.ManagementWorkerService.stopDone(ManagementWorkerService.java:72)
	at org.xnio.XnioWorker$1.run(XnioWorker.java:138)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1979)
	at org.jboss.threads.EnhancedQueueExecutor.completeTermination(EnhancedQueueExecutor.java:1755)
	at org.jboss.threads.EnhancedQueueExecutor.tryDeallocateThread(EnhancedQueueExecutor.java:1578)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1393)
	at java.lang.Thread.run(Thread.java:745)

09:52:32,187 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0050: WildFly Core 4.0.0.Alpha7 ""Kenny"" stopped in 20ms
09:52:32,189 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Core 4.0.0.Alpha7 ""Kenny"" starting
{code}

Also sometimes (in TS) I can see AssertionError be thrown from same area of code.
{code}
13:59:39,966 ERROR [org.jboss.threads.errors] (management task-3) Thread Thread[management task-3,5,main] threw an uncaught exception: java.lang.AssertionError
	at org.jboss.as.server.mgmt.ManagementWorkerService.stopDone(ManagementWorkerService.java:71)
	at org.xnio.XnioWorker$1.run(XnioWorker.java:138)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1979)
	at org.jboss.threads.EnhancedQueueExecutor.completeTermination(EnhancedQueueExecutor.java:1755)
	at org.jboss.threads.EnhancedQueueExecutor.tryDeallocateThread(EnhancedQueueExecutor.java:1578)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1393)
	at java.lang.Thread.run(Thread.java:748)
{code}",2018/02/02 3:58 AM
WFCORE-3567,"The activators attached to these options are expecting an argument value, but there is no such argument.",2018/01/30 9:15 AM
WFCORE-3566,"*Different command result of disabling already disabled deployment in standalone and domain mode*
* In standalone return 
{noformat}
WFLYCTL0155: 'steps' may not be null
{noformat}
* In domain return nothing, no warning or error

{noformat}
[standalone@localhost:9990 /] deployment info
NAME                        RUNTIME-NAME                PERSISTENT ENABLED STATUS  
cli-test-another-deploy.war cli-test-another-deploy.war true       true    OK      
cli-test-app1-deploy.war    cli-test-app1-deploy.war    true       false   STOPPED 
cli-test-app2-deploy.war    cli-test-app2-deploy.war    true       true    OK      
[standalone@localhost:9990 /] deployment disable cli-test-app1-deploy-all.war
WFLYCTL0155: 'steps' may not be null
[standalone@localhost:9990 /]
{noformat}

{noformat}
[domain@localhost:9990 /] deployment info --server-groups=main-server-group
NAME                            RUNTIME-NAME                    STATE     
cli-test-another-deploy-all.war cli-test-another-deploy-all.war enabled   
cli-test-app1-deploy-all.war    cli-test-app1-deploy-all.war    added     
cli-test-app2-deploy-all.war    cli-test-app2-deploy-all.war    not added 
cli-test-app3-deploy-all.war    cli-test-app3-deploy-all.war    enabled   
[domain@localhost:9990 /] deployment disable --server-groups=main-server-group cli-test-app1-deploy-all.war
[domain@localhost:9990 /]
{noformat}",2018/01/30 7:41 AM
WFCORE-3565,"We encountered an issue with EJB timers stopping randomly if the container is under load. Sometimes the timers get stalled right after deployment without firing at all. Sometimes the timers work fine for a couple of days before they suddenly stop working. The timers are defined using the {{@Scheduled}} annotation.

We found out that the reason for the randomly stopping timers is a bug in the {{RequestController}} class which only appears if a maximum number of requests is configured in the request controller subsystem. If a timer is being triggered while the container has reached the request limit then the timer is put into a task queue to be processed later. However, the task queue is never checked for queued tasks if the request number goes down again. This leaves the timers stuck in the queue. Since every timer needs to reregister after it has been triggered, the timers appear to have stopped.

In old versions of the {{RequestController}} class from before release wildfly-core-1.0.0.Alpha14 it looks like the idea was to check for queued requests whenever a request finished (see [here|https://github.com/wildfly/wildfly-core/blob/a426a14db6466549159a5528dcee9f4b7087d334/request-controller/src/main/java/org/wildfly/extension/requestcontroller/RequestController.java#L369]).",2018/01/30 7:27 AM
WFCORE-3564,"*Cli complementation insert the whole word without delete writed letters*
* --server-groups={color:#d04437}m{color}main-server-group
* --server-groups={color:#d04437}o{color}other-server-group
* --server-groups={color:#d04437}othe{color}other-server-group

{noformat}
[domain@localhost:9990 /] deployment disable * --server-groups=
main-server-group  other-server-group  
[domain@localhost:9990 /] deployment disable * --server-groups=mmain-server-group 
{""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0216: Management resource '[(\""server-group\"" => \""mmain-server-group\"")]' not found""}}
[domain@localhost:9990 /] deployment disable * --server-groups=oother-server-group
{""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0216: Management resource '[(\""server-group\"" => \""oother-server-group\"")]' not found""}}
[domain@localhost:9990 /]
[domain@localhost:9990 /] deployment disable * --server-groups=otheother-server-group 
{""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0216: Management resource '[(\""server-group\"" => \""otheother-server-group\"")]' not found""}}
[domain@localhost:9990 /]
{noformat}",2018/01/30 5:20 AM
WFCORE-3561,"The logic to test completion candidates is failing on Windows, should be reviewed.
",2018/01/26 5:21 PM
WFCORE-3559,"On my mac laptop the test is failing with:
testFileDefaultPermissions(org.jboss.as.test.integration.management.cli.FilePermissionTestCase)  Time elapsed: 1.273 sec  <<< FAILURE!
java.lang.AssertionError: The test file has unexpected permissions: rw-r--r--
Expected: is ""rw-rw-r--""
     but: was ""rw-r--r--""
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.jboss.as.test.integration.management.cli.FilePermissionTestCase.testFileDefaultPermissions(FilePermissionTestCase.java:102)

My mask could make the files to be created with these permissions, do we really want to check that?
",2018/01/26 10:40 AM
WFCORE-3555,"*Description of problem:*
When putting 'echo' into the right side of the pipe. Addional 'o' is displayed as result.

*Actual results:*
[standalone@embedded /] version | echo test
o test

*Expected results:*
[standalone@embedded /] version | echo test
test
",2018/01/26 8:03 AM
WFCORE-3547,"ExceptionInInitializerError during create of CLI object on client app.

*Steps to reproduce:*
# create simple CLI client app, for example: {code:java}public class App {
    public static void main(String[] args) throws Exception {
        CLI cli = CLI.newInstance();
    }
} {code}
# start this application

*Actual results:*
{noformat}
Exception in thread ""main"" java.lang.ExceptionInInitializerError
    at org.jboss.as.cli.impl.aesh.AeshCommands.<init>(AeshCommands.java:197)
    at org.jboss.as.cli.impl.aesh.AeshCommands.<init>(AeshCommands.java:174)
    at org.jboss.as.cli.impl.CommandContextImpl.<init>(CommandContextImpl.java:352)
    at org.jboss.as.cli.impl.CommandContextFactoryImpl.newCommandContext(CommandContextFactoryImpl.java:44)
    at org.jboss.as.cli.scriptsupport.CLI.initOfflineContext(CLI.java:278)
    at org.jboss.as.cli.scriptsupport.CLI.<init>(CLI.java:53)
    at org.jboss.as.cli.scriptsupport.CLI.newInstance(CLI.java:62)
    at com.client.test.App.main(App.java:9)
Caused by: java.lang.IllegalStateException: The LogManager was not properly installed (you must set the ""java.util.logging.manager"" system property to ""org.jboss.logmanager.LogManager"")
    at org.jboss.logmanager.Logger.getLogger(Logger.java:57)
    at org.jboss.as.cli.impl.aesh.CLICompletionHandler.<clinit>(CLICompletionHandler.java:45)
    ... 8 more 
{noformat}

*Expected results:*
No errors

*Additional info:*
See attached application  [^single-client.zip] :
{noformat}
# old client
mvn clean
mvn package  -Dversion.client=3.0.10.Final
java -jar target/ClientApplication.jar # works correctly with old client

# new client
mvn clean
mvn package  -Dversion.client=4.0.0.Alpha7-SNAPSHOT
java -jar target/ClientApplication.jar # throws ExceptionInInitializerError
java -Djava.util.logging.manager=org.jboss.logmanager.LogManager -jar target/ClientApplication.jar  # no exception 
{noformat}


",2018/01/25 9:11 AM
WFCORE-3545,"Some keys like key down are composed from multiple characters. Normally when the key down is pushed, 3 characters are written into stdin. These 3 characters are read by InputStream::read operation at once and then decoded to the Key.DOWN constant.

However there is no guarantee that InputStream::read operation returns all the 3 characters at once. It can return only first character and then remaining two. This actually happens in one test on Solaris and HPUX, where stdin is emulated by PipedInputStream.

If the aforementioned situation happens, pushing of key down is decoded as pushing of two maybe three keys - ESC and some other key(s).

The issue has low priority, because this behavior wasn't observed in real terminal with real input. It affects only testing.",2018/01/25 8:50 AM
WFCORE-3542,"There is no way to configure the JDBC realm to use modular crypt in WildFly, even though the underlying realm does support it.

The problem is that the *{{salt-index}} and {{itereration-count-index}} attributes should be optional*, and if they not given, a value of {{-1}} should be passed to the mapper.  By omitting both of these values, the database column values will then be recognized as modular-crypt strings.
",2018/01/24 9:55 AM
WFCORE-3541,"Not all password types are covered by *set-password* operation in ModifiableRealmDecorator.

At least *ScramDigestPassword* is not available.",2018/01/24 7:51 AM
WFCORE-3540,"1. create commands in file command.cli which contains ""ls -l /subsystem=elytron/provider-loader=elytron""
2. start EAP server.
3 execute command in CLI non interactive mode jboss-cli.sh -c --file=command.cli.

See the table output is malformat

",2018/01/24 3:37 AM
WFCORE-3506,"CLI prints two spaces in help CLI command if wrong command is set. Two spaces are before ""does"" word.

I use [this PR|https://github.com/wildfly/wildfly-core/pull/2946]

*Example:*
{noformat}
[standalone@localhost:9990 /] help nonsence
Command nonsence  does not exist.
[standalone@localhost:9990 /]
{noformat}

*Expected results:*
{noformat}
[standalone@localhost:9990 /] help nonsence
Command nonsence does not exist.
[standalone@localhost:9990 /]
{noformat}
",2018/01/12 3:31 AM
WFCORE-3504,"When we logout from a management console with IE, the logout redirect is failed with an Error Code""INET_E_INVALID_URL"".",2018/01/11 8:11 AM
WFCORE-3503,"I found duplicate command in CLI help 
For example twice commands:
* attachment
* if 
* undeploy
* command

I see this issue in this [pull request|https://github.com/wildfly/wildfly-core/pull/2946/commits/3eae7f7d94aa5c9bc3914a8eaa2120a2c3fa2bfe] 

{noformat}
[standalone@localhost:9990 /] help --commands
Commands available in the current context:
attachment                       connection-info                  deployment undeploy              help                             pwd                              set                              
attachment                       connection-info                  deployment undeploy-cli-archive  history                          pwd                              shutdown                        
batch                            deploy                           deployment-info                  history                          quit                             shutdown                        
batch                            deploy                           deployment-info                  if                               quit                             try                              
cd                               deployment deploy-cli-archive    deployment-overlay               if                               read-attribute                   try                              
cd                               deployment deploy-file           deployment-overlay               ls                               read-attribute                   undeploy                        
clear                            deployment deploy-url            echo                             ls                               read-operation                   undeploy                        
clear                            deployment disable               echo                             module                           read-operation                   unset                            
command                          deployment disable-all           echo-dmr                         module                           reload                           unset                            
command                          deployment enable                echo-dmr                         patch apply                      reload                           version                          
command-timeout                  deployment enable-all            for                              patch history                    run-batch                        
command-timeout                  deployment info                  for                              patch info                       run-batch                        
connect                          deployment list                  grep                             patch inspect                    set                              
To read a description of a specific command execute 'help <command name>'.
{noformat}",2018/01/11 3:21 AM
WFCORE-3494,"Scenario:
1) Accept Temporarily CERT1 CN=CA,
2) Disable SSL
3) Enable SSL with new certificate CERT2, same DN CN=CA
4) Prompt user to accept CERT2, Internal certificates set iterator returns items in this order (important): CERT2,CERT1
5) Internally create a delegate that will do the actual certificate check and add to it all certificates: theTrustStore.setCertificateEntry(current.getSubjectX500Principal().getName(), current);
6) So CERT1 and CERT2 are sharing the same name, CERT1 overrides CERT2, CERT2 (the certificate to add) will never be added
7) Infinite loop.

The problem comes from the fact that DN is used as the alias. In the case of temporarily added certificate, a unique alias should be created.

For certificate added permanently to the trust-store, the DN is also used as the alias. In this case, the last accepted certificate is the one stored, there is no mismatch.
",2018/01/08 5:32 AM
WFCORE-3490,"{code}
[standalone@embedded /] set name=World
[standalone@embedded /] for var in :resolve-expression(expression=Hello $name!)
java.lang.IllegalArgumentException
{code}

As you can see in the example, the commands produce {{IllegalArgumentException}}. Instead of {{IllegalArgumentException}} there should be an error message explaining what is wrong.",2018/01/04 4:40 AM
WFCORE-3487,ValueTypeCompletionTestCase contains test names which does not imply what the test is doing. Rename those tests.,2018/01/03 8:10 AM
WFCORE-3486,"In standalone mode, shutdown can be used with a timeout in order to execute a graceful shutdown of the server. 
In domain mode, this attribute is not used and it is not taken into account when the domain is shutting down.

The CLI output of {{shutdown -help}} does not declare that {{-timeout}} is only relevant to standalone servers and is it not allowed if {{-host}} is used. The handler should reject that combo.",2018/01/03 7:50 AM
WFCORE-3480,"When 'ls' operation is performed over 'provider-loader' element, the output is very ugly - I get many empty lines with one very long attribute value and few more attributes with simple values.

Expected: no empty lines between printed attributes so the output does not take like 4 screen size.

*Steps to reproduce:*
# prepare WF based on wf-core
# start WF
# ls /subsystem=elytron/provider-loader=elytron
# see very long output with many empty lines between particular attribute records printed",2017/12/22 5:11 AM
WFCORE-3479,"When adding mixed domain tests for EAP 7.1.0 I could not get the MixedDomainDeployment710TestCase.testExplodedDeployment() test to work. Comparing with the core domain ExplodedDeploymentTestCase.testInstallAndExplodeDeploymentOnDCFromScratch(), they both do the following:

{code}
1) Create an empty deployment
2) Add some content to the deployment using input streams
3) Add the deployment to a server group
{code}
However, they differ in that ExplodedDeploymentTestCase does this as individual steps, while MixedDomainDeployment710TestCase does this in a composite. I have a branch at https://github.com/kabir/wildfly-core/tree/WFCORE-3479 which expands ExplodedDeploymentTestCase to demonstrate the problem. 

Going back to MixedDomainDeploymentTestCase, the testExplodedDeployment() test pushes the following composite to the DC:
{code}
{
    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""address"" => [(""deployment"" => ""test.war"")],
            ""content"" => [{""empty"" => true}]
        },
        {
            ""operation"" => ""add-content"",
            ""address"" => [(""deployment"" => ""test.war"")],
            ""content"" => [
                {
                    ""target-path"" => ""index.html"",
                    ""input-stream-index"" => 0
                },
                {
                    ""target-path"" => ""index2.html"",
                    ""input-stream-index"" => 1
                }
            ]
        },
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""server-group"" => ""other-server-group""),
                (""deployment"" => ""test.war"")
            ],
            ""enabled"" => true
        },
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""server-group"" => ""main-server-group""),
                (""deployment"" => ""test.war"")
            ],
            ""enabled"" => true
        }
    ],
    ""operation-headers"" => {
        ""caller-type"" => ""user"",
        ""access-mechanism"" => ""NATIVE"",
        ""domain-uuid"" => ""b016e0a3-4175-4f40-b6b9-779fc0fd1745"",
        ""execute-for-coordinator"" => true
    }
}

{code}

What ends up being pushed to the slave is:
{code}
{

    ""operation"" => ""composite"",
    ""address"" => [],
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""address"" => [(""deployment"" => ""test.war"")],
            ""content"" => [{
                ""hash"" => bytes {
                    0x8f, 0x7c, 0x8c, 0x80, 0x35, 0x88, 0x36, 0x16,
                    0x61, 0xfa, 0x0a, 0x10, 0x30, 0xf9, 0x13, 0x29,
                    0x04, 0x05, 0x9d, 0x82
                },
                ""archive"" => false
            }],
            ""operation-headers"" => {
                ""caller-type"" => ""user"",
                ""access-mechanism"" => ""NATIVE"",
                ""domain-uuid"" => ""9f6d874e-24f8-41ec-a1d0-9c98509964fc""
            },
            ""runtime-name"" => undefined
        },
        {
            ""operation"" => ""add-content"",
            ""address"" => [(""deployment"" => ""test.war"")],
            ""content"" => [{
                ""hash"" => bytes {
                    0x52, 0x3a, 0x0a, 0x7b, 0x3b, 0xae, 0x1c, 0x67,
                    0x22, 0x51, 0xf6, 0x34, 0xb5, 0x3b, 0xe7, 0xf9,
                    0x78, 0x59, 0x91, 0x63
                },
                ""target-path"" => "".""
            }],
            ""operation-headers"" => {
                ""caller-type"" => ""user"",
                ""access-mechanism"" => ""NATIVE"",
                ""domain-uuid"" => ""9f6d874e-24f8-41ec-a1d0-9c98509964fc""
            },
            ""path"" => [
                ""index.html"",
                ""index2.html""
            ]
        },
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""server-group"" => ""other-server-group""),
                (""deployment"" => ""test.war"")
            ],
            ""enabled"" => true
        },
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""server-group"" => ""main-server-group""),
                (""deployment"" => ""test.war"")
            ],
            ""enabled"" => true
        }
    ],
    ""operation-headers"" => {
        ""caller-type"" => ""user"",
        ""access-mechanism"" => ""NATIVE"",
        ""domain-uuid"" => ""9f6d874e-24f8-41ec-a1d0-9c98509964fc"",
        ""execute-for-coordinator"" => true
    }
}

{code}

The error reported by the DC is:
{code}
{
    ""outcome"" => ""failed"",
    ""result"" => {
        ""step-1"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        },
        ""step-2"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        },
        ""step-3"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        },
        ""step-4"" => {
            ""outcome"" => ""failed"",
            ""rolled-back"" => true
        }
    },
    ""failure-description"" => {""WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:"" => {""server-group"" => {""other-server-group"" => {""host"" => {""slave"" => {""server-one"" => {""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0216: Management resource '[(\""deployment\"" => \""test.war\"")]' not found""}}}}}}}},
    ""rolled-back"" => true,
    ""server-groups"" => {""other-server-group"" => {""host"" => {""slave"" => {""server-one"" => {""response"" => {
        ""outcome"" => ""failed"",
        ""result"" => {
            ""step-1"" => {
                ""outcome"" => ""failed"",
                ""failure-description"" => ""WFLYCTL0216: Management resource '[(\""deployment\"" => \""test.war\"")]' not found"",
                ""rolled-back"" => true
            },
            ""step-2"" => {""outcome"" => undefined}
        },
        ""failure-description"" => {""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0216: Management resource '[(\""deployment\"" => \""test.war\"")]' not found""}},
        ""rolled-back"" => true
    }}}}}}
}
{code}

Having debugged the slave process a bit, I *believe* the following is what is passed to the servers by the slave HC:
{code}
{
    ""operation"" => ""composite"",
    ""steps"" => [
        {
            ""operation"" => ""add-content"",
            ""address"" => [(""deployment"" => ""test.war"")],
            ""content"" => [{
                ""hash"" => bytes {
                    0x52, 0x3a, 0x0a, 0x7b, 0x3b, 0xae, 0x1c, 0x67,
                    0x22, 0x51, 0xf6, 0x34, 0xb5, 0x3b, 0xe7, 0xf9,
                    0x78, 0x59, 0x91, 0x63
                },
                ""target-path"" => "".""
            }],
            ""operation-headers"" => {
                ""access-mechanism"" => ""NATIVE"",
                ""domain-uuid"" => ""2bd6c01d-a844-43fc-8d10-7d6e4c32e5b1""
            },
            ""path"" => [
                ""index.html"",
                ""index2.html""
            ]
        },
        {
            ""operation"" => ""add"",
            ""address"" => [(""deployment"" => ""test.war"")],
            ""enabled"" => true,
            ""operation-headers"" => {
                ""access-mechanism"" => ""NATIVE"",
                ""domain-uuid"" => ""2bd6c01d-a844-43fc-8d10-7d6e4c32e5b1""
            },
            ""runtime-name"" => ""test.war"",
            ""content"" => [{
                ""hash"" => bytes {
                    0x52, 0x3a, 0x0a, 0x7b, 0x3b, 0xae, 0x1c, 0x67,
                    0x22, 0x51, 0xf6, 0x34, 0xb5, 0x3b, 0xe7, 0xf9,
                    0x78, 0x59, 0x91, 0x63
                },
                ""archive"" => false
            }]
        }
    ],
    ""operation-headers"" => {
        ""access-mechanism"" => ""NATIVE"",
        ""domain-uuid"" => ""2bd6c01d-a844-43fc-8d10-7d6e4c32e5b1""
    },
    ""address"" => []
}
{code}

Note that 'add-content' now comes BEFORE 'add', which would explain the ""Management resource '[(\""deployment\"" => \""test.war\"")]' not found"".",2017/12/21 4:40 PM
WFCORE-3476,"ServerSuspendHandler blocks until the suspend is done receiving a notification from the SuspendController. The issue here is if the server is already suspended, there are no notifications, and then the handler blocks forever until it is interrupted. This only occurs if the suspend is used with a timeout for a server already suspended.
",2017/12/21 4:05 AM
WFCORE-3484,"If you try to write the following commands into the CLI you will get an error {{Unrecognized variable}}.

{code}
[standalone@embedded /] if (outcome != success) of /system-property=test:read-resource
[standalone@embedded /] set foo=bar
[standalone@embedded /] echo $foo
Unrecognized variable foo
{code}",2017/12/19 10:09 AM
WFCORE-3458,"To specify external secret file location externalPath is intended. However in case of PKCS11 it can't be achieved.

{code}
10:53:03,403 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC000001: Failed to start service org.wildfly.security.credential-store.fips-credential-store: org.jboss.msc.service.StartException in service org.wildfly.security.credential-store.fips-credential-store: WFLYELY00004: Unable to start the service.
	at org.wildfly.extension.elytron.CredentialStoreService.start(CredentialStoreService.java:134)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:2032)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1955)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store
	at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.setupExternalStorage(KeyStoreCredentialStore.java:954)
	at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.load(KeyStoreCredentialStore.java:828)
	at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.initialize(KeyStoreCredentialStore.java:214)
	at org.wildfly.security.credential.store.CredentialStore.initialize(CredentialStore.java:159)
	at org.wildfly.extension.elytron.CredentialStoreService.start(CredentialStoreService.java:126)
	... 5 more
Caused by: java.nio.file.NoSuchFileException: /home/mchoma/workspace/git-repositories/tests-security/fips/fips-credential-store
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.setupExternalStorage(KeyStoreCredentialStore.java:943)
	... 9 more

10:53:03,409 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 4) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""credential-store"" => ""fips-credential-store"")
]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.credential-store.fips-credential-store"" => ""WFLYELY00004: Unable to start the service.
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store
    Caused by: java.nio.file.NoSuchFileException: /home/mchoma/workspace/git-repositories/tests-security/fips/fips-credential-store""}}
{code}

Problem seems to be in method
{code:java|title=KeyStoreCredentialStore.java}
    private void setupExternalStorage(final String keyContainingKeyStoreType, final Path keyContainingKeyStoreLocation) throws CredentialStoreException {
        KeyStore keyContainingKeyStore = getKeyStoreInstance(keyContainingKeyStoreType);
        keyStore = getKeyStoreInstance(""JCEKS"");
        externalStorage = new ExternalStorage();
        try {
            final char[] storePassword = getStorePassword(protectionParameter);
            if (keyContainingKeyStoreLocation != null) {
                try (InputStream is = Files.newInputStream(keyContainingKeyStoreLocation)) {
                    keyContainingKeyStore.load(is, storePassword);
                }
            } else {
                // keystore without file (e.g. PKCS11)
                synchronized (EmptyProvider.getInstance()) {
                    keyContainingKeyStore.load(null, storePassword);
                }
            }
            externalStorage.init(cryptographicAlgorithm, encryptionKeyAlias, keyContainingKeyStore, storePassword, keyStore);
        } catch(IOException | GeneralSecurityException e) {
            throw log.cannotInitializeCredentialStore(e);
        }
    }
{code}

Although location is not specified in CLI command keyContainingKeyStoreLocation is not null. Because once location is not specified it becomes name of CS, in this case fips-credential-store (This default is in elytron subsystem).",2017/12/13 11:06 AM
WFCORE-3454,The {{assembly.xml}} in the {{wildfly-core-dist}} module produces a zip file with only the source contents. This results in an unusable distribution.,2017/12/11 6:35 PM
WFCORE-3440,"* Deploy two deployments,
* read content hashes of the deployments,
* try to {{:full-replace-deployment}} the first deployment with the content hash of the other one (or any made up content hash for that matter).

The byte values of the content hash are not parsed correctly - whenever there's a value larger than 0x7f (e.g. 0xef), the parsing fails with ""Value out of range. Value:""ef"" Radix:16"".

{code}
[standalone@localhost:9990 /] /deployment=*:read-resource
{
    ""outcome"" => ""success"",
    ""result"" => [
        {
            ""address"" => [(""deployment"" => ""FilterServlet.war"")],
            ""outcome"" => ""success"",
            ""result"" => {
                ""content"" => [{
                    ""hash"" => bytes {
                        0xef, 0x4c, 0x32, 0x78, 0xd6, 0xc6, 0x01, 0xa3,
                        0x64, 0xb4, 0xad, 0x73, 0x86, 0x8c, 0x69, 0xa8,
                        0x97, 0xed, 0x09, 0x33
                    },
                    ""archive"" => undefined
                }],
                ...
            }
        }, ...
    ]
}

[standalone@localhost:9990 /] :full-replace-deployment(name=FilterServlet.war, content=[{hash=bytes{0xef, 0x4c, 0x32, 0x78, 0xd6, 0xc6, 0x01, 0xa3, 0x64, 0xb4, 0xad, 0x73, 0x86, 0x8c, 0x69, 0xa8, 0x97, 0xed, 0x09, 0x33}}])
Failed to parse '[{hash=bytes{0xef, 0x4c, 0x32, 0x78, 0xd6, 0xc6, 0x01, 0xa3, 0x64, 0xb4, 0xad, 0x73, 0x86, 0x8c, 0x69, 0xa8, 0x97, 0xed, 0x09, 0x33}}]': Value out of range. Value:""ef"" Radix:16
{code}",2017/11/30 10:41 AM
WFCORE-3437,"CLI (WildFly master) can't be started on Solaris:

{noformat}
[hudson@dev34-02 bin]$ ./jboss-cli.sh
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
java.io.IOException: Error executing 'stty size': unknown mode: size
: Error executing 'stty size': unknown mode: size

[hudson@dev34-02 bin]$ 
{noformat}",2017/11/29 4:41 AM
WFCORE-3425,"Currently, if the file that backs an Elytron {{key-store}} resource doesn't exist, executing the {{store}} operation fails. However, if the file wasn't flagged as required when creating the {{key-store}} resource, it should get created if it doesn't already exist when executing the {{store}} operation.",2017/11/16 3:58 PM
WFCORE-3417,"*org.jboss.as.test.integration.domain.events.JmxControlledStateNotificationsTestCase*

{code}
cd testsuite/domain/
mvn test -DtestLogToFile=false -Dtest=JmxControlledStateNotificationsTestCase -Dsecurity.manager
{code}

fails on IBM JDK with:
{code}
java.lang.AssertionError: {""outcome"" => ""failed"",""result"" => undefined,""failure-description"" => {""WFLYDC0074: Operation failed or was rolled back on all servers. Server failures:"" => {""server-group"" => {""main-server-group"" => {""host"" => {""master"" => {""main-one"" => {""WFLYCTL0080: Failed services"" => {""test.deployment.jmx"" => ""java.security.AccessControlException: WFSM000001: Permission check failed (permission \""(\""java.io.FilePermission\"" \""/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-secman/19de6045/testsuite/domain/target/domains/JmxControlledStateNotificationsTestCase/master\"" \""read\"")\"" in code source \""(vfs:/content/test-jmx-notifications-deployment.jar <no signer certificates>)\"" of \""ModuleClassLoader for Module \""deployment.test-jmx-notifications-deployment.jar\"" from Service Module Loader\"")
    Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission \""(\""java.io.FilePermission\"" \""/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-secman/19de6045/testsuite/domain/target/domains/JmxControlledStateNotificationsTestCase/master\"" \""read\"")\"" in code source \""(vfs:/content/test-jmx-notifications-deployment.jar <no signer certificates>)\"" of \""ModuleClassLoader for Module \""deployment.test-jmx-notifications-deployment.jar\"" from Service Module Loader\"")""}}}}}}}},""rolled-back"" => true,""server-groups"" => {""main-server-group"" => {""host"" => {""master"" => {""main-one"" => {""response"" => {""outcome"" => ""failed"",""failure-description"" => {""WFLYCTL0080: Failed services"" => {""test.deployment.jmx"" => ""java.security.AccessControlException: WFSM000001: Permission check failed (permission \""(\""java.io.FilePermission\"" \""/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-secman/19de6045/testsuite/domain/target/domains/JmxControlledStateNotificationsTestCase/master\"" \""read\"")\"" in code source \""(vfs:/content/test-jmx-notifications-deployment.jar <no signer certificates>)\"" of \""ModuleClassLoader for Module \""deployment.test-jmx-notifications-deployment.jar\"" from Service Module Loader\"")
    Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission \""(\""java.io.FilePermission\"" \""/mnt/hudson_workspace/workspace/eap-7x-as-testsuite-test-core-rhel-secman/19de6045/testsuite/domain/target/domains/JmxControlledStateNotificationsTestCase/master\"" \""read\"")\"" in code source \""(vfs:/content/test-jmx-notifications-deployment.jar <no signer certificates>)\"" of \""ModuleClassLoader for Module \""deployment.test-jmx-notifications-deployment.jar\"" from Service Module Loader\"")""}},""rolled-back"" => true}}}}}}}
	at org.junit.Assert.fail(Assert.java:88)
	at org.jboss.as.test.integration.management.rbac.RbacUtil.checkOperationResult(RbacUtil.java:115)
	at org.jboss.as.test.integration.management.rbac.RbacUtil.executeOperation(RbacUtil.java:100)
	at org.wildfly.test.jmx.JMXListenerDeploymentSetupTask.setup(JMXListenerDeploymentSetupTask.java:75)
	at org.jboss.as.test.integration.domain.events.JmxControlledStateNotificationsTestCase.setupClass(JmxControlledStateNotificationsTestCase.java:86)
{code}

Moreover it causes that all following test cases will fail.

It seems it is caused by [1] which configures different Path for IBM JDK, but this is not covered in permissions for deployment created in [2].

[1] https://github.com/wildfly/wildfly-core/blob/8b28abb588dd7d9d51e66201118063520da3a971/testsuite/domain/src/test/java/org/jboss/as/test/integration/domain/events/JmxControlledStateNotificationsTestCase.java#L70
[2] https://github.com/wildfly/wildfly-core/blob/8b28abb588dd7d9d51e66201118063520da3a971/testsuite/shared/src/main/java/org/wildfly/test/jmx/ServiceActivatorDeploymentUtil.java#L94",2017/11/14 3:15 AM
WFCORE-3416,"The issue isn't that the console isn't working in admin-only mode. It's that a permanent redirect is issued for a temporary condition. The redirect from the console root URL should use a 302, not a 301, since the appropriate target depends on whether the server was started in admin-only mode.

The root URL of the admin console ( / ) does a permanent redirect (301) to the final target. Normally it's a redirect to /console/index.html. But if the server is started in admin-only mode then /console/index.html doesn't return a sensible error (Chrome reports that the connection to the server was lost). If a browser has cached the permanent redirect, it won't be clear why the console isn't working.

On the other hand if the server is started in domain-only mode and the browser caches the permanent redirect to /consoleerror/noConsoleForAdminModeError.html, then the browser will continue to load /consoleerror/noConsoleForAdminModeError.html even after the server is started without --admin-only.

A 301 redirect is inappropriate since ""admin-only"" isn't a permanent state.

",2017/11/13 8:32 AM
WFCORE-3412,"Customer impact low. Problem occures when environment defines SEP environment variable. If this happens user can unset variable locally or use elytron subsystem for managing credential stores (alternative to elytron-tool script)

SEP for variable name is too general. It can happen running environment uses it for other purpose. Rename variable SEP in elytron-tool.* scripts (bat,ps1,sh) using namespace to ELYTRON_TOOL_SEP, as there are already variables using this namespace; ELYTRON_TOOL_RUNJAR, ELYTRON_TOOL_ADDONS.

Variable SEP is not used in any other script.
",2017/11/10 8:38 AM
WFCORE-3409,"Every other parts of server and launchers (including embed-host-controller) honor the ""module.path"" system property for setting modules path.",2017/11/07 11:34 AM
WFCORE-3408,"In case there is multiple external PKCS11 credential stores configured, intermittently it happens on startup exception occurs. Seems more CS are configured, it is bigger chance to hit error. If only one CS is configured error does not occur.

We have automatic tests with 3 CS and so far we have not hit this issue. With 5 CS from reproducer it happens nearly with each restart. I hit this during discussing analysis of advanced keystore features [1] with Farah.

Multiple  CS can be expected by users, when they want to logically separate CS  files for some reason. However technically everything can be stored in  one CS.

That is analogy of https://issues.jboss.org/browse/JBEAP-11693  for PKCS11 credential store. Fix for that issue was proper  synchronization of PKCS11 keystore loading. I assume something similar  will be needed here.

If  there is missing synchronization of PKCS11 keystore in Credential store  implementation, that can in theory occur in combination of 1 CS and  multiple PKCS11 keystores as well. However this scenario is tested for  and such problem haven't occurred yet.

[~bmaxwell] Is GSS is ok with this being critical since a workaround exists?

External Credential Store is new feature of Elytron tracked by EAP7-277.

{code:title=KeyStoreException: invalid KeyStore state: found N secret keys sharing CKA_LABEL [my-key]}
09:56:15,574 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""credential-store"" => ""MyStore"")
]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.credential-store.MyStore"" => ""WFLYELY00004: Unable to start the service.
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: java.security.KeyStoreException: expected but could not find secret key
    Caused by: java.security.KeyStoreException: expected but could not find secret key""}}
09:56:15,575 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""credential-store"" => ""MyStore4"")
]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.credential-store.MyStore4"" => ""WFLYELY00004: Unable to start the service.
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: java.security.KeyStoreException: invalid KeyStore state: found 2 secret keys sharing CKA_LABEL [my-key]
    Caused by: java.security.KeyStoreException: invalid KeyStore state: found 2 secret keys sharing CKA_LABEL [my-key]""}}
09:56:15,576 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""credential-store"" => ""MyStore5"")
]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.credential-store.MyStore5"" => ""WFLYELY00004: Unable to start the service.
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: java.security.KeyStoreException: invalid KeyStore state: found 3 secret keys sharing CKA_LABEL [my-key]
    Caused by: java.security.KeyStoreException: invalid KeyStore state: found 3 secret keys sharing CKA_LABEL [my-key]""}}
{code}

[1] https://developer.jboss.org/wiki/AnalysisDesign-AdvancedElytronKey-storeManipulationOperations",2017/11/07 4:45 AM
WFCORE-3407,"When a deployment that contains it's own logging configuration is undeployed the {{LogContext}} used for the deployment is not completely cleared. A GC cycle will end up doing this, but there is potential for issues, mainly on Windows, if a file handler is used during a redeploy. The file could be in-use by the old context.

During undeploy we should probably get the {{LogContextConfiguration}} and remove all the loggers, handlers, formatters and error managers.

Note that the only place I've seen this be an actual issue is in the test suite on Windows when a file handler is used and after the test is complete there is an attempt to delete the file.",2017/11/06 1:18 PM
WFCORE-3405,"The find-non-progressing-operation op isn't marked as read-only or runtime-only (it's both) so it isn't accessible to external callers on a domain server.

The related cancel-non-progressing-operation is marked runtime-only, so it's accessible. There's no point allow cancellation (which changes things) and not allowing a find (which just reads), so we should make the find visible.

A requirement of fixing this though is there need to be new test methods added to OperationCancellationTest case that test finding and cancelling the op via the server resource and not just via the host. The existing testFindNonProgressingOperation() can just have a second ""find"" op added after the current one, and then new variants of testCancellingNonProgressingDomainRollout() and testFindNonProgressingDomainRollout() can be added that use the full server address for the find/cancel op.

",2017/11/06 11:05 AM
WFCORE-3398,"I wen throught resources and 
* trust-manager is registered as credential-store besides trust-manager

{code}
            ""trust-manager"" => {
                ""description"" => ""A trust manager definition for creating the TrustManager[] as used to create an SSLContext."",
                ""model-description"" => {""*"" => {
                    ""description"" => ""A trust manager definition for creating the TrustManager[] as used to create an SSLContext."",
                    ""capabilities"" => [
                        {
                            ""name"" => ""org.wildfly.security.trust-manager"",
                            ""dynamic"" => true
                        },
                        {
                            ""name"" => ""org.wildfly.security.credential-store"",
                            ""dynamic"" => true
                        }
                    ],

{code}


",2017/11/02 9:57 AM
WFCORE-3385,"Dropping SAR subsystem and SAR extension in a batch results in

```
15:36:09,805 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""remove"") failed - address: ([(""subsystem"" => ""sar"")]): java.lang.NullPointerException
        at org.jboss.as.controller.CapabilityRegistry.getCapabilitiesForAddress(CapabilityRegistry.java:469)
        at org.jboss.as.controller.CapabilityRegistry.capabilityReloadRequired(CapabilityRegistry.java:446)
        at org.jboss.as.controller.AbstractOperationContext.reloadRequired(AbstractOperationContext.java:1122)
        at org.jboss.as.controller.ReloadRequiredRemoveStepHandler.performRuntime(ReloadRequiredRemoveStepHandler.java:56)
        at org.jboss.as.controller.AbstractRemoveStepHandler$1.execute(AbstractRemoveStepHandler.java:82)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:980)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:726)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:450)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1402)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:418)
        at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:243)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:263)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:229)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:243)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:217)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:137)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:161)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:287)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:244)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:157)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)

15:36:09,807 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0190: Step handler org.jboss.as.controller.extension.ExtensionRemoveHandler@3ca42854 for operation remove at address [(""extension"" => ""org.jboss.as.sar"")] failed handling operation rollback -- java.lang.IllegalStateException: WFLYCTL0363: Capability 'org.wildfly.sar-deployment' is already registered in context 'global'.: java.lang.IllegalStateException: WFLYCTL0363: Capability 'org.wildfly.sar-deployment' is already registered in context 'global'.
        at org.jboss.as.controller.CapabilityRegistry.lambda$registerPossibleCapability$0(CapabilityRegistry.java:572)
        at java.util.concurrent.ConcurrentHashMap.computeIfPresent(ConcurrentHashMap.java:1769)
        at org.jboss.as.controller.CapabilityRegistry.registerPossibleCapability(CapabilityRegistry.java:566)
        at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerCapability(ConcreteResourceRegistration.java:684)
        at org.jboss.as.controller.SimpleResourceDefinition.registerCapabilities(SimpleResourceDefinition.java:362)
        at org.jboss.as.controller.registry.NodeSubregistry.registerChild(NodeSubregistry.java:112)
        at org.jboss.as.controller.registry.ConcreteResourceRegistration.registerSubModel(ConcreteResourceRegistration.java:231)
        at org.jboss.as.controller.extension.ExtensionRegistry$SubsystemRegistrationImpl.registerSubsystemModel(ExtensionRegistry.java:706)
        at org.jboss.as.service.SarExtension.initialize(SarExtension.java:93)
        at org.jboss.as.controller.extension.ExtensionAddHandler.initializeExtension(ExtensionAddHandler.java:131)
        at org.jboss.as.controller.extension.ExtensionRemoveHandler$1.handleRollback(ExtensionRemoveHandler.java:81)
        at org.jboss.as.controller.AbstractOperationContext$RollbackDelegatingResultHandler.handleResult(AbstractOperationContext.java:1526)
        at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1498)
        at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1480)
        at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1437)
        at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1420)
        at org.jboss.as.controller.AbstractOperationContext$Step.access$400(AbstractOperationContext.java:1284)
        at org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:857)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:739)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:450)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1402)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:418)
        at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:243)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:263)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:229)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:243)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:217)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:137)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:161)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:157)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:287)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:244)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:157)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)
```",2017/10/24 9:37 AM
WFCORE-3379,"I run into this by accident. command: 
{noformat}
/subsystem=datasources/data-source=ExampleDS:read-attribute(name=[PRESS_TAB_HERE
{noformat}
terminal output:
{noformat}
[standalone@localhost:9990 /] /subsystem=datasources/data-source=ExampleDS:read-attribute(name=[org.jboss.as.cli.CommandFormatException: Attribute name is missing before [ at index 0 in '['
	at org.jboss.as.cli.impl.AttributeNamePathCompleter$AttributeNamePathCallbackHandler.enteredState(AttributeNamePathCompleter.java:394)
	at org.jboss.as.cli.parsing.StateParser$ParsingContextImpl.enterState(StateParser.java:297)
	at org.jboss.as.cli.parsing.EnterStateCharacterHandler.handle(EnterStateCharacterHandler.java:44)
	at org.jboss.as.cli.parsing.StateParser$ParsingContextImpl.parse(StateParser.java:139)
	at org.jboss.as.cli.parsing.StateParser.doParse(StateParser.java:106)
	at org.jboss.as.cli.parsing.StateParser.parse(StateParser.java:73)
	at org.jboss.as.cli.parsing.StateParser.parse(StateParser.java:63)
	at org.jboss.as.cli.parsing.StateParser.parse(StateParser.java:56)
	at org.jboss.as.cli.impl.AttributeNamePathCompleter.parse(AttributeNamePathCompleter.java:246)
	at org.jboss.as.cli.impl.AttributeNamePathCompleter.complete(AttributeNamePathCompleter.java:231)
	at org.jboss.as.cli.impl.AttributeNamePathCompleter.complete(AttributeNamePathCompleter.java:220)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:276)
	at org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:89)
	at org.jboss.as.cli.CommandCompleter.doComplete(CommandCompleter.java:137)
	at org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:64)
	at org.jboss.as.cli.impl.Console$Factory$1$1.complete(Console.java:143)
	at org.jboss.aesh.console.AeshCompletionHandler.complete(AeshCompletionHandler.java:155)
	at org.jboss.aesh.console.AeshInputProcessor.complete(AeshInputProcessor.java:429)
	at org.jboss.aesh.console.AeshInputProcessor.parseOperation(AeshInputProcessor.java:166)
	at org.jboss.aesh.console.Console.processInternalOperation(Console.java:778)
	at org.jboss.aesh.console.Console.execute(Console.java:738)
	at org.jboss.aesh.console.Console.access$900(Console.java:73)
	at org.jboss.aesh.console.Console$6.run(Console.java:647)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)

{noformat}
command above is an edge case when people tries incorrectly AttributeNamePathCompleter with malformed command. However, it's better to log a warning message than print exception stack trace into client terminal.",2017/10/24 6:36 AM
WFCORE-3372,"I've seen a couple intermittent failures in CI runs:

https://ci.wildfly.org/project.html?projectId=WildFlyCore&buildTypeId=&tab=testDetails&testNameId=-4143278160763350583&order=TEST_STATUS_DESC&branch_WildFlyCore=__all_branches__&itemsCount=50

I think the cause is the test is doing a reload of the HC but is not waiting for the connection to close.",2017/10/19 11:25 AM
WFCORE-3361,"Fallback on unavailable KDC is on IBM JDK too slow, because server is waiting for the KDC around 30 seconds on every HTTP request.

Should be possible to configure IBM JDK to not contact KDC, or at least to cache failed state of GSSCredential obtaining for defined time period.",2017/10/17 5:19 AM
WFCORE-3353,If the deployment name doesn't match the runtime name the logging configuration service is not found resulting an undefined model. The runtime name should be accounted for so the configuration can be found to produce the model.,2017/10/11 11:22 AM
WFCORE-3347,"add-content operation contains ""content"" attribute, 
{code}
/deployment=*:read-operation-description(name=add-content)
{code}

""content"" attribute it is a list of other attributes as: input-stream-index, hash, bytes, url. They themselves contains the alternatives metadata as
{code}

""url"" => {
    ""type"" => STRING,
    ""description"" => ""The URL at which the deployment content is available for upload to the domain's or standalone server's deployment content repository.. Note that the URL must be accessible from the target of the operation (i.e. the Domain Controller or standalone server)."",
    ""expressions-allowed"" => false,
    ""required"" => false,
    ""nillable"" => true,
    ""alternatives"" => [
        ""input-stream-index"",
        ""hash"",
        ""bytes"",
        ""path"",
        ""relative-to"",
        ""empty""
    ],
    ""min-length"" => 1L,
    ""max-length"" => 2147483647L
},
{code}

But the following attributes doesn't exist: path, relative-to, empty 
",2017/10/06 5:46 PM
WFCORE-3338,"In Wildfly, a command such as this with a non-existent path returns success instead of failed:

{code}
 /host=master/server=nonExistant:read-attribute(name=runtime-configuration-state)
{
    ""outcome"" => ""success"",
    ""result"" => ""stopped""
}
{code}

Where as in EAP 6.4:

{code}
[domain@localhost:9999 /] /host=master/server=server-NOT-EXIST:read-attribute(name=server-state)
Failed to get the list of the operation properties: ""JBAS014883: No resource definition is registered for address [
    (""host"" => ""master""),
    (""server"" => ""server-NOT-EXIST"")
]""
{code}",2017/10/05 6:57 PM
WFCORE-3337,"Currently you can remove a logging resource even if it's used by another resource. An example of this would be the ability to remove a formatter even though that formatter is attached to a handler. Removing handlers does validate it's not attached to a logger first. However all logging resources should do this.

Note that logging does not use services which is why this needs to be manually checked. This should be doable via the configuration API. Note too that a fix to validate this will also be done in the logmanager, LOGMGR-179. ",2017/10/05 5:49 PM
WFCORE-3336,"Two ear files are deployed on EAP instance and both are configured to use different logging profile through EAR/META-INF/MANIFEST.MF file.
WAR file from EAR uses some libraries those are present in the ""lib"" folder of each ear file. Application1.ear which logs in app1.log  and Application2.ear which logs in app2.log.
when we access application we can see logging from EAR1 into EAR2 log file .",2017/10/05 4:33 PM
WFCORE-3331,"licenses.xml contains:
{code}
      <licenses>
        <license>
          <name>GNU Lesser General Public License v2.1 or later</name>
          <url>http://www.gnu.org/licenses/old-licenses/lgpl-2.1-standalone.html</url>
          <distribution>repo</distribution>
        </license>
        <license>
          <name>Apache License 2.0</name>
          <url>http://www.apache.org/licenses/LICENSE-2.0</url>
          <distribution>repo</distribution>
        </license>
      </licenses>
{code}

However, wildfly-elytron-integration-3.0.3.Final.pom only contains:
{code}
    <licenses>
        <license>
            <name>Apache 2</name>
            <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
            <distribution>repo</distribution>
        </license>
    </licenses>
{code}

Please fix either licenses.xml or pom. 

In case the pom is fixed, please use {{Apache License 2.0}} instead of {{Apache 2}} as license name.",2017/10/04 7:14 AM
WFCORE-3322,"A remoting connector with a socket-binding attribute pointing to a non-existing s-b does not fail with a capability validation failure:

{code}
[standalone@localhost:9990 /] /subsystem=remoting/connector=remoting-connector:add(security-realm=ApplicationRealm,socket-binding=remoting)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {
        ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.network.socket-binding.remoting""],
        ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.remoting-connector is missing [org.wildfly.network.socket-binding.remoting]""]
    },
    ""rolled-back"" => true
}
{code}

As in all such cases of missing cap validation, that means it doesn't fail at all in admin-only:

{code}
[standalone@localhost:9990 /] reload --admin-only=true
[standalone@localhost:9990 /] /subsystem=remoting/connector=remoting-connector:add(security-realm=ApplicationRealm,socket-binding=remoting)
{""outcome"" => ""success""}
{code}

Problem is ConnectorAdd isn't passing its attributes into the superclass, which means the superclass' recording of capability requirements isn't done.

I'll check for other occurrences of this pattern in the subsystem.",2017/09/29 5:57 PM
WFCORE-3317,"*Description of problem:*
Some deployment-scanner unit tests from wf-core fail on IBM JDK intermittently.

This is testsuite issue only.

Affected test cases:
* ShutdownFileSystemDeploymentServiceUnitTestCase
* FileSystemDeploymentServiceUnitTestCase

Executors.newSingleThreadExecutor() method returns ExecutorService with finalize method, that shutdown thread executor. Currently ExecutorService instance is not referenced, so IBM JDK calls finalize method. Finalize method calls shutdown method and size of thread-pool is decreased to 0 before lockDone.get(...) is called.

*How reproducible:*
0.6% - intermittently on IBM JDK

*Actual results - ShutdownFileSystemDeploymentServiceUnitTestCase:*
StackTrace:
{noformat}
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@67503391 rejected from java.util.concurrent.ThreadPoolExecutor@ae603d77[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2058)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:834)
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1380)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at java.util.concurrent.Executors$DelegatedExecutorService.submit(Executors.java:692)
	at org.jboss.as.server.deployment.scanner.ShutdownFileSystemDeploymentServiceUnitTestCase.testUncleanShutdown(ShutdownFileSystemDeploymentServiceUnitTestCase.java:156)
{noformat}

*Actual results - FileSystemDeploymentServiceUnitTestCase:*
StackTrace:
{noformat}
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@9408464a rejected from java.util.concurrent.ThreadPoolExecutor@fa7bfba[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2058)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:834)
	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1380)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at java.util.concurrent.Executors$DelegatedExecutorService.submit(Executors.java:692)
	at org.jboss.as.server.deployment.scanner.FileSystemDeploymentServiceUnitTestCase.testUncleanShutdown(FileSystemDeploymentServiceUnitTestCase.java:1755)
{noformat}

*Expected results:*
No errors",2017/09/26 9:04 AM
WFCORE-3316,"Server fails to start after submitting invalid security attributes values for remoting http connector (e.g QOP, strength)

Only fix for the configuration is to manually change the XML file directly",2017/09/25 3:43 AM
WFCORE-3298,"EnumValidator is trying to ""correct"" inputs by converting the input node to the official name of the enum. This results a caught and discarded UnsupportedOperationException if the node is protected. Catching an exception is a poor way to do this.

Simply not doing the write if the input is the same as the official value is one way to mitigate this, but better is to wait for DMR-37 and just check if the node is protected.",2017/09/15 2:42 PM
WFCORE-3296,"Port 0 is almost universally considered a wildcard port/indeterminate port/ephemeral/port chosen by the OS and obviously applying an offset to such port (e.g. offset of -100) will fail on multiple fronts, e.g.:

{noformat}
Caused by: java.lang.IllegalArgumentException: port out of range:-100
{noformat}

This is a regression introduced in https://issues.jboss.org/browse/WFLY-2345 based on discussion on https://developer.jboss.org/message/842406#842407 in PR https://github.com/wildfly/wildfly/pull/5307/files#diff-1a9ef995f085779b0598a1322551e580L114

The original condition was also not really correct, since we allow negative and positive port offsets, the correct condition really is {code}if (!isFixedPort && port != 0) {{code}",2017/09/15 6:54 AM
WFCORE-3292,"The {{wildfly-config.xml}} configurations for tests in the controller and protocol modules use invalid attributes for remoting 5.

{code:xml}
<configuration>
    <endpoint name=""test-endpoint"" xmlns=""urn:jboss-remoting:5.0"">
        <connections>
            <connection uri=""remote://localhost:32123"" immediate=""true""/>
        </connections>
    </endpoint>
</configuration>
{code}

The {{uri}} and {{immediate}} attributes are not valid for a {{connection}} element type.",2017/09/14 1:36 PM
WFCORE-3289,"When variables are substituted, the command length his updated and makes completion logic to fail. The substitution needs to be taken into account at completion time.",2017/09/13 11:24 AM
WFCORE-3282,"Duplicate records are registered in mgmt-groups.properties and application-roles.properties if adding user with empty group name as follows.

1. Add user ""testuser1"" with empty group from add-user.sh.
$JBOSS_HOME/bin/add-user.sh -sc ./standalone/configuration -u testuser1 -p RedHat1! -g """"

2. After that, the following record is written in the group property file.
- mgmt-groups.properties (application-roles.properties)
testuser1=

3. Add user ""testuser2"" with empty group from add-user.sh.
$JBOSS_HOME/bin/add-user.sh -sc ./standalone/configuration -u testuser2 -p RedHat1! -g """"

4. After that, the user records that have empty group will be registered duplicately as below.
- mgmt-groups.properties (application-roles.properties)
testuser1=
testuser2=
testuser1=    # duplicate record
",2017/09/12 7:58 AM
WFCORE-3258,NoData,2017/09/07 3:42 PM
WFCORE-3256,"Say you have a filter value like this:

{code}
{
    ""any"" => {
        ""match"" => "".*"",
        ""change-level"" => undefined,
        ""level"" => undefined,
        ""level-range"" => undefined,
        ""not"" => undefined
    },
    ""all"" => undefined,
    ""change-level"" => undefined,
    ""level"" => undefined,
    ""level-range"" => undefined,
    ""not"" => undefined
}
{code}

Writing that will fail with ""WFLYLOG0025: Filter (""change-level"" => undefined) is invalid"".

This is because filterToFilterSpec will process the ""any"" node by iterating over its fields and recursing, and as soon as it gets to one of the 'undefined' ones it will fail. But the overall structure should be fine.

I hit this when testing a WFCORE-3255 fix, one that had the effect of adding ""change-level"" => undefined, etc to the params used by LoggingOperationsSubsystemTestCase.testLegacyFilters.

I can probably work around this easily enough and IIRC this 'filter' stuff is real old, so this is no big deal.",2017/09/07 12:02 AM
WFCORE-3237,"Trying to deploy a simple JBoss Seam 2.3.x application on WildFly 11.0.0.CR1 will fail with:
{noformat}
09:06:16,492 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC000001: Failed to start service jboss.deployment.unit.""pkg-seamJboss23-notChangedComponentsReinitializedOnce.war"".DEPENDENCIES: org.jboss.msc.service.StartException in service jboss.deployment.unit.""pkg-seamJboss23-notChangedComponentsReinitializedOnce.war"".DEPENDENCIES: WFLYSRV0153: Failed to process phase DEPENDENCIES of deployment ""pkg-seamJboss23-notChangedComponentsReinitializedOnce.war""
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:172)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:2032)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1955)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: org.jboss.as.server.deployment.DeploymentUnitProcessingException: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0157: No Seam Integration jar present: Module ""org.jboss.integration.ext-content"" from local module loader @1ae369b7 (finder: local module finder @6fffcba5 (roots: /Users/poolik/app_servers/wildfly-11.0.0.CR1/modules,/Users/poolik/app_servers/wildfly-11.0.0.CR1/modules/system/layers/base))
	at org.jboss.as.server.deployment.integration.Seam2Processor.deploy(Seam2Processor.java:161)
	at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:165)
	... 5 more
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0157: No Seam Integration jar present: Module ""org.jboss.integration.ext-content"" from local module loader @1ae369b7 (finder: local module finder @6fffcba5 (roots: /Users/poolik/app_servers/wildfly-11.0.0.CR1/modules,/Users/poolik/app_servers/wildfly-11.0.0.CR1/modules/system/layers/base))
	at org.jboss.as.server.deployment.integration.Seam2Processor.getSeamIntResourceRoot(Seam2Processor.java:127)
	at org.jboss.as.server.deployment.integration.Seam2Processor.deploy(Seam2Processor.java:158)
	... 6 more
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0157: No Seam Integration jar present: Module ""org.jboss.integration.ext-content"" from local module loader @1ae369b7 (finder: local module finder @6fffcba5 (roots: /Users/poolik/app_servers/wildfly-11.0.0.CR1/modules,/Users/poolik/app_servers/wildfly-11.0.0.CR1/modules/system/layers/base))
	at org.jboss.as.server.deployment.integration.Seam2Processor.getSeamIntResourceRoot(Seam2Processor.java:100)
	... 7 more
{noformat}

The issue is that in WFLY-8660 the Seam Integration jar was renamed to {{jboss-seam-int-jbossas.jar}}
 ([commit|https://github.com/wildfly/wildfly/pull/9982/commits/e8e751299ed246e7770fd1b81b56d75c467d4740]) but Seam2Processor in WildFly Core still [expects it to be|https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/deployment/integration/Seam2Processor.java#L77] {{jboss-seam-int.jar}}",2017/09/05 2:15 AM
WFCORE-3231,"Suffix in logging subsystem *-rotating-file-handler cannot include second-of-minute or fraction-of-second symbol. However this symbol is checked even in text quoted using single quotes (') to avoid interpretation. This means that symbols 's' or 'S' cannot be used in text. 
See WFCORE-3064 for details.",2017/09/01 5:17 PM
WFCORE-3229,"Adding a runtime step on a domain profile resource is wrong. Currently, the kernel rejects this (see WFCORE-2849) which means you can't add a jmx audit logger in domain mode. That would make this a Blocker, but in WFCORE-3217 I'm going to relax the kernel behavior. Still, this should be corrected.",2017/09/01 4:26 PM
WFCORE-3226,"[Host Controller] 10:53:50,342 ERROR [org.jboss.as.controller.management-operation] (Host Controller Service Threads - 2) WFLYCTL0013: Operation (""add"") failed - address: ([(""host-exclude"" => ""EAP70"")]) - failure description: ""WFLYCTL0248: Invalid value EAP7.0 for host-release; legal values are [EAP6.3, EAP6.2, WildFly10.0, EAP6.4]""
[Host Controller] 10:53:50,366 ERROR [org.jboss.as.host.controller] (Host Controller Service Threads - 2) WFLYHC0143: Failed to apply domain-wide configuration from master host controller. Operation outcome: failed. Failure description {""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-1"" => ""WFLYCTL0248: Invalid value EAP7.0 for host-release; legal values are [EAP6.3, EAP6.2, WildFly10.0, EAP6.4]""}}
[Host Controller] 10:53:50,448 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0001: Could not connect to remote domain controller remote://192.168.122.71:9999 -- 1-$-
[Host Controller] 10:53:50,449 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0147: No domain controller discovery options remain.
[Host Controller] 10:53:50,451 ERROR [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0002: Could not connect to master. Aborting. Error was: java.lang.IllegalStateException: WFLYHC0120: Tried all domain controller discovery option(s) but unable to connect",2017/09/01 12:06 PM
WFCORE-3216,"It's not possible to create an Elytron security domain without a security realm (default-realm attribute is mandatory).

When an administrator wants to allow just ANONYMOUS access, he/she has to use a dummy security realm to configure such a security domain. It should be possible to have domain without realms too.",2017/08/31 1:52 PM
WFCORE-3299,"Powershell script elytron-tool.ps1 doesn't work with custom credential store implementation.

There is problem with getting value of environment variable ELYTRON_TOOL_ADDONS.


*How to reproduce:*
* run powershell and set work directory JBOSS_HOME/bin
* set env variable for custom credential store implementation jar like this:
{code}
$env:ELYTRON_TOOL_ADDONS=""C:\custom.jar""
{code}

* run this command
{code}
PowerShell -ExecutionPolicy Bypass -File elytron-tool.ps1 credential-store --add secret_alias --password pass123 --create -x secret_password -l 001.jceks --type CustomTestCredentialStore --debug
Exception encountered executing the command:
java.security.NoSuchAlgorithmException
at org.wildfly.security.credential.store.CredentialStore.getInstance(CredentialStore.java:80) 
at
org.wildfly.security.tool.CredentialStoreCommand.execute(CredentialStoreCommand.java:188
at org.wildfly.security.tool.ElytronTool.main(ElytronTool.java:81)
{code}


*Suggestion to improve:*
For me works one of these changes in elytron-tool.ps1 script
# if (Test-Path env:ELYTRON_TOOL_ADDONS) { $ELYTRON_TOOL_ADDONS=(Get-ChildItem Env:ELYTRON_TOOL_ADDONS).value }
# $ELYTRON_TOOL_ADDONS=$env:ELYTRON_TOOL_ADDONS

",2017/08/31 4:48 AM
WFCORE-3203,"There seems to be a synchronization issue in the WildFly TestRunner ({{Server}} class) in the wildfly-core testuite.

I'm getting a {{NullPointerException}} intermittently during server stop:

{noformat}
Exception in thread ""Thread-5"" java.lang.NullPointerException
	at org.wildfly.core.testrunner.Server.lambda$stop$0(Server.java:205)
	at java.lang.Thread.run(Thread.java:748)
{noformat}

This is a testsuite issue which doesn't affect the test results themselves. Nevertheless it would be better to have clean runs without NPEs.",2017/08/23 7:16 AM
WFCORE-3192,"Starting a server and provoking a marshaling of the model without any real change on the default configuration files shouldn't result in a different files (with empty lines).
Reproducer:
* start the server or domain
* add and remove a system property using the CLI
* diff the resulting configuration file with the initial one.",2017/08/17 9:49 AM
WFCORE-3190,"CLI autocompletion behavior wrongly depends on space characters used in front of an attribute name.

See Steps to reproduce for details.",2017/08/16 6:54 AM
WFCORE-3189,"As stated in: https://issues.jboss.org/browse/JBEAP-12186?focusedCommentId=13444795&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13444795

OTOH I can see ""ICU License"" external link is wrong - should be https://svn.apache.org/repos/asf/xerces/java/tags/Xerces-J_2_11_0/LICENSE.icu4j.html (or http://source.icu-project.org/repos/icu/tags/release-50-1-2/icu4j/main/shared/licenses/license.html)
Local copy have to be updated accordingly.",2017/08/16 6:44 AM
WFCORE-3184,"Unused controllingThread after PR #2694 - https://github.com/wildfly/wildfly-core/pull/2694
",2017/08/15 9:52 AM
WFCORE-3183,"I am unable to connect with jboss-cli.sh using GS2-KRB5-PLUS. This is not duplicity to JBEAP-12688. In this case even SASL client is not created.

In server.log I see 
{code}
17:25:10,564 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Initialized connection from /127.0.0.1:37230 to /127.0.0.1:9993 with options {org.jboss.remoting3.RemotingOptions.SASL_PROTOCOL=>remote}
17:25:10,564 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Accepted connection from /127.0.0.1:37230 to localhost.localdomain/127.0.0.1:9993
17:25:10,564 TRACE [org.jboss.remoting.remote] (management I/O-2) Setting read listener to org.jboss.remoting3.remote.ServerConnectionOpenListener$Initial@2cb6a081
17:25:10,564 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No buffers in queue for message header
17:25:10,564 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Allocated fresh buffers
17:25:10,564 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No read bytes available
17:25:10,565 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Sent 28 bytes
17:25:10,565 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Flushed channel
17:25:10,576 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No buffers in queue for message header
17:25:10,577 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Allocated fresh buffers
17:25:10,577 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Received 56 bytes
17:25:10,577 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Received message java.nio.HeapByteBuffer[pos=0 lim=52 cap=8192]
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Received java.nio.HeapByteBuffer[pos=0 lim=52 cap=8192]
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capabilities request
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capability: version 1
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capability: remote endpoint name ""cli-client""
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capability: message close protocol supported
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capability: remote version is ""5.0.0.CR5-redhat-1""
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capability: remote channels in is ""40""
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capability: remote channels out is ""40""
17:25:10,577 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Server received capability: authentication service
17:25:10,580 TRACE [org.jboss.remoting.remote.server] (management I/O-2) No EXTERNAL mechanism due to unverified SSL peer
17:25:10,583 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Added mechanism GS2-KRB5-PLUS
17:25:10,583 TRACE [org.jboss.remoting.remote.server] (management I/O-2) Added mechanism PLAIN
17:25:10,583 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No buffers in queue for message header
17:25:10,583 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Allocated fresh buffers
17:25:10,583 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No read bytes available
17:25:10,583 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Sent 88 bytes
17:25:10,583 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Flushed channel
17:25:10,637 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No buffers in queue for message header
17:25:10,637 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Allocated fresh buffers
17:25:10,637 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No read bytes available
17:25:10,637 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No buffers in queue for message header
17:25:10,637 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Allocated fresh buffers
17:25:10,637 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No read bytes available
17:25:10,638 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) No buffers in queue for message header
17:25:10,638 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Allocated fresh buffers
17:25:10,638 TRACE [org.jboss.remoting.remote.connection] (management I/O-2) Received EOF
17:25:10,638 TRACE [org.jboss.remoting.remote] (management I/O-2) Received connection end-of-stream
17:25:10,971 INFO  [org.jboss.eapqe.krbldap.utils.CustomCLIExecutor] (main) CLI executor output:
17:25:10,971 INFO  [org.jboss.eapqe.krbldap.utils.CustomCLIExecutor] (main) Failed to connect to the controller: Unable to authenticate against controller at localhost.localdomain:9993: Authentication failed: none of the mechanisms presented by the server (GS2-KRB5-PLUS, PLAIN) are supported
{code}

In jboss-cli.log I see.
{code}
17:14:21,557 TRACE [org.wildfly.security] Created SaslClient [null] for mechanisms [GS2-KRB5-PLUS]
17:14:21,557 TRACE [org.jboss.remoting.remote.connection] Connection error detail: javax.security.sasl.SaslException: Authentication failed: none of the mechanisms presented by the server (GS2-KRB5-PLUS, PLAIN) are supported
        at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:438)
        at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:242)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
        at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)
        at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:89)
        at org.xnio.nio.WorkerThread.run(WorkerThread.java:571)

17:14:21,558 DEBUG [org.jboss.remoting.remote.connection] JBREM000200: Remote connection failed: javax.security.sasl.SaslException: Authentication failed: none of the mechanisms presented by the server (GS2-KRB5-PLUS, PLAIN) are supported
17:14:21,559 TRACE [org.jboss.remoting.endpoint] Registered exception result: javax.security.sasl.SaslException: Authentication failed: none of the mechanisms presented by the server (GS2-KRB5-PLUS, PLAIN) are supported
        at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:438)
        at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:242)
        at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)
        at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)
        at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:89)
        at org.xnio.nio.WorkerThread.run(WorkerThread.java:571)
{code}
",2017/08/14 1:46 PM
WFCORE-3180,"Lots of things like this:

@Message(id = 910, value = ""Password cannot be resolved for key-store \""%s\"""")

Use ' instead of \"".  If the string ends up in a DMR ModelNode, which it often does, the output looks bad when double quotes are present.

For this ModelNode

ModelNode node = new ModelNode(""Password cannot be resolved for key-store \""%s\"""");
       
A call to node.toString() produces

""Password cannot be resolved for key-store \""%s\""""

node.asString() is better, but that requires a special call vs the standard Object.toString

Password cannot be resolved for key-store ""%s""

This is minor since we can try to ensure asString is used or perhaps even consider changing how toString works. But I think single quotes are a better practice.",2017/08/10 10:05 AM
WFCORE-3404,"Synchronization in audit endpoint implementations leads to a great performance drop.
We see the issue in {{FileAuditEndpoint.accept(EventPriority, String)}}, but similar code is also in the {{SyslogAuditEndpoint}}.

Check the attached recording (FlightRecorder) in jmc (Java Mission Control).

It can be seen in these tabs
- Threads > Contention
- Threads > Thread Dumps
- Threads > Lock Instances",2017/08/09 2:42 AM
WFCORE-6428,"mvn -Dcoverage package

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test (default-test) on project wildfly-protocol: There are test failures.
[ERROR]
[ERROR] Please refer to /Users/cfang/dev/wildfly-core/protocol/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] The forked VM terminated without properly saying goodbye. VM crash or System.exit called?
[ERROR] Command was /bin/sh -c cd /Users/cfang/dev/wildfly-core/protocol && /Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home/bin/java --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED -ea -Duser.region=US -Duser.language=en -Duser.timezone=America/Chicago -XX:MaxMetaspaceSize=256m '-javaagent:/Users/cfang/.m2/repository/org/jacoco/org.jacoco.agent/0.8.0/org.jacoco.agent-0.8.0-runtime.jar=destfile=/Users/cfang/dev/wildfly-core/protocol/target/jacoco.exec,append=true,includes=*,excludes=org.jboss.as.test.*,output=file' -Djava.io.tmpdir=/Users/cfang/dev/wildfly-core/protocol/target -jar /Users/cfang/dev/wildfly-core/protocol/target/surefire/surefirebooter13152281074404212016.jar /Users/cfang/dev/wildfly-core/protocol/target/surefire 2023-07-10T11-30-15_508-jvmRun1 surefire2092289953904338983tmp surefire_011885539450149363011tmp
[ERROR] Error occurred in starting fork, check output in log
[ERROR] Process Exit Code: 134
[ERROR] org.apache.maven.surefire.booter.SurefireBooterForkException: The forked VM terminated without properly saying goodbye. VM crash or System.exit called?",2023/07/10 6:47 PM
WFCORE-6425,"In the domain testsuite, several of the domain xml files use the following remoting configuration:

{code:xml}
            <subsystem xmlns=""urn:jboss:domain:remoting:4.0"">
                <http-connector name=""http-remoting-connector"" connector-ref=""default"" sasl-authentication-factory=""application-sasl-authentication""/>
            </subsystem>
{code}

However, this requires a HTTP upgrade registry supplied by an Undertow listener not provided by the configuration.

This causes the following errors on every server boot:
{noformat}
08:49:21,930 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""remoting""),
    (""http-connector"" => ""http-remoting-connector"")
]) - failure description: {
    ""WFLYCTL0412: Required services that are not installed:"" => [""jboss.http-upgrade-registry.default""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.remoting-http-upgrade-service.http-remoting-connector is missing [jboss.http-upgrade-registry.default]""]
}
08:49:21,937 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report
WFLYCTL0184:    New missing/unsatisfied dependencies:
      service jboss.http-upgrade-registry.default (missing) dependents: [service jboss.remoting.remoting-http-upgrade-service.http-remoting-connector] 
{noformat}

Switching these configurations to use a standard remoting connector resolves the problem.",2023/07/07 1:58 PM
WFCORE-6424,NoData,2023/07/05 9:10 AM
WFCORE-6421,"We have the following error on RHEL9 in test {{InterfaceManagementUnitTestCase}}:
{noformat}
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running org.jboss.as.server.test.InterfaceManagementUnitTestCase
[ERROR] Tests run: 3, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 1.812 s <<< FAILURE! - in org.jboss.as.server.test.InterfaceManagementUnitTestCase
[ERROR] testUpdateInterface(org.jboss.as.server.test.InterfaceManagementUnitTestCase)  Time elapsed: 0.028 s  <<< FAILURE!
java.lang.AssertionError: Operation outcome is failed ""WFLYCTL0379: System boot is in process; execution of remote management operations is not currently available""
        at org.junit.Assert.fail(Assert.java:89)
        at org.jboss.as.server.test.InterfaceManagementUnitTestCase.executeForResult(InterfaceManagementUnitTestCase.java:478)
        at org.jboss.as.server.test.InterfaceManagementUnitTestCase.testUpdateInterface(InterfaceManagementUnitTestCase.java:199)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
        at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
        at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
        at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
        at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
        at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
        at org.junit.runners.Suite.runChild(Suite.java:128)
        at org.junit.runners.Suite.runChild(Suite.java:27)
        at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
        at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
        at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
        at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
        at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
        at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

[ERROR] testInterfacesAlternatives(org.jboss.as.server.test.InterfaceManagementUnitTestCase)  Time elapsed: 0.02 s  <<< FAILURE!
java.lang.AssertionError:
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0379: System boot is in process; execution of remote management operations is not currently available""
}
        at org.junit.Assert.fail(Assert.java:89)
        at org.junit.Assert.assertTrue(Assert.java:42)
        at org.jboss.as.server.test.InterfaceManagementUnitTestCase.executeForServiceFailure(InterfaceManagementUnitTestCase.java:466)
        at org.jboss.as.server.test.InterfaceManagementUnitTestCase.testInterfacesAlternatives(InterfaceManagementUnitTestCase.java:184)
        ....
{noformat}

Note that a simple {{thread.sleep}} before the failing statement, is enough to make the issue go away.




",2023/07/04 8:56 AM
WFCORE-6391,Several license declarations are incorrect. Also about half of the license files that are being distributed are not actually linked to any artifact.,2023/06/12 4:36 PM
WFCORE-6386,"We've had cases reported of read-resource calls that cover large amounts or all of the resource tree using excessive peak memory. The algorithm needs to be updated to reduce peak memory use.

1) The biggest issue is operation execution is broken down to a series of steps (AbstractOperationContext$Step) that form a chain, and each step retains various state in order to allow it to handle any operation rollback and report the overall outcome for that step. But a step that does nothing but reads and uses the default no-op ResultHandler will not need the vast majority of that state, so we should work out how to let it be garbage collected while the operation is still executing.

2) Another issue is ReadResourceAssembly handler is copying ModelNode trees into the overall result node it is assembling, but it retains a ref to the copied-in node. Solving the first issue will allow the whole handler instance to be gc'd, but for very large reads, where the trees being copied in can be large, removing the ref to the copied in node immediately will allow it to be gc'd even earlier.

3) A third issue is ReadResourceAssemblyHandler copies any FilteredData.toModelNode() output into its response node. This information is only useful for the top level handler; for any child resource the data is just discarded, but not until the top level handler does it's assembly work and clears its state. If RBAC is enabled and the caller is not allowed to see a lot of data (e.g. caller is in Monitor role), the accumlated wasted memory can be very large. So don't copy such info into the response node for child resources.",2023/06/07 7:38 PM
WFCORE-6381,"ProcessNameReadAttributeHandler uses OperationContext.readResource(PathAddress.EMPTY_ADDRESS) instead of readResource(PathAddress.EMPTY_ADDRESS, false). This means the entire resource tree gets read and discarded just to read one node in the root resource.",2023/06/05 7:50 PM
WFCORE-6365,"Many subsystem utilize the RestartParentResourceAddHandler, RestartParentResourceRemoveHandler, and RestartParentWriteAttributeHandler to restart the services of the parent resource.  Users typically override the following method:

{code:java}
    protected void recreateParentService(OperationContext context, PathAddress parentAddress, ModelNode parentModel) throws OperationFailedException{
    }
{code}

However, in the cases:
{code:java}
org.wildfly.extension.undertow.CrawlerSessionManagementDefinition
org.wildfly.extension.undertow.JspDefinition
org.wildfly.extension.undertow.PersistentSessionsDefinition
org.wildfly.extension.undertow.AbstractSessionCookieDefinition
org.wildfly.extension.undertow.WebsocketsDefinition
{code}

... the parent service is installed via the CapabilityServiceTarget, which generates its ServiceName using the PathAddress of the current OperationContext.  However, the OperationContext parameter above refers to the operation of the child resource, not the parent.  Consequently, these use cases will result in broken behavior, since the reinstalled parent service will be install with an incorrect ServiceName.",2023/05/23 8:39 PM
WFCORE-6348,"Observed in WildFly 28.0.0.Final (Core 20.0.1.Final). Suppose you define a YAML config like so and pass it at startup using -y:
{code:java}
wildfly-configuration:
  system-propety:
    jboss.socket.binding.port-offset:
      value: 10000 {code}
Note the typo: propety instead of propeRty. Despite the error, WildFly boots normally and there is nothing in the log about the problem.

I've classified this as a bug because the document in wildfly-proposals says it is a hard requirement for this to fail:
{quote}If the YAML is incorrect: like defining an non-existing attribute or child resource we should fail.
{quote}
The PR for that document (#384) was never merged though, so I don't know if the thinking on this changed later. Personally, I agree with what the document says. An invalid XML config causes startup to fail, so invalid YAML should do the same. Or at least log some errors so the user knows there's a problem.",2023/05/10 4:31 PM
WFCORE-6342,"The `jmx-remoting` layer's dependency on `management` can not be optional as management needs to be present for it to register with the endpoint without getting the following error:

{code}
18:38:27,361 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""jmx""),
    (""remoting-connector"" => ""jmx"")
]) - failure description: {
    ""WFLYCTL0412: Required services that are not installed:"" => [""jboss.remoting.endpoint.management""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.jmx.remoting-connector-ref is missing [jboss.remoting.endpoint.management]""]
}
{code}

This was made optional when we had multiple management layers to choose from as a user would need to be able to exclude the default and add an alternative but we don't have that now.",2023/05/04 5:48 PM
WFCORE-6341,If an existing resource tries to update a MapAttributeDefinition it is not processed properly,2023/05/04 8:15 AM
WFCORE-6346,"We are facing this error in our app. Scenario is ejb over http call. Adding {{add-opens=java.base/java.net=ALL-UNNAMED}} on client side really helps to fix the issue. But I do not see java.net.InetSocketAddress used in application code. Also we did not see this error on previous versions of server and jdk with same application. Currently we are using jdk17 with wf28. This issue is created to discuss if {{--add-opens=java.base/java.net=ALL-UNNAMED}} jpms option should be added e.g. to server script or recommended on client side etc...

{code}
Exception in thread ""main"" java.lang.reflect.InaccessibleObjectException: Unable to make private void java.net.InetSocketAddress.readObject(java.io.ObjectInputStream) throws java.io.IOException,java.lang.ClassNotFoundException accessible: module java.base does not ""opens java.net"" to unnamed module @be64738"",
    ""   at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)"",
    ""   at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)"",
    ""   at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)"",
    ""   at java.base/java.lang.reflect.Method.setAccessible(Method.java:193)"",
    ""   at org.jboss.marshalling.reflect.JDKSpecific$SerMethods.<init>(JDKSpecific.java:138)"",
    ""   at org.jboss.marshalling.reflect.SerializableClass.<init>(SerializableClass.java:86)"",
    ""   at org.jboss.marshalling.reflect.SerializableClassRegistry$1.computeValue(SerializableClassRegistry.java:62)"",
    ""   at org.jboss.marshalling.reflect.SerializableClassRegistry$1.computeValue(SerializableClassRegistry.java:59)"",
    ""   at java.base/java.lang.ClassValue.getFromHashMap(ClassValue.java:228)"",
    ""   at java.base/java.lang.ClassValue.getFromBackup(ClassValue.java:210)"",
    ""   at java.base/java.lang.ClassValue.get(ClassValue.java:116)"",
    ""   at org.jboss.marshalling.reflect.SerializableClassRegistry.lookup(SerializableClassRegistry.java:83)"",
    ""   at org.jboss.marshalling.river.RiverUnmarshaller.doReadClassDescriptor(RiverUnmarshaller.java:1089)"",
    ""   at org.jboss.marshalling.river.RiverUnmarshaller.doReadNewObject(RiverUnmarshaller.java:1381)"",
    ""   at org.jboss.marshalling.river.RiverUnmarshaller.doReadObject(RiverUnmarshaller.java:298)"",
    ""   at org.jboss.marshalling.river.RiverUnmarshaller.doReadObject(RiverUnmarshaller.java:231)"",
    ""   at org.jboss.marshalling.AbstractObjectInput.readObject(AbstractObjectInput.java:41)"",
    ""   at org.wildfly.httpclient.ejb.HttpEJBReceiver.readAttachments(HttpEJBReceiver.java:462)"",
    ""   at org.wildfly.httpclient.ejb.HttpEJBReceiver$2.getResult(HttpEJBReceiver.java:212)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:620)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:551)"",
    ""   at org.jboss.ejb.protocol.remote.RemotingEJBClientInterceptor.handleInvocationResult(RemotingEJBClientInterceptor.java:57)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:622)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:551)"",
    ""   at org.jboss.ejb.client.TransactionPostDiscoveryInterceptor.handleInvocationResult(TransactionPostDiscoveryInterceptor.java:148)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:622)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:551)"",
    ""   at org.jboss.ejb.client.DiscoveryEJBClientInterceptor.handleInvocationResult(DiscoveryEJBClientInterceptor.java:130)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:622)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:551)"",
    ""   at org.jboss.ejb.client.NamingEJBClientInterceptor.handleInvocationResult(NamingEJBClientInterceptor.java:87)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:622)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:551)"",
    ""   at org.jboss.ejb.client.AuthenticationContextEJBClientInterceptor.call(AuthenticationContextEJBClientInterceptor.java:59)"",
    ""   at org.jboss.ejb.client.AuthenticationContextEJBClientInterceptor.handleInvocationResult(AuthenticationContextEJBClientInterceptor.java:52)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:622)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:551)"",
    ""   at org.jboss.ejb.client.TransactionInterceptor.handleInvocationResult(TransactionInterceptor.java:212)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:622)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.getResult(EJBClientInvocationContext.java:551)"",
    ""   at org.jboss.ejb.client.EJBClientInvocationContext.awaitResponse(EJBClientInvocationContext.java:1003)"",
    ""   at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:182)"",
    ""   at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:116)"",
    ""   at jdk.proxy2/jdk.proxy2.$Proxy3.increment(Unknown Source)"",
{code}
",2023/05/03 7:25 AM
WFCORE-6338,"wildfly-configuration:
  interface:
    multicast:
      inet-address: '${node0}'

This will fail because it will try to set *inet-address: '${node0}'* as the value of the attribute multicast of the interface resource.",2023/05/02 1:32 PM
WFCORE-6309,"The headers in all source files are in the ""or later"" form:

{noformat}
 * This is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
{noformat}",2023/04/17 12:07 PM
WFCORE-6297,"Whoever does this please double check, but I think when the OperationContext createResource or various addResource methods are called to add an already existing resource, OperationFailedRuntimeException is thrown, not IllegalStateException.",2023/04/07 2:23 PM
WFCORE-6291,"quote from [Jakarta Authorization spec 2.1|https://jakarta.ee/specifications/authorization/2.1/jakarta-authorization-spec-2.1.html#a721]:
{quote}
h5. 4.6.1.3. HttpServletRequest Policy Context Handler
All Jakarta Servlet containers must register a {{PolicyContextHandler}} whose {{getContext}} method returns a {{jakarta.servlet.http.HttpServletRequest}} object when invoked with the key “jakarta.servlet.http.HttpServletRequest”. When this handler is activated, the container must return the {{HttpServletRequest}} object corresponding to the component request being processed by the container.

 
{quote}
This is working fine in WildFly 26 
{code:java}
PolicyContext.getContext(""javax.servlet.http.HttpServletRequest""){code}
 

but not in WildFly 27 (I updated the above string to look-up for jakarta, instead of javax).

 

Found [this commit|https://github.com/wildfly/wildfly/commit/e5e9b1131a95872797aadde46c922228210d9e4b], which removes the _PolicyContextHandler_ registration from {_}UndertowService.start(final StartContext context){_}. I don't know if the removal of the _PolicyContextHandler_ was intentional or not. If it was intentional, I suppose there are some mechanisms to activate the handler for HttpServletRequest, but I only found [this documentation|https://docs.jboss.org/author/display/WFLY/Elytron%20and%20Java%20Authorization%20Contract%20for%20Containers%20(JACC).html], that indeed activates some handlers (javax.security.auth.Subject.container & org.wildfly.security.auth.server.SecurityIdentity), but no HttpServletRequest.

 

Attached you can find a simple maven project I used to reproduce the issue.

For WildFly 26, build with ""mvn -P wildfly-26""

For WildFly 27, build with ""mvn -P wildfly-27"" (you also need to uncomment the WildFly 27 jakarta imports from {_}HelloServler.java{_})

 

For convenience, I also attached the WARs for WildFly 26 & 27.",2023/03/31 10:21 AM
WFCORE-6281,"On the latest PRs, this test case has failed constantly with the following error trace:

 
{noformat}
[11:04:04]F:         [org.jboss.as.logging.RootSubsystemOperationsTestCase] RootSubsystemOperationsTestCase
[11:04:04]F:             [RootSubsystemOperationsTestCase] java.nio.file.FileSystemException: C:\BuildAgent\work\aa7b981af3f49e3c\logging\target\logs\another.log: The process cannot access the file because it is being used by another process.[11:04:04]F:             [RootSubsystemOperationsTestCase] java.nio.file.FileSystemException: 
C:\BuildAgent\work\aa7b981af3f49e3c\logging\target\logs\another.log: The process cannot access the file because it is being used by another process.    at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:92)
    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)
    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)
    at java.base/sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:274)
    at java.base/sun.nio.fs.AbstractFileSystemProvider.delete(AbstractFileSystemProvider.java:105)
    at java.base/java.nio.file.Files.delete(Files.java:1142)
    at org.jboss.as.logging.AbstractLoggingSubsystemTest$1.visitFile(AbstractLoggingSubsystemTest.java:504)
    at org.jboss.as.logging.AbstractLoggingSubsystemTest$1.visitFile(AbstractLoggingSubsystemTest.java:501)
    at java.base/java.nio.file.Files.walkFileTree(Files.java:2725)
    at java.base/java.nio.file.Files.walkFileTree(Files.java:2797)
    at org.jboss.as.logging.AbstractLoggingSubsystemTest.clearDirectory(AbstractLoggingSubsystemTest.java:501)
    at org.jboss.as.logging.AbstractOperationsTestCase.setupLoggingDir(AbstractOperationsTestCase.java:53)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
    at org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:27)
    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
    at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
    at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418){noformat}",2023/03/31 9:36 AM
WFCORE-6261,org.jboss.as.test.manualmode.management.persistence.YamlExtensionTestCase is failing ~ 20% of the time.,2023/03/09 9:42 AM
WFCORE-6260,"In [TestModule.isImmutableModulePath|https://github.com/wildfly/wildfly-core/blob/20.0.0.Beta6/testsuite/shared/src/main/java/org/jboss/as/test/module/util/TestModule.java#L322] method, it takes a String parameter:
{code:java}
    private static boolean isImmutableModulePath(String path) {
        return path.contains(ILLEGAL_BUILD_DIR) || path.contains(ILLEGAL_DIST_DIR);
    }
{code}
 

, which actually comes from settings in the pom.xml, like:
{code:xml}
<configuration>
    <systemPropertyVariables>
        <!-- Override the standard module path that points at the shared module set from the dist -->
        <module.path>${project.build.directory}/wildfly/modules</module.path>
    </systemPropertyVariables>
</configuration>
{code}
which has '{*}/{*}' as the file separatorChar, this has problem in Windows platform that it failed to check which module.path to use in the test suites, it is supposed to use the one '{+}target/modules{+}', but that may lead to use the '{+}<wildfly-root-src>/build/target/wildfly-xxx/modules{+}' instead, which may affect other tests if the test module fails to get deleted.

 ",2023/03/08 3:53 AM
WFCORE-6244,"The {{mapped-role-mapper}} attribute should support expressions, but does not due to the use of a string -> list of strings mapping. [MapAttributeDefinition|https://github.com/wildfly/wildfly-core/blob/fb9e8f58fbe32ea816aaabdc084a653406d878ff/controller/src/main/java/org/jboss/as/controller/MapAttributeDefinition.java#L165] only supports expressions for the values of the map, so it does not check the keys or the strings nested within the list. The attribute should be changed to not use a {{MapAttributeDefinition.}}",2023/02/21 9:37 PM
WFCORE-6214,"The test HelpSupportTestCase#testStandalone is flaky because it calls {{SynopsisGenerator which uses a HashSet}} as its data structure for the conflicts object. When comparing the conflicts object with the expected test results with {{assertEquals}} the test is flaky as {{HashSet does not maintain order. Fix: changed the conflicts}} and {{conflicts2}} objects from {{HashSet}} to {{LinkedHashSet}} in method {{SynopsisGenerator#addSynopsisOption(SynopsisOption).}}

 

The test BootScriptInvokerTestCase is flaky becauses it uses {{a HashSet}} as its data structure for the echos object. When comparing the echos object with the expected test results with {{assertEquals}} the test is flaky as {{HashSet does not maintain order. Fix: changed the echos}} object from {{HashSet}} to {{LinkedHashSet}} in method.",2023/01/30 3:26 AM
WFCORE-6213,"When running Wildfly (eg via standalone.sh) on system with grep 3.8 following warning is displayed:

{{grep: warning: stray \ before -}}
",2023/01/27 4:46 PM
WFCORE-6202,"When using system Java on the IBM i platform, the `standalone.sh` script fails. The error indicates that `-server` is not a recognized option (the system Java implementation indeed does not support this option)",2023/01/19 8:30 PM
WFCORE-6201,"The element _syslog-format_ used by syslog-handler in the logging subsystem should not be required. It defaults to RFC5424. Also, without that element xml validation fails (if you want to use a formatter).

Suggested solution:

The minimal fix would be to add {*}minOccurs={*}{*}""0{*}*""* for the _syslog-format_ element in

https://github.com/wildfly/wildfly-core/blob/main/logging/src/main/resources/schema/jboss-as-logging_8_0.xsd",2023/01/16 1:34 PM
WFCORE-6205,"As explained in section 16 of the WildFly Elytron Security guide, encrypted expressions have two forms: one with a resolver name and one without. In the latter case, the default resolver is supposed to be used. But that does not seem to work for encrypted expressions in system properties.

With this in the Elytron subsystem:
{code:xml}
            <expression-resolver default-resolver=""tpm"">
                <resolver name=""tpm"" credential-store=""tpm"" secret-key=""primary""/>
            </expression-resolver> {code}
I did this as a simple test:
{code:java}
    <system-properties>
        <property name=""jboss.bind.address"" value=""${ENC::RUxZAUMQM/nQVZekEP5bBFwdDkHummKGlVoMys1136PWnzwH3X4=}""/>
    </system-properties> {code}
WildFly fails to start. This error appears in the log, implying that WildFly looked for a system property named ENC and then used the ""default"" (after the first colon) because that did not exist:
{code:java}
2022-11-15 13:12:25,694 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""interface"" => ""public"")]) - failure description: ""WFLYCTL0101: Invalid address ${jboss.bind.address:127.0.0.1} (:RUxZAUMQM/nQVZekEP5bBFwdDkHummKGlVoMys1136PWnzwH3X4=: invalid IPv6 address)""
{code}
However, WildFly starts correctly if I specify the resolver name:
{code:java}
    <system-properties>
        <property name=""jboss.bind.address"" value=""${ENC::tpm:RUxZAUMQM/nQVZekEP5bBFwdDkHummKGlVoMys1136PWnzwH3X4=}""/>
    </system-properties> {code}",2023/01/10 4:59 PM
WFCORE-6186,"When i add JaasRealm with jaas-conf configured with ""relative-to"", like ...

!image-2022-12-23-23-17-21-817.png!

Wildfly cannot start with error, like...

!image-2022-12-23-23-19-43-209.png!

 

Configuration without ""relative-to"" but with absolute path to jass-conf file working ok!

 ",2022/12/23 8:19 PM
WFCORE-6177,"These test cases are failing constantly on the test suite.

 

org.wildfly.core.test.standalone.mgmt.events.ProcessStateListenerTestCase.testListenerStartInAdminOnly:
{noformat}
java.nio.charset.MalformedInputException: Input length = 1
  at java.base/java.nio.charset.CoderResult.throwException(CoderResult.java:274)
  at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:339)
  at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
  at java.base/java.io.InputStreamReader.read(InputStreamReader.java:181)
  at java.base/java.io.BufferedReader.fill(BufferedReader.java:161)
  at java.base/java.io.BufferedReader.readLine(BufferedReader.java:326)
  at java.base/java.io.BufferedReader.readLine(BufferedReader.java:392)
  at org.jboss.as.test.manualmode.logging.AbstractLoggingTestCase.checkLogs(AbstractLoggingTestCase.java:326)
  at org.wildfly.core.test.standalone.mgmt.events.ProcessStateListenerTestCase.assertLogContains(ProcessStateListenerTestCase.java:440)
  at org.wildfly.core.test.standalone.mgmt.events.ProcessStateListenerTestCase.testListenerStartInAdminOnly(ProcessStateListenerTestCase.java:191)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.base/java.lang.reflect.Method.invoke(Method.java:566)
  at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
  at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
  at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
  at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
  at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.wildfly.core.testrunner.WildFlyRunner.run(WildFlyRunner.java:174)
  at org.junit.runners.Suite.runChild(Suite.java:128)
  at org.junit.runners.Suite.runChild(Suite.java:27)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
  at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
  at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
  at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
  at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
------- Stdout: -------
07:33:47,536 INFO  [org.wildfly.core.testrunner.Server] (main) Starting container with: C:\Java\jdk11\bin\java -D[Standalone] -Dorg.jboss.byteman.verbose=true -Dmaven.repo.local=C:\BuildAgent\system\jetbrains.maven.runner\maven.repo.local-bt358 -Xmx512m -XX:MetaspaceSize=128m --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED -Djboss.dist=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode/target/wildfly-core -Djava.io.tmpdir=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true -server -Dts.timeout.factor=100 -Djbossas.ts.dir=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode -ea --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED --add-modules=java.se -Djboss.home.dir=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core -Djboss.server.base.dir=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\standalone -Djboss.server.log.dir=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\standalone\log -Djboss.server.config.dir=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\standalone\configuration -Dorg.jboss.boot.log.file=C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\standalone\log\server.log -Dlogging.configuration=file:C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\standalone\configuration\logging.properties -jar C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\jboss-modules.jar -mp C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\modules org.jboss.as.standalone --admin-only -c=standalone.xml -bmanagement=::1 -Djboss.http.port=8080 -Djboss.bind.address=::1 -D[Standalone]
07:33:48,443 INFO  [org.jboss.modules] (main) JBoss Modules version 2.1.0.Final
07:33:49,054 INFO  [org.jboss.msc] (main) JBoss MSC version 1.5.0.Beta4
07:33:49,067 INFO  [org.jboss.threads] (main) JBoss Threads version 2.4.0.Final
07:33:49,301 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0049: WildFly Core 20.0.0.Beta5-SNAPSHOT starting
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.wildfly.extension.elytron.SSLDefinitions (jar:file:/C:/BuildAgent/system/jetbrains.maven.runner/maven.repo.local-bt358/org/wildfly/core/wildfly-elytron-integration/20.0.0.Beta5-SNAPSHOT/wildfly-elytron-integration-20.0.0.Beta5-SNAPSHOT.jar!/) to method com.sun.net.ssl.internal.ssl.Provider.isFIPS()
WARNING: Please consider reporting this to the maintainers of org.wildfly.extension.elytron.SSLDefinitions
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
07:33:50,327 INFO  [org.wildfly.security] (ServerService Thread Pool -- 6) ELY00001: WildFly Elytron version 2.0.0.Final
07:33:50,761 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
07:33:50,794 INFO  [org.xnio] (MSC service thread 1-7) XNIO version 3.8.8.Final
07:33:50,810 INFO  [org.xnio.nio] (MSC service thread 1-7) XNIO NIO Implementation Version 3.8.8.Final
07:33:50,962 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-1) WFLYELY00023: KeyStore file 'C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\native-if-workdir\server.truststore' does not exist. Used blank.
07:33:50,981 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-6) WFLYELY00023: KeyStore file 'C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\standalone\configuration\application.keystore' does not exist. Used blank.
07:33:51,014 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-7) WFLYELY01084: KeyStore C:\BuildAgent\work\aa7b981af3f49e3c\testsuite\manualmode\target\wildfly-core\standalone\configuration\application.keystore not found, it will be auto-generated on first use with a self-signed certificate for host localhost
07:33:51,026 INFO  [org.jboss.remoting] (MSC service thread 1-2) JBoss Remoting version 5.0.27.Final
07:33:51,103 INFO  [org.jboss.as.patching] (MSC service thread 1-4) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
07:33:51,200 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-7) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
07:33:51,474 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0212: Resuming server
07:33:51,488 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://[::1]:9990/management
07:33:51,488 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled
07:33:51,491 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 20.0.0.Beta5-SNAPSHOT started in 3655ms - Started 75 of 81 services (20 services are lazy, passive or on-demand) - Server configuration file in use: standalone.xml
07:33:51,886 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""core-management""),
    (""process-state-listener"" => ""wrong-module-listener"")
]) - failure description: ""WFLYCM0006: Error to load module non.existing.module""
07:33:51,893 ERROR [org.wildfly.core.testrunner.ManagementClient] (main) Operation {
    ""operation"" => ""add"",
    ""address"" => [
        (""subsystem"" => ""core-management""),
        (""process-state-listener"" => ""wrong-module-listener"")
    ],
    ""class"" => ""org.wildfly.test.events.provider.TestListener"",
    ""module"" => ""non.existing.module"",
    ""properties"" => [(""file"" => ""C:\\BuildAgent\\work\\aa7b981af3f49e3c\\testsuite\\manualmode\\target\\notifications12824957525545660242"")],
    ""timeout"" => 5
} did not succeed. Result was {
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCM0006: Error to load module non.existing.module"",
    ""rolled-back"" => true
}
07:33:51,965 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0272: Suspending server
07:33:51,967 ERROR [org.wildfly.extension.core.management] (management-handler-thread - 1) WFLYCM0003: Error invoking the process state listener fail-state-changed-listener: java.util.concurrent.ExecutionException: org.wildfly.test.events.provider.ListenerFailureException: failRunningStateChanged
  at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
  at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)
  at org.wildfly.extension.core-management@20.0.0.Beta5-SNAPSHOT//org.wildfly.extension.core.management.ProcessStateListenerService.suspendTransition(ProcessStateListenerService.java:237)
  at org.wildfly.extension.core-management@20.0.0.Beta5-SNAPSHOT//org.wildfly.extension.core.management.ProcessStateListenerService$1.suspendStarted(ProcessStateListenerService.java:117)
  at org.jboss.as.server@20.0.0.Beta5-SNAPSHOT//org.jboss.as.server.suspend.SuspendController.suspend(SuspendController.java:71)
  at org.jboss.as.server@20.0.0.Beta5-SNAPSHOT//org.jboss.as.server.operations.ServerShutdownHandler$1$1.handleResult(ServerShutdownHandler.java:152)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1570)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1552)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1509)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1482)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.executeResultHandlerPhase(AbstractOperationContext.java:910)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:896)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:803)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1433)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)
  at org.jboss.as.protocol@20.0.0.Beta5-SNAPSHOT//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
  at org.jboss.as.protocol@20.0.0.Beta5-SNAPSHOT//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
  at java.base/java.lang.Thread.run(Thread.java:829)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)
Caused by: org.wildfly.test.events.provider.ListenerFailureException: failRunningStateChanged
  at org.wildfly.test.events.provider//org.wildfly.test.events.provider.TestListener.runningStateChanged(TestListener.java:144)
  at org.wildfly.extension.core-management@20.0.0.Beta5-SNAPSHOT//org.wildfly.extension.core.management.ProcessStateListenerService.lambda$suspendTransition$2(ProcessStateListenerService.java:231)
  at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
  at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
  ... 6 more{noformat}
org.wildfly.core.test.standalone.mgmt.events.ProcessStateListenerTestCase.testTimeout:
{noformat}
java.nio.charset.MalformedInputException: Input length = 1
  at java.base/java.nio.charset.CoderResult.throwException(CoderResult.java:274)
  at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:339)
  at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
  at java.base/java.io.InputStreamReader.read(InputStreamReader.java:181)
  at java.base/java.io.BufferedReader.fill(BufferedReader.java:161)
  at java.base/java.io.BufferedReader.readLine(BufferedReader.java:326)
  at java.base/java.io.BufferedReader.readLine(BufferedReader.java:392)
  at org.jboss.as.test.manualmode.logging.AbstractLoggingTestCase.checkLogs(AbstractLoggingTestCase.java:326)
  at org.wildfly.core.test.standalone.mgmt.events.ProcessStateListenerTestCase.assertLogContains(ProcessStateListenerTestCase.java:440)
  at org.wildfly.core.test.standalone.mgmt.events.ProcessStateListenerTestCase.testTimeout(ProcessStateListenerTestCase.java:383)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.base/java.lang.reflect.Method.invoke(Method.java:566)
  at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
  at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
  at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
  at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
  at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.wildfly.core.testrunner.WildFlyRunner.run(WildFlyRunner.java:174)
  at org.junit.runners.Suite.runChild(Suite.java:128)
  at org.junit.runners.Suite.runChild(Suite.java:27)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
  at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
  at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
  at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
  at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
------- Stdout: -------
01:48:36,927 INFO  [org.jboss.threads] (main) JBoss Threads version 2.4.0.Final
01:48:37,296 INFO  [org.jboss.as.test.module.util.TestModule] (main) creating module in: C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\modules\org\wildfly\test\events\provider\main
01:48:37,456 INFO  [org.wildfly.core.testrunner.Server] (main) Starting container with: C:\Java\jdk11\bin\java -D[Standalone] -Dorg.jboss.byteman.verbose=true -Dmaven.repo.local=C:\BuildAgent\work\e9bccef30f12678d\store\repository -Xmx512m -XX:MetaspaceSize=128m --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED -Djboss.dist=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode/target/wildfly-core -Djava.io.tmpdir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true -server -Dts.timeout.factor=100 -Djbossas.ts.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode -ea --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED --add-modules=java.se -Djboss.home.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core -Djboss.server.base.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone -Djboss.server.log.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\log -Djboss.server.config.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration -Dorg.jboss.boot.log.file=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\log\server.log -Dlogging.configuration=file:C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration\logging.properties -jar C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\jboss-modules.jar -mp C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\modules org.jboss.as.standalone --admin-only -c=standalone.xml -bmanagement=::1 -Djboss.http.port=8080 -Djboss.bind.address=::1 -D[Standalone]
01:48:37,530 INFO  [org.jboss.remoting] (main) JBoss Remoting version 5.0.27.Final
01:48:37,565 INFO  [org.xnio] (main) XNIO version 3.8.8.Final
01:48:37,583 INFO  [org.xnio.nio] (main) XNIO NIO Implementation Version 3.8.8.Final
01:48:37,734 INFO  [org.wildfly.security] (main) ELY00001: WildFly Elytron version 2.0.0.Final
01:48:38,447 INFO  [org.jboss.modules] (main) JBoss Modules version 2.1.0.Final
01:48:39,030 INFO  [org.jboss.msc] (main) JBoss MSC version 1.5.0.Beta4
01:48:39,046 INFO  [org.jboss.threads] (main) JBoss Threads version 2.4.0.Final
01:48:39,224 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0049: WildFly Core 20.0.0.Beta5-SNAPSHOT starting
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.wildfly.extension.elytron.SSLDefinitions (jar:file:/C:/BuildAgent/work/e9bccef30f12678d/store/repository/org/wildfly/core/wildfly-elytron-integration/20.0.0.Beta5-SNAPSHOT/wildfly-elytron-integration-20.0.0.Beta5-SNAPSHOT.jar!/) to method com.sun.net.ssl.internal.ssl.Provider.isFIPS()
WARNING: Please consider reporting this to the maintainers of org.wildfly.extension.elytron.SSLDefinitions
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
01:48:40,133 INFO  [org.wildfly.security] (ServerService Thread Pool -- 6) ELY00001: WildFly Elytron version 2.0.0.Final
01:48:40,543 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
01:48:40,570 INFO  [org.xnio] (MSC service thread 1-8) XNIO version 3.8.8.Final
01:48:40,593 INFO  [org.xnio.nio] (MSC service thread 1-8) XNIO NIO Implementation Version 3.8.8.Final
01:48:40,744 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-6) WFLYELY00023: KeyStore file 'C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\native-if-workdir\server.truststore' does not exist. Used blank.
01:48:40,748 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-2) WFLYELY00023: KeyStore file 'C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration\application.keystore' does not exist. Used blank.
01:48:40,782 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-3) WFLYELY01084: KeyStore C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration\application.keystore not found, it will be auto-generated on first use with a self-signed certificate for host localhost
01:48:40,846 INFO  [org.jboss.as.patching] (MSC service thread 1-6) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
01:48:40,849 INFO  [org.jboss.remoting] (MSC service thread 1-8) JBoss Remoting version 5.0.27.Final
01:48:40,999 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-4) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
01:48:41,256 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0212: Resuming server
01:48:41,264 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://[::1]:9990/management
01:48:41,264 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled
01:48:41,265 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 20.0.0.Beta5-SNAPSHOT started in 3508ms - Started 74 of 80 services (20 services are lazy, passive or on-demand) - Server configuration file in use: standalone.xml
01:48:41,859 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0272: Suspending server
01:48:41,872 INFO  [org.jboss.as.server] (Management Triggered Shutdown) WFLYSRV0241: Shutting down in response to management operation 'shutdown'
01:48:41,956 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0050: WildFly Core 20.0.0.Beta5-SNAPSHOT stopped in 67ms
01:48:42,011 INFO  [org.wildfly.core.testrunner.Server] (main) Starting container with: C:\Java\jdk11\bin\java -D[Standalone] -Dorg.jboss.byteman.verbose=true -Dmaven.repo.local=C:\BuildAgent\work\e9bccef30f12678d\store\repository -Xmx512m -XX:MetaspaceSize=128m --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED -Djboss.dist=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode/target/wildfly-core -Djava.io.tmpdir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true -server -Dts.timeout.factor=100 -Djbossas.ts.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode -ea --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED --add-modules=java.se -Djboss.home.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core -Djboss.server.base.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone -Djboss.server.log.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\log -Djboss.server.config.dir=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration -Dorg.jboss.boot.log.file=C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\log\server.log -Dlogging.configuration=file:C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration\logging.properties -jar C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\jboss-modules.jar -mp C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\modules org.jboss.as.standalone --admin-only -c=standalone.xml -bmanagement=::1 -Djboss.http.port=8080 -Djboss.bind.address=::1 -D[Standalone]
01:48:42,783 INFO  [org.jboss.modules] (main) JBoss Modules version 2.1.0.Final
01:48:43,409 INFO  [org.jboss.msc] (main) JBoss MSC version 1.5.0.Beta4
01:48:43,423 INFO  [org.jboss.threads] (main) JBoss Threads version 2.4.0.Final
01:48:43,598 INFO  [org.jboss.as] (MSC service thread 1-3) WFLYSRV0049: WildFly Core 20.0.0.Beta5-SNAPSHOT starting
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.wildfly.extension.elytron.SSLDefinitions (jar:file:/C:/BuildAgent/work/e9bccef30f12678d/store/repository/org/wildfly/core/wildfly-elytron-integration/20.0.0.Beta5-SNAPSHOT/wildfly-elytron-integration-20.0.0.Beta5-SNAPSHOT.jar!/) to method com.sun.net.ssl.internal.ssl.Provider.isFIPS()
WARNING: Please consider reporting this to the maintainers of org.wildfly.extension.elytron.SSLDefinitions
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
01:48:44,543 INFO  [org.wildfly.security] (ServerService Thread Pool -- 6) ELY00001: WildFly Elytron version 2.0.0.Final
01:48:44,955 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
01:48:44,988 INFO  [org.xnio] (MSC service thread 1-6) XNIO version 3.8.8.Final
01:48:45,003 INFO  [org.xnio.nio] (MSC service thread 1-6) XNIO NIO Implementation Version 3.8.8.Final
01:48:45,203 INFO  [org.jboss.remoting] (MSC service thread 1-3) JBoss Remoting version 5.0.27.Final
01:48:45,201 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-8) WFLYELY00023: KeyStore file 'C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration\application.keystore' does not exist. Used blank.
01:48:45,199 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-4) WFLYELY00023: KeyStore file 'C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\native-if-workdir\server.truststore' does not exist. Used blank.
01:48:45,227 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-4) WFLYELY01084: KeyStore C:\BuildAgent\work\e9bccef30f12678d\testsuite\manualmode\target\wildfly-core\standalone\configuration\application.keystore not found, it will be auto-generated on first use with a self-signed certificate for host localhost
01:48:45,260 INFO  [org.jboss.as.patching] (MSC service thread 1-5) WFLYPAT0050: WildFly cumulative patch ID is: base, one-off patches include: none
01:48:45,418 WARN  [org.jboss.as.domain.http.api.undertow] (MSC service thread 1-7) WFLYDMHTTP0003: Unable to load console module for slot main, disabling console
01:48:45,589 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0212: Resuming server
01:48:45,598 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://[::1]:9990/management
01:48:45,599 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0054: Admin console is not enabled
01:48:45,601 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Core 20.0.0.Beta5-SNAPSHOT started in 3353ms - Started 75 of 81 services (20 services are lazy, passive or on-demand) - Server configuration file in use: standalone.xml
01:48:47,154 ERROR [org.wildfly.extension.core.management] (management-handler-thread - 1) WFLYCM0004: The process state listener timeout-listener took to much time to complete.: java.util.concurrent.TimeoutException
  at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)
  at org.wildfly.extension.core-management@20.0.0.Beta5-SNAPSHOT//org.wildfly.extension.core.management.ProcessStateListenerService.transition(ProcessStateListenerService.java:166)
  at org.wildfly.extension.core-management@20.0.0.Beta5-SNAPSHOT//org.wildfly.extension.core.management.ProcessStateListenerService.lambda$new$0(ProcessStateListenerService.java:107)
  at java.desktop/java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:341)
  at java.desktop/java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:333)
  at java.desktop/java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:266)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ControlledProcessStateService.stateChanged(ControlledProcessStateService.java:121)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ControlledProcessState.setRestartRequired(ControlledProcessState.java:188)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.restartRequired(AbstractOperationContext.java:1212)
  at org.jboss.as.server@20.0.0.Beta5-SNAPSHOT//org.jboss.as.server.operations.ServerProcessStateHandler.doExecute(ServerProcessStateHandler.java:71)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1433)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
  at org.jboss.as.controller@20.0.0.Beta5-SNAPSHOT//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)
  at org.jboss.as.protocol@20.0.0.Beta5-SNAPSHOT//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
  at org.jboss.as.protocol@20.0.0.Beta5-SNAPSHOT//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
  at java.base/java.lang.Thread.run(Thread.java:829)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)
01:48:47,160 ERROR [stderr] (ServerService Thread Pool -- 7) java.lang.InterruptedException: sleep interrupted
01:48:47,162 ERROR [stderr] (ServerService Thread Pool -- 7)   at java.base/java.lang.Thread.sleep(Native Method)
01:48:47,163 ERROR [stderr] (ServerService Thread Pool -- 7)   at org.wildfly.test.events.provider//org.wildfly.test.events.provider.TestListener.runtimeConfigurationStateChanged(TestListener.java:127)
01:48:47,163 ERROR [stderr] (ServerService Thread Pool -- 7)   at org.wildfly.extension.core-management@20.0.0.Beta5-SNAPSHOT//org.wildfly.extension.core.management.ProcessStateListenerService.lambda$transition$1(ProcessStateListenerService.java:160)
01:48:47,163 ERROR [stderr] (ServerService Thread Pool -- 7)   at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
01:48:47,164 ERROR [stderr] (ServerService Thread Pool -- 7)   at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
01:48:47,166 ERROR [stderr] (ServerService Thread Pool -- 7)   at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
01:48:47,166 ERROR [stderr] (ServerService Thread Pool -- 7)   at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
01:48:47,167 ERROR [stderr] (ServerService Thread Pool -- 7)   at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
01:48:47,167 ERROR [stderr] (ServerService Thread Pool -- 7)   at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
01:48:47,167 ERROR [stderr] (ServerService Thread Pool -- 7)   at java.base/java.lang.Thread.run(Thread.java:829)
01:48:47,168 ERROR [stderr] (ServerService Thread Pool -- 7)   at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)
01:48:47,389 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0272: Suspending server{noformat}",2022/12/15 10:43 AM
WFCORE-6157,"WFCORE-6156 fix of ContainerStateMonitor led to these failures in WildFly Core test suite.

[ERROR] Failures:
[ERROR]   SecondaryReconnectTestCase.test01_OrderedExtensionsAndDeployments:112->testReconnect:184 expected:<[ok]> but was:<[restart-required]>
[ERROR]   CoreResourceManagementTestCase.testCanFindServerRestartRequiredAfterChangingSocketBindingPortOffset:860 expected:<re[load]-required> but was:<re[start]-required>
[ERROR]   ServerRestartRequiredTestCase.testChangeGroup:211->assertServerState:371 expected:<r[unning]> but was:<r[estart-required]>
[ERROR] Errors:
[ERROR]   SecondaryReconnectTestCase.test03_DeploymentOverlays:131->testReconnect:145->createServer:273 » MgmtOperation
[ERROR]   IgnoredResourcesProfileCloneTestCase.afterClass:91 » Timeout Managed servers w...
[INFO]
[ERROR] Tests run: 582, Failures: 3, Errors: 2, Skipped: 20

During investigation of this regression I noticed the awaitStability() was interrupted (in OperationContextImpl.releaseStepLocks() method) and left server in inconsistent state.
That is the root cause of these regressions. 

I decided to forbid thread interruption of a thread awaiting container stability.
We will need to revisit if this feature is a MUST HAVE or we can live without it.
Notice it is not possible to block forever when awaitStability() is used with timeout configured.",2022/12/07 1:02 PM
WFCORE-6156,NoData,2022/12/07 12:40 PM
WFCORE-6155,"The systemd (example) service file:
{quote}wildfly-26.1.2.Final/docs/contrib/scripts/systemd/wildfly.service
{quote}
uses a legacy path in the PIDFile reference:
{quote}PIDFile=/var/run/wildfly/wildfly.pid
{quote}
This results in the systemd warning
{quote}/etc/systemd/system/wildfly.service:11: PIDFile= references a path below legacy directory /var/run/, updating /var/run/wildfly/wildfly.pid → /[run/wildfly/wildfly.pid|http://run/wildfly/wildfly.pid]
{quote}
The fix is trivial by changing the line
{quote}PIDFile=/var/run/wildfly/wildfly.pid
{quote}
to
{quote}PIDFile=/run/wildfly/wildfly.pid
{quote}",2022/12/06 2:17 PM
WFCORE-6146,"This is particularly problematic for socket channels, due to WFCORE-6145.

{noformat}
20:22:33,360 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""read-attribute"") failed - address: ([
    (""socket-binding-group"" => ""standard-sockets""),
    (""socket-binding"" => ""jgroups-tcp-fd"")
]): java.lang.NullPointerException
  at org.jboss.as.server@20.0.0.Beta3//org.jboss.as.server.services.net.BindingRuntimeHandlers$BoundAddressHandler.execute(BindingRuntimeHandlers.java:122)
  at org.jboss.as.server@20.0.0.Beta3//org.jboss.as.server.services.net.BindingRuntimeHandlers$AbstractBindingRuntimeHandler$1.execute(BindingRuntimeHandlers.java:65)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1433)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:449)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:260)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:260)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:254)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:237)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)
  at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
  at org.jboss.as.controller@20.0.0.Beta3//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)
  at org.jboss.as.protocol@20.0.0.Beta3//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
  at org.jboss.as.protocol@20.0.0.Beta3//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
  at java.base/java.lang.Thread.run(Thread.java:829)
  at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)
{noformat}",2022/11/30 12:00 AM
WFCORE-6145,"Consider the following code:

{code:java}
InetSocketAddress bindAddress = ...;
SocketBindingManager manager = ...;
SocketChannel channel = SocketChannel.open();
// channel is not yet bound
manager.getNamedRegistry().registerChannel(""foo"", channel);
// Bind channel
channel.bind(bindAddress);
System.out.println(manager.getManagedBinding(""foo"").getBindAddress());
{code}

Ideally, this would print the value of the bindAddress of the channel, however, it returns null.

This is because the registry reads the bind address eagerly, so if the channel is not bound until after it is registered, its ManagedBinding will never return the correct value.

This is problematic for JGroups, whose SocketFactory (that instruments socket binding manager registration) returns unbound channels.",2022/11/29 11:31 PM
WFCORE-6144,"JmxFacadeRbacEnabledTestCase tests fail intermittently due to an NPE accessing to the MBeanServer server instance value.

The error reason is related to the one described at WFCORE-6141, since the ServiceController.getValue() is problematic since there is no guarantee service has been fully configured.

The JmxFacadeRbacEnabledTestCase tests fails with almost similar traces like the following one:


{noformat}
java.lang.NullPointerException
  at org.jboss.as.jmx.rbac.JmxFacadeRbacEnabledTestCase$2.run(JmxFacadeRbacEnabledTestCase.java:501)
  at org.jboss.as.jmx.rbac.JmxFacadeRbacEnabledTestCase$2.run(JmxFacadeRbacEnabledTestCase.java:498)
  at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)
  at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)
  at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
  at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
  at org.jboss.as.jmx.rbac.JmxFacadeRbacEnabledTestCase.checkAddSensitive(JmxFacadeRbacEnabledTestCase.java:498)
  at org.jboss.as.jmx.rbac.JmxFacadeRbacEnabledTestCase.testAddAccessSensitiveWildcardResourceAsMonitor(JmxFacadeRbacEnabledTestCase.java:430)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.base/java.lang.reflect.Method.invoke(Method.java:566)
  at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
  at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
  at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
  at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
  at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.junit.runners.Suite.runChild(Suite.java:128)
  at org.junit.runners.Suite.runChild(Suite.java:27)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
  at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
  at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
  at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
  at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
------- Stdout: -------
14:13:26,732 INFO  (Controller Boot Thread) [org.jboss.as.controller] <ContainerStateMonitor.java:73> WFLYCTL0183: Service status report
WFLYCTL0448: 2 additional services are down due to their dependencies being missing or failed
{noformat}
",2022/11/29 10:51 AM
WFCORE-6141,"{{org.jboss.as.subsystem.test.otherservices.OtherServicesSubsystemTestCase.testOtherService}} fails intermitently with the following error trace:

{noformat}
java.lang.IllegalStateException
  at org.jboss.msc.value.InjectedValue.getValue(InjectedValue.java:50)
  at org.jboss.as.subsystem.test.otherservices.OtherServicesSubsystemTestCase.testOtherService(OtherServicesSubsystemTestCase.java:92)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.base/java.lang.reflect.Method.invoke(Method.java:566)
  at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
  at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
  at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
  at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
  at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.junit.runners.Suite.runChild(Suite.java:128)
  at org.junit.runners.Suite.runChild(Suite.java:27)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
  at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
  at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
  at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
  at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
{noformat}


{{org.jboss.as.subsystem.test.otherservices.OtherServicesSubsystemTestCase.testPath}} fails intermitently with the following error trace:


{noformat}
java.lang.IllegalStateException
  at org.jboss.msc.value.InjectedValue.getValue(InjectedValue.java:50)
  at org.jboss.as.subsystem.test.otherservices.OtherServicesSubsystemTestCase.testPath(OtherServicesSubsystemTestCase.java:230)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.base/java.lang.reflect.Method.invoke(Method.java:566)
  at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
  at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
  at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
  at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
  at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.junit.runners.Suite.runChild(Suite.java:128)
  at org.junit.runners.Suite.runChild(Suite.java:27)
  at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
  at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
  at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
  at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
  at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
  at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
  at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
  at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
  at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
  at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)  
{noformat}

 
",2022/11/28 10:21 AM
WFCORE-6135,"Currently some testsuite cases do fail with an error instead of a failure in Maven surefire terms. In JUnit tests the BeforeClass and AfterClass are called independet. One has to check preconditions in both, it's not correct to rely on state of BeforeClass in AfterClass. In any case a unit tests with a known assumption should fail with a failure at the earliest point.

UseCase where this came up:
I was trying to identify the issue where the LoggingSubSystem Configuration error was not showing up in the Stacktraces of the tests. For example this NPE was a follow up, but should have shown up earlier:
{code:java}
[ERROR] org.jboss.as.test.integration.domain.AdminOnlyModeTestCase  Time elapsed: 0 s  <<< ERROR!
  java.lang.NullPointerException
      at org.jboss.as.test.integration.domain.AdminOnlyModeTestCase.tearDownDomain(AdminOnlyModeTestCase.java:94)
      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
      at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      at java.base/java.lang.reflect.Method.invoke(Method.java:566)
      at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
{code}

Solution: In most cases it was possible to have Asserts  (@Before) or tearDown(@After) methods. Sometimes it requires checking for a started server.
The behaviour to break shall be kept. If it's a NPE at the moment, there shall be not a if(x != null) statement but an Assert.assertNotNull(x).
",2022/11/25 3:34 PM
WFCORE-6131,"The [AsyncFutureTask#get|https://github.com/jbossas/jboss-threads/blob/2.4.0.Final/src/main/java/org/jboss/threads/AsyncFutureTask.java#L268] throws an java.util.concurrent.ExecutionException if the state is ""FAILED"", and uses the Object result as cause. If the cause is null, the caller of get, usually a different thread, will only see it's own stacktrace calling get, but not the one of the root cause.

To ensure [AsyncFutureTask#setFailure|https://github.com/jbossas/jboss-threads/blob/2.4.0.Final/src/main/java/org/jboss/threads/AsyncFutureTask.java#L130] is called correctly with an cause, all places should be checked for null. In case of a missing exception a placeholder (in the correct thread) shall be set.",2022/11/22 8:53 AM
WFCORE-6130,"Currently a new Exception is created out of a message from the [o.j.as.s.ServerService#L440|https://github.com/wildfly/wildfly-core/blob/20.0.0.Beta2/server/src/main/java/org/jboss/as/server/ServerService.java#L440] by [o.j.as.s.BootstrapListener.java#L87|https://github.com/wildfly/wildfly-core/blob/20.0.0.Beta2/server/src/main/java/org/jboss/as/server/BootstrapListener.java#L87]

This happens even if a root cause could be chained from the previous catch [o.j.as.s.ServerService#L417|https://github.com/wildfly/wildfly-core/blob/20.0.0.Beta2/server/src/main/java/org/jboss/as/server/ServerService.java#L417]

In cases where logging is not available, it is impossible to read the root cause:

{code:java}
org.jboss.as.cli.CommandLineException: java.util.concurrent.ExecutionException: org.jboss.as.cli.CommandLineException: Cannot start embedded server
      at org.jboss.as.cli.impl.CommandContextImpl.execute(CommandContextImpl.java:944)
      at org.jboss.as.cli.impl.CommandContextImpl.handleLegacyCommand(CommandContextImpl.java:1939)
      at org.jboss.as.cli.impl.CommandContextImpl.handle(CommandContextImpl.java:881)

      at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:218)
      at org.jboss.as.test.integration.management.util.CLIWrapper.sendLine(CLIWrapper.java:244)
      at org.jboss.as.test.manualmode.management.cli.CLIEmbedServerTestCase.validateServerConnectivity(CLIEmbedServerTestCase.java:795)
      at org.jboss.as.test.manualmode.management.cli.CLIEmbedServerTestCase.validateServerConnectivity(CLIEmbedServerTestCase.java:787)
      at org.jboss.as.test.manualmode.management.cli.CLIEmbedServerTestCase.testStopServerOnTerminateSession(CLIEmbedServerTestCase.java:536)
      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
      at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      at java.base/java.lang.reflect.Method.invoke(Method.java:566)
      at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
      at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
      at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
      at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
      at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
      at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
      at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
      at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
      at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
      at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
      at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
      at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
      at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
      at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
      at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
      at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
      at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
      at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
      at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
      at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
      at org.junit.runners.Suite.runChild(Suite.java:128)
      at org.junit.runners.Suite.runChild(Suite.java:27)
      at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
      at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
      at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
      at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
      at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
      at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
      at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
      at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
      at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
      at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
      at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
      at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
      at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
      at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
      at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
      at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
      at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
  Caused by: java.util.concurrent.ExecutionException: org.jboss.as.cli.CommandLineException: Cannot start embedded server
      at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
      at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)
      at org.jboss.as.cli.impl.CommandExecutor.execute(CommandExecutor.java:732)
      at org.jboss.as.cli.impl.CommandExecutor.execute(CommandExecutor.java:713)
      at org.jboss.as.cli.impl.CommandContextImpl.lambda$handleLegacyCommand$4(CommandContextImpl.java:1940)
      at org.jboss.as.cli.impl.CommandContextImpl.execute(CommandContextImpl.java:931)
      ... 50 more
  Caused by: org.jboss.as.cli.CommandLineException: Cannot start embedded server
      at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:301)
      at org.jboss.as.cli.handlers.CommandHandlerWithHelp.handle(CommandHandlerWithHelp.java:89)
      at org.jboss.as.cli.impl.CommandExecutor$2.lambda$build$0(CommandExecutor.java:704)
      at org.jboss.as.cli.impl.CommandExecutor.lambda$execute$0(CommandExecutor.java:727)
      at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
      at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
      at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
      at java.base/java.lang.Thread.run(Thread.java:829)
  Caused by: java.lang.IllegalStateException: WFLYEMB0022: Cannot invoke 'start' on embedded process
      at org.wildfly.core.embedded.EmbeddedManagedProcessImpl.invokeOnServer(EmbeddedManagedProcessImpl.java:119)
      at org.wildfly.core.embedded.EmbeddedManagedProcessImpl.start(EmbeddedManagedProcessImpl.java:64)
      at org.jboss.as.cli.embedded.EmbedServerHandler.doHandle(EmbedServerHandler.java:243)
      ... 7 more
  Caused by: org.wildfly.core.embedded.EmbeddedProcessStartException: WFLYEMB0021: Cannot start embedded process
      at org.wildfly.embedded@20.0.0.Beta3-SNAPSHOT//org.wildfly.core.embedded.EmbeddedStandaloneServerFactory$StandaloneServerImpl.start(EmbeddedStandaloneServ
  erFactory.java:324)
      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
      at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      at java.base/java.lang.reflect.Method.invoke(Method.java:566)
      at org.wildfly.core.embedded.EmbeddedManagedProcessImpl.invokeOnServer(EmbeddedManagedProcessImpl.java:107)
      ... 9 more
  Caused by: java.util.concurrent.ExecutionException: JBTHR00005: Operation failed
      at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:253)
      at org.wildfly.embedded@20.0.0.Beta3-SNAPSHOT//org.wildfly.core.embedded.EmbeddedStandaloneServerFactory$StandaloneServerImpl.start(EmbeddedStandaloneServ  erFactory.java:305)
      ... 14 more
  Caused by: java.lang.Exception: WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details. - Server configura  tion file in use: standalone-cli.xml
      at org.jboss.as.server@20.0.0.Beta3-SNAPSHOT//org.jboss.as.server.BootstrapListener.bootFailure(BootstrapListener.java:87)
      at org.jboss.as.server@20.0.0.Beta3-SNAPSHOT//org.jboss.as.server.ServerService.boot(ServerService.java:440)
      at org.jboss.as.controller@20.0.0.Beta3-SNAPSHOT//org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:473)
      ... 1 more
{code}
",2022/11/21 7:06 PM
WFCORE-6129,"It is not possible to add integrity support to existing filesystem realm:
{noformat}
[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:add(path=fs-realm-users,relative-to=jboss.server.config.dir)
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:add-identity(identity=user1)
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:set-password(identity=user1, clear={password=""passwordUser1""})
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:add-identity-attribute(identity=user1, name=Roles, value=[""Admin"",""Guest""])
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/security-domain=exampleSecurityDomain:add(default-realm=exampleSecurityRealm,permission-mapper=default-permission-mapper,realms=[{realm=exampleSecurityRealm}])
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/security-domain=exampleSecurityDomain:read-identity(name=user1)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""name"" => ""user1"",
        ""attributes"" => {""Roles"" => [
            ""Admin"",
            ""Guest""
        ]},
        ""roles"" => [
            ""Guest"",
            ""Admin""
        ]
    }
}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystore:add(path=keystore, relative-to=jboss.server.config.dir, type=JKS, credential-reference={clear-text=secret})
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystore:generate-key-pair(alias=localhost,algorithm=RSA,key-size=1024,validity=365,distinguished-name=""CN=localhost"")
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystore:store()
{
    ""outcome"" => ""success"",
    ""result"" => undefined
}

[standalone@localhost:9990 /] batch
[standalone@localhost:9990 / #] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:write-attribute(name=key-store,value=exampleKeystore)
[standalone@localhost:9990 / #] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:write-attribute(name=key-store-alias,value=localhost)
[standalone@localhost:9990 / #] run-batch 
The batch executed successfully
process-state: reload-required 

[standalone@localhost:9990 /] reload
[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:update-key-pair()
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/security-domain=exampleSecurityDomain:read-identity(name=user1)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.RuntimeException: WFLYELY01005: Could not read identity [user1] from security domain [service org.wildfly.security.security-domain.exampleSecurityDomain]."",
    ""rolled-back"" => true
}
{noformat}


I suppose it's because of missing {{<principal/>}} in the XML

The realm with no integrity support
{noformat}
<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?><identity xmlns=""urn:elytron:1.0"">
<credentials>
<password algorithm=""clear"" format=""base64"">AXBhc3N3b3JkVXNlcjE=</password>
</credentials>
<attributes>
<attribute name=""Roles"" value=""Admin""/>
<attribute name=""Roles"" value=""Guest""/>
</attributes>
</identity>
{noformat}

The realm after adding the key pair:
{noformat}
<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?><identity xmlns=""urn:elytron:1.0"">
<credentials>
<password algorithm=""clear"" format=""base64"">AXBhc3N3b3JkVXNlcjE=</password>
</credentials>
<attributes>
<attribute name=""Roles"" value=""Admin""/>
<attribute name=""Roles"" value=""Guest""/>
</attributes>

<Signature xmlns=""http://www.w3.org/2000/09/xmldsig#""><SignedInfo><CanonicalizationMethod Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315""/><SignatureMethod Algorithm=""http://www.w3.org/2001/04/xmldsig-more#rsa-sha256""/><Reference URI=""""><Transforms><Transform Algorithm=""http://www.w3.org/2000/09/xmldsig#enveloped-signature""/></Transforms><DigestMethod Algorithm=""http://www.w3.org/2001/04/xmlenc#sha256""/><DigestValue>Vbi3IYFCvupI4/QjZV2es1K5eiF3jzIb+j2We/XOtPc=</DigestValue></Reference></SignedInfo><SignatureValue>AxBR67h95IDtwGEMKFQBp2FwWhSrlLeIQ0cKHtrmbJcnLTjvEn9LSTiEKL9f5DgvGmqy1VYjDkzX 
M5qrml7DwvzioJ5vg2ZInIEKcwzSY1ENpgdrY1Lo3NuQWtw6BGeEYbHx5ZSpv2X+z0L8b1rxWR5r 
iDtSSZ0gl0CwxMrys+w=</SignatureValue><KeyInfo><KeyValue><RSAKeyValue><Modulus>nqiJaKdlrkpVdobCyy0Xj7f3+hDTR9joednD7fkPtNGE/KmaaNMfC6vypr/9IonS1cE8EZcXSd7/ 
IA59XCQyVHo+Ul36NTITJwsOdBLMxwUmuw7p+lbbgo0E2JOkyZ1mN92E9+VTC+ZAxB51zOXzZpmd 
Afn8SF9QTWy0QNDDekM=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue></KeyValue></KeyInfo></Signature></identity>
{noformat}

A realm created with the integrity support from the beginning:
{noformat}
<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?><identity xmlns=""urn:elytron:identity:1.2"">
    <principal name=""user1""/>
    <credentials>
        <password algorithm=""clear"" format=""base64"">AXBhc3N3b3JkVXNlcjE=</password>
    </credentials>
    <attributes>
        <attribute name=""Roles"" value=""Admin""/>
        <attribute name=""Roles"" value=""Guest""/>
    </attributes>

    <Signature xmlns=""http://www.w3.org/2000/09/xmldsig#""><SignedInfo><CanonicalizationMethod Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315""/><SignatureMethod Algorithm=""http://www.w3.org/2001/04/xmldsig-more#rsa-sha256""/><Reference URI=""""><Transforms><Transform Algorithm=""http://www.w3.org/2000/09/xmldsig#enveloped-signature""/></Transforms><DigestMethod Algorithm=""http://www.w3.org/2001/04/xmlenc#sha256""/><DigestValue>AyZ5vqr8Tyy94coxXjUtKTJbpElLY25YxQPx4PpkDnk=</DigestValue></Reference></SignedInfo><SignatureValue>B+YIqMW5RWV/0Q20A6SBmrqFmE2+1UjULb4JSiEo68zEY/gsUK6XDVyEuNveVB6BEum1FX6FiREY&#13;
bW/zvsvgDNY59XYdUw3jfLH+qPlt/qQcjbjIwDpUa9TdTtpBCpgcINCXW5B7gtck7NVncbrAktXJ&#13;
kFj15pBHMD7oBop9unI=</SignatureValue><KeyInfo><KeyValue><RSAKeyValue><Modulus>nqiJaKdlrkpVdobCyy0Xj7f3+hDTR9joednD7fkPtNGE/KmaaNMfC6vypr/9IonS1cE8EZcXSd7/&#13;
IA59XCQyVHo+Ul36NTITJwsOdBLMxwUmuw7p+lbbgo0E2JOkyZ1mN92E9+VTC+ZAxB51zOXzZpmd&#13;
Afn8SF9QTWy0QNDDekM=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue></KeyValue></KeyInfo></Signature></identity>
{noformat}
",2022/11/21 3:55 PM
WFCORE-6125,"{{jboss-cli}} stops responding and server cannot be shut down when updating a key pair of a filesystem security realm in the following way:
{noformat}
[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystore:add(path=keystore, relative-to=jboss.server.config.dir, type=JKS, credential-reference={clear-text=secret})
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystore:generate-key-pair(alias=localhost,algorithm=RSA,key-size=1024,validity=365,distinguished-name=""CN=localhost"")
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystore:store()
{
    ""outcome"" => ""success"",
    ""result"" => undefined
}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:add(path=fs-realm-users,relative-to=jboss.server.config.dir, key-store=exampleKeystore, key-store-alias=localhost)
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:add-identity(identity=user1)
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:set-password(identity=user1, clear={password=""passwordUser1""})
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:add-identity-attribute(identity=user1, name=Roles, value=[""Admin"",""Guest""])
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/security-domain=exampleSecurityDomain:add(default-realm=exampleSecurityRealm,permission-mapper=default-permission-mapper,realms=[{realm=exampleSecurityRealm}])
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/security-domain=exampleSecurityDomain:read-identity(name=user1)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""name"" => ""user1"",
        ""attributes"" => {""Roles"" => [
            ""Admin"",
            ""Guest""
        ]},
        ""roles"" => [
            ""Guest"",
            ""Admin""
        ]
    }
}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystoreFSRealm:add(path=keystore, relative-to=jboss.server.config.dir, type=JKS, credential-reference={clear-text=secret})
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystoreFSRealm:generate-key-pair(alias=examplehost,algorithm=RSA,key-size=2048,validity=365,distinguished-name=""CN=examplehost"")
{""outcome"" => ""success""}

[standalone@localhost:9990 /] /subsystem=elytron/key-store=exampleKeystoreFSRealm:store()
{
    ""outcome"" => ""success"",
    ""result"" => undefined
}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:write-attribute(name=key-store, value=exampleKeystoreFSRealm)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:write-attribute(name=key-store-alias, value=examplehost)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}

[standalone@localhost:9990 /] /subsystem=elytron/filesystem-realm=exampleSecurityRealm:update-key-pair()
{noformat}
When we {{reload}} before calling {{{}update-key-pair{}}}, the procedure works as expected.",2022/11/16 8:09 AM
WFCORE-6122,"ContentRepositoryImpl.removeContent handles InterruptedException by calling Thread.interrupted(), which does nothing, since the exception already tells us the thread has been interrupted. Interruption should be handled by doing any needed cleanup and then calling Thread.currentThread().interrupt().",2022/11/15 5:10 PM
WFCORE-6121,"ContentRepositoryImpl has a sharable MessageDigest instance, access to which is (incompletely) controlled via synchronization. That limits the number of concurrent calls, e.g. for uploading different repository content.

The sharing is a nice to have thing, but it's not invalid to have more than 1 digest active at once, so do a bit of bookkeeping to use the shared instance if available and create a one-off instance otherwise.

Also fix the partially missing control of the shared digest object.",2022/11/15 5:04 PM
WFCORE-6090,"If capabilities required for initializing Elytron test cases are missing, a {{NullPointerException}} is thrown, instead of printing the error message, since capability failures do not throw an exception. Because Elytron test cases are not run in admin-only mode, these failures are not ignored and result in a subsystem boot failure. References:
 * [Failure in test case initialization|https://github.com/wildfly/wildfly-core/blob/9f5bcdafa59374549f7fd13dfbba72ea031bdaa1/elytron/src/test/java/org/wildfly/extension/elytron/AuthenticationClientTestCase.java#L33], when subsystem boot fails
 * [ModelTestKernelServicesImpl.getBootError()|https://github.com/wildfly/wildfly-core/blob/9f5bcdafa59374549f7fd13dfbba72ea031bdaa1/model-test/src/main/java/org/jboss/as/model/test/ModelTestKernelServicesImpl.java#L113-L115], returns a Throwable
 * [ModelTestModelControllerService.boot()|https://github.com/wildfly/wildfly-core/blob/9f5bcdafa59374549f7fd13dfbba72ea031bdaa1/model-test/src/main/java/org/jboss/as/model/test/ModelTestModelControllerService.java#L475-L478] only sets error if one is raised/thrown
 * [OperationContextImpl.validateCapabilities()|https://github.com/wildfly/wildfly-core/blob/9f5bcdafa59374549f7fd13dfbba72ea031bdaa1/controller/src/main/java/org/jboss/as/controller/OperationContextImpl.java#L309-L389] creates a logger message but doesn't throw an exception",2022/10/18 2:42 PM
WFCORE-6087,NoData,2022/10/12 7:30 PM
WFCORE-6062,NoData,2022/09/26 12:25 PM
WFCORE-5987,NoData,2022/08/09 10:18 AM
WFCORE-5984,"Modify description in request controller subsystem to proper sentence.

check:

/subsystem=request-controller:read-resource-description
{code}

{

    ""outcome"" => ""success"",
    ""result"" => {
        ""description"" => ""The request controller subsystem. Used for request limiting and graceful shutdown"",
        ""capabilities"" => [
         Unknown macro: \{             ""name"" => ""org.wildfly.request-controller"",             ""dynamic"" => false         }
],

         ""attributes"" => {
            ""active-requests"" =>
Unknown macro: \{                 ""type"" => INT,                 ""description"" => ""The number of requests that are currently running in the server"",                 ""expressions-allowed"" => false,                 ""required"" => false,                 ""nillable"" => true,                 ""access-type"" => ""metric"",                 ""storage"" => ""runtime""             }
,

            ""max-requests"" =>
Unknown macro: \{                 ""type"" => INT,                 ""description"" => ""The maximum number of all types of requests that can be running in a server at a time. Once this limit is hit any new requests will be rejected."",                 ""expressions-allowed"" => true,                 ""required"" => false,                 ""nillable"" => true,                 ""default"" => -1,                 ""access-type"" => ""read-write"",                 ""storage"" => ""configuration"",                 ""restart-required"" => ""all-services""             }
,

            ""track-individual-endpoints"" =>
Unknown macro: \{                 ""type"" => BOOLEAN,                 ""description"" => ""If this is true requests are tracked at an endpoint level, which will allow individual deployments to be suspended"",                 ""expressions-allowed"" => true,                 ""required"" => false,                 ""nillable"" => true,                 ""default"" => false,                 ""access-type"" => ""read-write"",                 ""storage"" => ""configuration"",                 ""restart-required"" => ""all-services""             }
        },

        ""operations"" => undefined,
        ""notifications"" => undefined,
        ""children"" => {}
    }
}

 
{code}",2022/08/05 5:23 PM
WFCORE-5970,"Before 19.0.0.Beta6, the server is able to start by using a configuration file that is a soft link to a configuration file that is located outside of the server configuration directory.

This issue is caused by WFCORE-5792  where additional restrictions were added to control where this file can be located.

The issue is now we are following the soft links and that breaks server configuration environments that were working before.",2022/07/19 3:08 PM
WFCORE-5969,"When '{{{}xxx'{}}} is specified for the {{distinguished-name}} attribute, an error will occur when attempting to create an {{X500Principal.}}

However, that error message is too general.",2022/07/15 10:54 AM
WFCORE-5960,"If the customer uses the attribute ""relative-to=""jboss.domain.base.dir"""" in ""host.xml"", the path is incorrectly configured.

It is supposed to have the same value as the system property ""jboss.domain.base.dir"" but somehow the value becomes ""jboss.domain.base.dir/configurations"".

Note: the same attribute can be used in ""domain.xml"" without any problem. This problem only occurs when using in ""host.xml"".",2022/06/30 11:34 AM
WFCORE-5958,"Warning message in case of changing worker [1]. In case of using http-upgrade for remoting this has also impact on undertow listener, which needs to use the same worker. As http-listener doesn't depend on remoting, it is rather the opposite way, the warning message is not correct for this situation. As such the message should be updated to provide warning in relation to the http[s]-listener.

[1]
{noformat}
/subsystem=remoting/configuration=endpoint:write-attribute(name=worker,value=default)
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""warnings"" => [{
            ""warning"" => ""WFLYRMT0026: Change of worker to 'default' in remoting might require the same change in resources depending on remoting."",
            ""level"" => ""WARNING"",
            ""operation"" => {
                ""address"" => [
                    (""subsystem"" => ""remoting""),
                    (""configuration"" => ""endpoint"")
                ],
                ""operation"" => ""write-attribute""
            }
        }],
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}{noformat}",2022/06/30 8:52 AM
WFCORE-5955,"There is obviously transient failure in RotatingFileHandlerTestCase:
{code}
INFO] Running org.jboss.as.test.integration.logging.handlers.RotatingFileHandlerTestCase
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.167 s <<< FAILURE! - in org.jboss.as.test.integration.logging.handlers.RotatingFileHandlerTestCase
[ERROR] testPeriodicSizeRotateCompressed(org.jboss.as.test.integration.logging.handlers.RotatingFileHandlerTestCase)  Time elapsed: 0.049 s  <<< FAILURE!
java.lang.AssertionError: Expected to have at least 2 files found 3 expected:<2> but was:<3>
	at org.junit.Assert.fail(Assert.java:89)
	at org.junit.Assert.failNotEquals(Assert.java:835)
	at org.junit.Assert.assertEquals(Assert.java:647)
	at org.jboss.as.test.integration.logging.handlers.RotatingFileHandlerTestCase.executeRequest(RotatingFileHandlerTestCase.java:128)
	at org.jboss.as.test.integration.logging.handlers.RotatingFileHandlerTestCase.testPeriodicSizeRotateCompressed(RotatingFileHandlerTestCase.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:157)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
{code}",2022/06/25 9:23 AM
WFCORE-5954,Empty resources are not added properly,2022/06/23 3:08 PM
WFCORE-5953,The write-attribute operation to set a list attribute value is not working,2022/06/23 3:07 PM
WFCORE-5949,"I'm getting a ClassCastException when I try to add ""meta-data"" to a json-logger within subsystem ""logging"".

 

As this is a new feature and documentation/examples are rare I am not confident that I created the yaml file semantically correct. But no matter how I define the yaml - as soon as ""meta-data"" is added to the yaml (and no matter what content it provides), the application server fails to boot with this stack trace:

 
{code:java}
16:02:18,511 ERROR [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0055: Caught exception during boot: java.lang.ClassCastException: class org.jboss.as.controller.SimpleMapAttributeDefinition cannot be cast to class org.jboss.as.controller.ObjectTypeAttributeDefinition (org.jboss.as.controller.SimpleMapAttributeDefinition and org.jboss.as.controller.ObjectTypeAttributeDefinition are in unnamed module of loader 'org.jboss.as.controller@19.0.0.Beta12' @5ed828d)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.persistence.yaml.YamlConfigurationExtension.processAttributes(YamlConfigurationExtension.java:350)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.persistence.yaml.YamlConfigurationExtension.processResource(YamlConfigurationExtension.java:260)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.persistence.yaml.YamlConfigurationExtension.processResource(YamlConfigurationExtension.java:171)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.persistence.yaml.YamlConfigurationExtension.processResource(YamlConfigurationExtension.java:171)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.persistence.yaml.YamlConfigurationExtension.processResource(YamlConfigurationExtension.java:177)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.persistence.yaml.YamlConfigurationExtension.processOperations(YamlConfigurationExtension.java:149)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:533)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:572)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:534)
at org.jboss.as.server@19.0.0.Beta12//org.jboss.as.server.ServerService.boot(ServerService.java:470)
at org.jboss.as.server@19.0.0.Beta12//org.jboss.as.server.ServerService.boot(ServerService.java:414)
at org.jboss.as.controller@19.0.0.Beta12//org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:473)
at java.base/java.lang.Thread.run(Thread.java:829)

16:02:18,513 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details. - Server configuration file in use: standalone.xml{code}
 

 

This is the YAML content I tried (with various alternatives but always with the same result)

 
{code:java}
wildfly-configuration:
  subsystem:
    logging:
      json-formatter:
        NDJSON:
          print-details: true
          exception-output-type: formatted
          meta-data:
            app: my-application
{code}",2022/06/20 4:31 PM
WFCORE-5936,"Ldap autentication using referals fails on JDK 17. It seems like server is unable to parse output of ldap request.

 
{code:java}
ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /23cab910-e108-46b7-a2f2-116773881847/protected/printRoles: java.lang.RuntimeException: ELY01084: Error while consuming results from search. SearchDn [o=AuthenticationReferralWithDirectVerificationFalseTestCas6e94c027,o=primary,dc=jboss,dc=org], Filter [(|(objectclass=referral)(uid={0}))], Filter Args [[referralUser]].
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.realm.ldap.LdapSecurityRealm$LdapSearch$1.tryAdvance(LdapSecurityRealm.java:1141)
   at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)
   at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)
   at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)
   at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
   at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)
   at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
   at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.realm.ldap.LdapSecurityRealm$LdapRealmIdentity.getIdentity(LdapSecurityRealm.java:705)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.realm.ldap.LdapSecurityRealm$LdapRealmIdentity.verifyEvidence(LdapSecurityRealm.java:616)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.ServerAuthenticationContext$NameAssignedState.verifyEvidence(ServerAuthenticationContext.java:2078)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.ServerAuthenticationContext.verifyEvidence(ServerAuthenticationContext.java:767)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.ServerAuthenticationContext$1.handleOne(ServerAuthenticationContext.java:1021)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.ServerAuthenticationContext$1.handleOne(ServerAuthenticationContext.java:931)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.ServerAuthenticationContext$1.handleOne(ServerAuthenticationContext.java:1090)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.ServerAuthenticationContext$1.handle(ServerAuthenticationContext.java:868)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.SecurityIdentityServerMechanismFactory$SecurityIdentityCallbackHandler.handle(SecurityIdentityServerMechanismFactory.java:126)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.mechanism.http.UsernamePasswordAuthenticationMechanism.authenticate(UsernamePasswordAuthenticationMechanism.java:78)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.http.basic.BasicAuthenticationMechanism.evaluateRequest(BasicAuthenticationMechanism.java:161)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.http.util.SetMechanismInformationMechanismFactory$1.evaluateRequest(SetMechanismInformationMechanismFactory.java:119)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.http.util.SocketAddressCallbackServerMechanismFactory$1.evaluateRequest(SocketAddressCallbackServerMechanismFactory.java:82)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.server.SecurityIdentityServerMechanismFactory$1.evaluateRequest(SecurityIdentityServerMechanismFactory.java:85)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.http.HttpAuthenticator$AuthenticationExchange.authenticate(HttpAuthenticator.java:325)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.http.HttpAuthenticator$AuthenticationExchange.access$800(HttpAuthenticator.java:300)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.http.HttpAuthenticator.authenticate(HttpAuthenticator.java:94)
   at org.wildfly.security.elytron-web.undertow-server@1.10.1.Final-redhat-00001//org.wildfly.elytron.web.undertow.server.SecurityContextImpl.authenticate(SecurityContextImpl.java:107)
   at org.wildfly.security.elytron-web.undertow-server-servlet@1.10.1.Final-redhat-00001//org.wildfly.elytron.web.undertow.server.servlet.ServletSecurityContextImpl.authenticate(ServletSecurityContextImpl.java:115)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:55)
   at io.undertow.core@2.2.17.Final//io.undertow.server.handlers.DisableCacheHandler.handleRequest(DisableCacheHandler.java:33)
   at io.undertow.core@2.2.17.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
   at io.undertow.core@2.2.17.Final//io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)
   at io.undertow.core@2.2.17.Final//io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)
   at io.undertow.core@2.2.17.Final//io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
   at org.wildfly.security.elytron-web.undertow-server-servlet@1.10.1.Final-redhat-00001//org.wildfly.elytron.web.undertow.server.servlet.CleanUpHandler.handleRequest(CleanUpHandler.java:38)
   at io.undertow.core@2.2.17.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
   at org.wildfly.extension.undertow@8.0.0.Beta-redhat-20220504//org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
   at io.undertow.core@2.2.17.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
   at org.wildfly.extension.undertow@8.0.0.Beta-redhat-20220504//org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)
   at io.undertow.core@2.2.17.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:275)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:79)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:134)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:131)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
   at org.wildfly.extension.undertow@8.0.0.Beta-redhat-20220504//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1431)
   at org.wildfly.extension.undertow@8.0.0.Beta-redhat-20220504//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1431)
   at org.wildfly.extension.undertow@8.0.0.Beta-redhat-20220504//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1431)
   at org.wildfly.extension.undertow@8.0.0.Beta-redhat-20220504//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1431)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:255)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:79)
   at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:100)
   at io.undertow.core@2.2.17.Final//io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)
   at io.undertow.core@2.2.17.Final//io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:852)
   at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
   at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
   at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
   at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
   at org.jboss.xnio@3.8.7.Final//org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1282)
   at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: javax.naming.NotContextException: Cannot create context for: ldap://localhost:11389/ou=Roles,o=AuthenticationReferralWithDirectVerificationFalseTestCas6e94c027,o=secondary,dc=jboss,dc=com??sub; remaining name 'o=AuthenticationReferralWithDirectVerificationFalseTestCas6e94c027,o=primary,dc=jboss,dc=org'
   at java.naming/com.sun.jndi.ldap.LdapReferralContext.<init>(LdapReferralContext.java:149)
   at java.naming/com.sun.jndi.ldap.LdapReferralException.getReferralContext(LdapReferralException.java:151)
   at java.naming/com.sun.jndi.ldap.LdapReferralException.getReferralContext(LdapReferralException.java:129)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.realm.ldap.DelegatingLdapContext.wrapReferralContextObtaining(DelegatingLdapContext.java:154)
   at org.wildfly.security.elytron-base@1.19.0.Final//org.wildfly.security.auth.realm.ldap.LdapSecurityRealm$LdapSearch$1.tryAdvance(LdapSecurityRealm.java:1118)
   ... 62 more {code}
 

 ",2022/06/06 8:46 AM
WFCORE-5932,"The following files have duplicate keys with differing values:
 * core-management/core-management-subsystem/src/main/resources/org/wildfly/extension/core/management/LocalDescriptions.properties
{code:java}
core-management.process-state-listener=Process state listener.
{code}
{code:java}
core-management.process-state-listener=Process State Listeners.
{code}

 * server/src/main/resources/org/jboss/as/server/controller/descriptions/LocalDescriptions.properties
{code:java}
deployment.content.path=The relative path of the content. It uses only '/' as separator whatever the operating system.
{code}
{code:java}
deployment.content.path=Path (relative or absolute) to unmanaged content that is part of the deployment.
{code}",2022/06/06 1:56 AM
WFCORE-5927,"When using embedded server configuration file outside of the directory {{$EAP_HOME/standalone/configuration}} error message occurs: {code}Cannot start embedded server: WFLYEMB0022: Cannot invoke 'start' on embedded process: WFLYCTL0214: Could not get main file: ../../appclient/configuration/appclient.xml. Specified 
files must be relative to the configuration dir:{code}

Especially the second part of the message starting ""Specified 
files must be relative to the configuration dir"" is misleading for the user as the relative path was provided by {{-c=../../appclient/configuration/appclient.xml}}. In other words it could be great to mention that configuration dir could be set by the property {{jboss.server.config.dir}} during jboss-cli start.",2022/05/27 10:48 AM
WFCORE-5920,"We have a simple test that expects -Djava.security.manager=allow property in JAVA_OPTS of a server started by standalone/domain scripts.

Standalone.[sh/bat] sets JAVA_OPTS as expected (with -Djava.security.manager=allow) whereas a PowerShell variant does not (please see the attached image).

The same situation is with domain.bat - it doesn't set the expected security manager parameter as domain.sh one.

Should we expect the same JAVA_OPTS setting behavior across all these mentioned scripts? Please correct me if I made some incorrect conclusions.",2022/05/24 12:08 PM
WFCORE-5918,"I'm getting a write-attribute error (not found) when trying to add single-sign-on to application-security-domain through yaml configuration. Yaml config that I attached is working fine if single-sign-on is already defined in standalone.xml. The extension is trying to do write-attribute on non existent element, I think it should use add instead in this case.

 

yaml:
{code:java}
wildfly-configuration:
    subsystem:
        undertow:
            application-security-domain:
                other:
                    setting:
                        single-sign-on: 
                            key-alias: localhost
                            key-store: applicationKS
                            credential-reference: 
                                clear-text: secret {code}
console output:
{code:java}
2022-05-23 20:51:24,325 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""write-attribute"") failed - address: ([
    (""subsystem"" => ""undertow""),
    (""application-security-domain"" => ""other""),
    (""setting"" => ""single-sign-on"")
]) - failure description: ""WFLYCTL0216: Management resource '[
    (\""subsystem\"" => \""undertow\""),
    (\""application-security-domain\"" => \""other\""),
    (\""setting\"" => \""single-sign-on\"")
]' not found"" {code}",2022/05/23 7:52 PM
WFCORE-5914,"The {{key-size}} attribute has allowed values but these aren't validated (since there's no automatic validation for allowed values). The impact is minimal, the only problem this causes is with {{generate-secret-key}}.",2022/05/12 1:51 PM
WFCORE-5904,"Typo ""Hander"" in some Handler filenames:


{noformat}
.//domain-management/src/main/java/org/jboss/as/domain/management/access/AccessAuthorizationProviderWriteAttributeHander.java
.//domain-management/src/main/java/org/jboss/as/domain/management/access/AccessAuthorizationUseIdentityRolesWriteAttributeHander.java
.//domain-management/src/main/java/org/jboss/as/domain/management/access/RoleIncludeAllWriteAttributeHander.java
.//controller/src/main/java/org/jboss/as/controller/audit/InMemoryAuditLogHander.java
{noformat}
",2022/05/09 6:51 AM
WFCORE-5903,"When the admin-only-policy is fetch from master, the secondary host is unable to be registered on the domain after restarting/reloading it.

The following error trace is shown when the secondary host is restarted/reloaded:


{noformat}
[Host Controller] 13:54:35,270 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0001: Could not connect to remote domain controller remote+http://localhost:9990: 2-$-WFLYDC0015: There is already a registered host named 'yborgess.local'
[Host Controller] 	at org.jboss.as.host-controller@18.0.4.Final//org.jboss.as.host.controller.RemoteDomainConnection$HostControllerConnectRequest.handleRequest(RemoteDomainConnection.java:380)
[Host Controller] 	at org.jboss.as.protocol@18.0.4.Final//org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:321)
[Host Controller] 	at org.jboss.as.protocol@18.0.4.Final//org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleRequest(AbstractMessageHandler.java:286)
[Host Controller] 	at org.jboss.as.protocol@18.0.4.Final//org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:234)
[Host Controller] 	at org.jboss.as.protocol@18.0.4.Final//org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:85)
[Host Controller] 	at org.jboss.remoting@5.0.23.Final//org.jboss.remoting3.remote.RemoteConnectionChannel.lambda$handleMessageData$3(RemoteConnectionChannel.java:432)
[Host Controller] 	at org.jboss.remoting@5.0.23.Final//org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:991)
[Host Controller] 	at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
[Host Controller] 	at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
[Host Controller] 	at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
[Host Controller] 	at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
[Host Controller] 	at org.jboss.xnio@3.8.5.Final//org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)
[Host Controller] 	at java.base/java.lang.Thread.run(Thread.java:834)
[Host Controller]
[Host Controller] 13:54:35,271 WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0147: No domain controller discovery options remain.
[Host Controller] 13:54:35,271 ERROR [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0002: Could not connect to master. Error was: java.lang.IllegalStateException: WFLYHC0120: Tried all domain controller discovery option(s) but unable to connect
[Host Controller] 13:54:35,272 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0178: Aborting with exit code 99
[Host Controller] 13:54:35,284 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0050: WildFly Full 26.0.1.Final (WildFly Core 18.0.4.Final) stopped in 9ms
{noformat}

The workaround is to reload the Domain Controller when the secondary Host Controller is stopped.
",2022/05/05 1:56 PM
WFCORE-5894,"The {{UndertowService}} is missing permissions for registering MBeans. This is used in some logging tests and if a test that configures a log context first is done then the {{org.wildfly.security.manager._private.SecurityMessages.access}} is associated with that log context because of the failed permissions.

While it seems like a bug that the {{LogContext}} might be getting leaked, this is a special case because Undertow is started from a deployment which will not be done in a normal server. I do think there are some improvements in the logging subsystem that may be able to be done. However, I do feel this is more of a test issue.",2022/04/25 9:42 PM
WFCORE-5891,"Server default Realm configuration in {{standalone.xml}} and {{host.xml}} differs  in {{host->profiles->http}} section.

In {{host.xml}} there is a {{<mechanism mechanism-name=""BASIC"">}} whereas in {{standalone.xml}} it is {{{}<mechanism mechanism-name=""DIGEST"">{}}}. ",2022/04/25 12:38 PM
WFCORE-5890,"Server default Realm configuration in {{standalone.xml}} and {{host.xml}} differs  in {{host->profiles->http}} section.

In {{host.xml}} there is {{<mechanism-realm realm-name=""Management Realm""/>}} while in standalone there is {{<mechanism-realm realm-name=""ManagementRealm""/>}} (there is no space in ""ManagementRealm""). It seems like a typo, because in domain {{mgmt-users.properties}} file mentioned ""ManagementRealm"" without space.",2022/04/25 12:20 PM
WFCORE-5882,"The variable kernelServices is assigned to itself in the cleanup method instead of null.
{code}
@Override
@After
public void cleanup() throws Exception {
    super.cleanup();
    IoUtils.safeClose(jmxConnector);
    jmxConnector = null;
    kernelServices = kernelServices;
    }
{code}",2022/04/21 12:56 AM
WFCORE-5880,"Although a Bootable JAR instance handles the modular options in its manifest, the launcher sets them. This could hide issues in the Bootable JAR manifest.

The launcher is used by tests, the Bootable JAR Maven plugin and Arquillian container.

It seems safe to remove the launcher logic, Maven plugin is bound to a Major version of WildFly.",2022/04/19 8:49 AM
WFCORE-5878,"Typo in error message [1] - *commmand*.

[1]
{code}
WFLYSRV0115: System property jboss.server.log.dir cannot be set via the xml configuration file or from a management client; it's value must be known at initial process start so it can only set from the commmand line
{code}",2022/04/18 6:44 PM
WFCORE-5873,Add tests for WFCORE-5861 which were originally proposed in https://github.com/wildfly/wildfly-core/pull/5050.,2022/04/14 9:21 AM
WFCORE-5871,"The == operator to compare strings is not a POXIS shell-compatible operator. That throws an error when launching the server when -Djava.security.manager is in the JAVA_OPTIONS.

Due to this bug, the server is allowed to start when -Djava.security.manager, however, in such a case, the following error trace should be shown preventing the server to start until JAVA_OPTIONS is corrected:
{noformat}
$WFLY_HOME/bin/standalone.sh
JAVA_OPTS already set in environment; overriding default settings with values: -Djava.security.manager
ERROR: The use of -Djava.security.manager has been removed. Please use the -secmgr command line argument or SECMGR=true environment variable.
{noformat}",2022/04/05 12:02 PM
WFCORE-5869,"======================
Scenario-1)
============ With the following line of JAVA_OPTS in ""standalone.bat.conf"" file

set ""JAVA_OPTS=%JAVA_OPTS% -Dhttp.nonProxyHosts=localhost|127.0.0.1|10.10.10.*""

{code}
Error while starting EAP 6.1.1
C:\jboss-eap-6.1.1\bin>standalone.bat
Calling ""C:\jboss-eap-6.1.1\bin\standalone.conf.bat""
Setting JAVA property to ""C:\JDKs\jdk1.7.0_67\bin\java""
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
{code}

Scenario-2)
============ In Windows ""^"" sign is the escape character so we tried altering the JAVA_OPTS as following in the ""standalone.bat.conf"" file:

set ""JAVA_OPTS=%JAVA_OPTS% -Dhttp.nonProxyHosts=localhost^|127.0.0.1^|10.10.10.*""

Now EAP 6.1.1 server starts but still we see the following messages in windows console:

{code}
C:\jboss-eap-6.1.1\bin>standalone.bat
Calling ""C:\jboss-eap-6.1.1\bin\standalone.conf.bat""
Setting JAVA property to ""C:\JDKs\jdk1.7.0_67\bin\java""
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
'127.0.0.1' is not recognized as an internal or external command,
operable program or batch file.
{code}",2022/04/05 12:24 AM
WFCORE-5853,logging submodel should be runtime,2022/03/16 4:26 PM
WFCORE-5837,"I have a long string value that I want to persist the XML configuration like:
{code:xml}
<test>
    <x>Long string value that does not fit as attribute</x>
    <x>The element value should be more appropriate.</x>
</test>
{code}
So I tried with
{code:java}
AttributeDefinition ad = SimpleAttributeDefinitionBuilder.create(""x"", ModelType.STRING).build();
SimpleListAttributeDefinition attributeDefinition = SimpleListAttributeDefinition.Builder.of(""test"", ad).build();
{code}
then I got:
{code:java}
java.lang.UnsupportedOperationException: WFLYCTL0284: Could not marshal attribute as attribute: test
	at org.jboss.as.controller.AttributeMarshaller.marshallAsAttribute(AttributeMarshaller.java:79)
	at org.jboss.as.controller.AttributeMarshaller.marshall(AttributeMarshaller.java:95)
{code}
Looking inside of the SimpleListAttributeDefinition, I see it uses [AttributeMarshallers.SimpleListAttributeMarshaller|https://github.com/wildfly/wildfly-core/blob/19.0.0.Beta5/controller/src/main/java/org/jboss/as/controller/AttributeMarshallers.java#L164] internally which implements only +marshallAsElement+ method, but leaving +isMarshallableAsElement+ un-implemented which returns +false+ by default.",2022/03/15 3:31 AM
WFCORE-5792,Using the {{-c}} parameter it is possible to pass a relative path pointing to a file outside the {{jboss.server.config.dir}},2022/02/01 6:07 PM
WFCORE-5782,"Default value of *java.security.manager* changed recently on JDK 18.
Previous default value _""allow""_ was changed to _""disallow""_.
This new value forbids installation of security manager until this default value isn't changed by the user.
For more information see [this commit|https://github.com/openjdk/jdk/commit/d589b664cc809aea39ec094e99b1898df1bf3c19]",2022/01/21 11:13 AM
WFCORE-5780,"The testsuite/client-old-server module and its single test ClientAgainstOldServerTestCase doesn't work. It couldn't have work since core removed the legacy feature packs. And the old server versions it tests against are far too old, with none of the more recent ones.

When this is fixed the ""Client-Old Server-Linux"" nightly CI job should be re-enabled.",2022/01/20 2:11 AM
WFCORE-5778,"Default value of *java.security.manager* changed recently on JDK 18.
Previous default value _""allow""_ was changed to _""disallow""_.
This new value forbids installation of security manager until this default value isn't changed by the user.
For more information see [this commit|https://github.com/openjdk/jdk/commit/d589b664cc809aea39ec094e99b1898df1bf3c19]",2022/01/19 11:47 AM
WFCORE-5765,"It's not possible to check the result containing whitespace with the equals to (==) comparison operator in the ""if-else"" control flow in JBoss-CLI.

For example, when you have the following configuration in your standalone.xml
{code:java}
    <system-properties>
        <property name=""foobar"" value=""foo bar""/>
    </system-properties>
{code}
then execute the following CLI:
{code:java}
if (result == ""foo bar"") of /system-property=foobar:read-attribute(name=value)
  echo system property foobar == foo bar
else
  echo system property foobar != foo bar
end-if
{code}
Expected result:
{code:java}
system property foobar == foo bar""
{code}
Actual result:
{code:java}
system property foobar != foo bar
{code}",2022/01/04 11:11 AM
WFCORE-5764,"Trying to use the elytron-tool script to work with credentials from a credential store results in an exception similar (based on the actual operation) to this
{code:java}
Exception encountered executing the command:
org.wildfly.security.credential.store.CredentialStoreException: ELY09508: Cannot write credential to store
	at org.wildfly.security.elytron-base@1.18.1.Final//org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.store(KeyStoreCredentialStore.java:413)
	at org.wildfly.security.elytron-base@1.18.1.Final//org.wildfly.security.credential.store.CredentialStore.store(CredentialStore.java:242)
	at org.wildfly.security.elytron-base@1.18.1.Final//org.wildfly.security.credential.store.CredentialStore.store(CredentialStore.java:226)
	at org.wildfly.security.elytron-tool@1.18.1.Final//org.wildfly.security.tool.CredentialStoreCommand.addAlias(CredentialStoreCommand.java:510)
	at org.wildfly.security.elytron-tool@1.18.1.Final//org.wildfly.security.tool.CredentialStoreCommand.execute(CredentialStoreCommand.java:421)
	at org.wildfly.security.elytron-tool@1.18.1.Final//org.wildfly.security.tool.ElytronTool.main(ElytronTool.java:84)
	at org.jboss.modules.Module.run(Module.java:353)
	at org.jboss.modules.Module.run(Module.java:321)
	at org.jboss.modules.Main.main(Main.java:604)
Caused by: java.security.NoSuchAlgorithmException: ELY08028: Invalid algorithm ""clear""
	at org.wildfly.security.elytron-base@1.18.1.Final//org.wildfly.security.password.PasswordFactory.getInstance(PasswordFactory.java:123)
	at org.wildfly.security.elytron-base@1.18.1.Final//org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.store(KeyStoreCredentialStore.java:287)
	... 8 more


{code}
There are no providers registered, so the PasswordFactory#getInstance method just immediately throws an exception.
",2022/01/04 4:08 AM
WFCORE-5758,"java version ""1.8.0_311""
Java(TM) SE Runtime Environment (build 8.0.7.0 - pxa6480sr7-20211025_01(SR7))
IBM J9 VM (build 2.9, JRE 1.8.0 Linux amd64-64-Bit Compressed References 20211022_15212 (JIT enabled, AOT enabled)
OpenJ9   - 6abb372
OMR      - b898db9
IBM      - 2f2c48b)
JCL - 20210930_01 based on Oracle jdk8u311-b11

 

---

 

[ERROR] Tests run: 24, Failures: 1, Errors: 0, Skipped: 7, Time elapsed: 14.384 s <<< FAILURE! - in org.wildfly.extension.elytron.TlsTestCase
[ERROR] testSslServiceAuthProtocolOnlyServerSupportsSSLv2Hello(org.wildfly.extension.elytron.TlsTestCase)  Time elapsed: 0.464 s  <<< FAILURE!
java.lang.AssertionError
    at org.wildfly.extension.elytron.TlsTestCase.checkProtocolConfiguration(TlsTestCase.java:786)
    at org.wildfly.extension.elytron.TlsTestCase.testCommunication(TlsTestCase.java:757)
    at org.wildfly.extension.elytron.TlsTestCase.testSslServiceAuthProtocolOnlyServerSupportsSSLv2Hello(TlsTestCase.java:440)

---

[ERROR] Tests run: 12, Failures: 0, Errors: 1, Skipped: 1, Time elapsed: 5.416 s <<< FAILURE! - in org.wildfly.extension.elytron.RealmsTestCase
[ERROR] testJAASRealm(org.wildfly.extension.elytron.RealmsTestCase)  Time elapsed: 0.123 s  <<< ERROR!
org.wildfly.security.auth.server.RealmUnavailableException: ELY01008: Failed to create login context
    at org.wildfly.security.auth.realm.JaasSecurityRealm.createLoginContext(JaasSecurityRealm.java:172)
    at org.wildfly.security.auth.realm.JaasSecurityRealm.access$500(JaasSecurityRealm.java:62)
    at org.wildfly.security.auth.realm.JaasSecurityRealm$JaasRealmIdentity.verifyEvidence(JaasSecurityRealm.java:252)
    at org.wildfly.extension.elytron.RealmsTestCase.testJAASRealm(RealmsTestCase.java:393)
Caused by: java.security.NoSuchAlgorithmException: JavaLoginConfig Configuration not available
    at javax.security.auth.login.Configuration.getInstance(Configuration.java:329)
    at org.wildfly.security.auth.realm.JaasSecurityRealm.createLoginContext(JaasSecurityRealm.java:169)
    ... 3 more

 ",2021/12/20 3:27 PM
WFCORE-5734,"A change in getting a value from {{java.io.tmpdir}} has been [introduced in JDK 16|https://github.com/openjdk/jdk/commit/6bb7e45e8e1a8f5a3b2f9c92b610fa4236f2eb90#diff-64e57a650df91c988910dd64b53c82b0521869c5f4afd1024f03c6a97f3a8344]. The change affects {{surefire}}: even though we set {{java.io.tmpdir}} in [{{jboss-parent}}|https://github.com/jboss/jboss-parent-pom/blob/main/pom.xml#L587] the value is not propagated in time and a default system value is used instead. Therefore, (for example using {{Files.createTempDirectory}}) temporary test files are created outside the project and can pollute filesystem. To fix this we can set the value using the {{<argLine>}} configuration element.",2021/12/07 10:48 AM
WFCORE-5732,NoData,2021/12/01 9:08 AM
WFCORE-5722,The boot runtime shouldn't shade the JBoss modules dependency. This shading breaks the ability to update org.jboss:jboss-modules dependency when building a bootable JAR.,2021/11/23 2:53 PM
WFCORE-5694,"[*INFO*] Running org.wildfly.extension.elytron.*RealmsTestCase*

[*ERROR*] *Tests* *run: 9*, *Failures: 1*, Errors: 0, *Skipped: 1*, Time elapsed: 3.979 s *<<< FAILURE!* - in org.wildfly.extension.elytron.*RealmsTestCase*

[*ERROR*] testPropertyRealm(org.wildfly.extension.elytron.RealmsTestCase)  Time elapsed: 0.111 s  <<< FAILURE!

java.lang.AssertionError: Identity user999 is not detected after external modification

at org.wildfly.extension.elytron.RealmsTestCase.testExternalModificationPropertyRealm(RealmsTestCase.java:167)

at org.wildfly.extension.elytron.RealmsTestCase.testPropertyRealm(RealmsTestCase.java:88)

 ",2021/11/10 12:14 PM
WFCORE-5682,"The SE 17 test job[1] is failing for any test where the byteman java agent is added to the server launch. Failures all involve an error report similar to this:

{code}
[0m[Server:main-three] OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
[Server:main-three] org.jboss.byteman.agent.Main: unable to open system jar file : /store/work/tc-work/e9bccef30f12678d/testsuite/shared/target/classes
[Server:main-three] Exception in thread ""main"" java.lang.reflect.InvocationTargetException
[Server:main-three] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[Server:main-three] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
[Server:main-three] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[Server:main-three] FATAL ERROR in native method: processing of -javaagent failed, processJavaStart failed
[Server:main-three] 	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
[Server:main-three] 	at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:491)
[Server:main-three] 	at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:503)
[Server:main-three] Caused by: java.io.FileNotFoundException: /store/work/tc-work/e9bccef30f12678d/testsuite/shared/target/classes (Is a directory)
[Server:main-three] 	at java.base/java.io.RandomAccessFile.open0(Native Method)
[Server:main-three] 	at java.base/java.io.RandomAccessFile.open(RandomAccessFile.java:344)
[Server:main-three] 	at java.base/java.io.RandomAccessFile.<init>(RandomAccessFile.java:259)
[Server:main-three] 	at java.base/java.io.RandomAccessFile.<init>(RandomAccessFile.java:213)
[Server:main-three] 	at java.base/java.util.zip.ZipFile$Source.<init>(ZipFile.java:1312)
[Server:main-three] 	at java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1277)
[Server:main-three] 	at java.base/java.util.zip.ZipFile$CleanableResource.<init>(ZipFile.java:709)
[Server:main-three] 	at java.base/java.util.zip.ZipFile.<init>(ZipFile.java:243)
[Server:main-three] 	at java.base/java.util.zip.ZipFile.<init>(ZipFile.java:172)
[Server:main-three] 	at java.base/java.util.jar.JarFile.<init>(JarFile.java:347)
[Server:main-three] 	at java.base/java.util.jar.JarFile.<init>(JarFile.java:318)
[Server:main-three] 	at java.base/java.util.jar.JarFile.<init>(JarFile.java:284)
[Server:main-three] 	at org.jboss.byteman.agent.Main.premain(Main.java:185)
[Server:main-three] 	... 6 more
{code}

Most, maybe all of the manualmode testsuite fails for this reason as byteman is added to the standard server launch. The fix there is simple though. None of the tests actually use byteman so it can just be dropped from the server startup config.

These actually pass for me locally when I use a process much like what the CI job does, but of course we want CI to pass.

[1] https://ci.wildfly.org/viewType.html?buildTypeId=WildFlyCore_MainLinuxJdk17

",2021/10/30 1:58 PM
WFCORE-5602,"{{security enable-http-auth-http-server}} command fails for the default Undertow application security domain {{other}} with a cryptic message:

{noformat}
[standalone@localhost:9990 /] security enable-http-auth-http-server --security-domain=other --mechanism=CLIENT_CERT --key-store-name=applicationKS
The argument value is not specified for value: 'null'
{noformat}",2021/09/29 9:52 AM
WFCORE-5587,"CRL can be configured by distribution point extension in certificates. To allow such case we have to set empty {{certificate-revocation-lists}}, which works as expected. However, in case we set empty {{certificate-revocation-list}} (the attribute from the initial implementation, also valid configuration), {{maximum-cert-path}} is not taken into account, no warning for a user. Also setting just {{certificate-revocation-list.maximum-cert-path}} cannot be used and results in {{NullPointerException}}.

The issue was probably introduced with the {{certificate-revocation-lists}} feature.",2021/09/17 11:50 AM
WFCORE-5579,"The ModelNode key has to be compared to the name of the AttributeDefintion, not the AttributeDefinition itself [https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta7/server/src/main/java/org/jboss/as/server/controller/resources/DeploymentAttributes.java#L560]",2021/09/13 3:32 PM
WFCORE-5557,"Once KEYCLOAK-19102 is fixed, remove what has been added back by WFCORE-5556",2021/08/23 12:57 PM
WFCORE-5546,"The  ""standalone.bat"" can handle ""JAVA_OPTS"" incorrectly. For example, when the escaped pipe ""^|"" value is specified in ""-Dhttp.nonProxyHosts"" for configuring multiple hosts.

If updating ""standalone.bat"" like [TO BE], WildFly can be started.

As there are some references to ""JAVA_OPTS"" variable in ""standalone.bat"", please review them to prevent similar events like this ticket.

 

[AS IS]
 
{code:java}
253 if not errorlevel == 1 (
254 set ""JAVA_OPTS=%JAVA_OPTS% !TMP_PARAM!""
255 ){code}
[TO BE]
{code:java}
 253 if not errorlevel == 1 (
 254 set ""!JAVA_OPTS! !TMP_PARAM!""
 255 ){code}",2021/08/18 10:24 AM
WFCORE-5545,"If a deployment has a dependency on a static module and is configured to want annotation data from that module, some consumers of Jandex indices created from the module are not getting all possible indices.  Specifically, WarAnnotationDeploymentProcessor is using a deployment unit attachment to obtain indices, but that attachment only contains indices for modules that have at least one META-INF/jandex.idx file in a resource. Indices created from modules without that (via class scanning) are not added to the attachment.

See discussion at https://github.com/wildfly/wildfly-core/pull/4708/files#r689778092",2021/08/17 7:17 PM
WFCORE-5536,"It's possible to take a snapshot with a custom name, e.g:

{code:xml}
[standalone@embedded /] :take-snapshot(name=""sp1"")
{
    ""outcome"" => ""success"",
    ""result"" => ""/Users/chaowan/work/git/wildfly/wildfly/dist/target/wildfly-25.0.0.Beta1-SNAPSHOT/standalone/configuration/standalone_xml_history/sna
pshot/sp1standalone.xml""
}
{code}

It succeeded and a snapshot file {{sp1standalone.xml}} is generated, but it won't be included later in list-snapshots() result.

Because the {{listSnapshots}} operation depends on [BackupSnapshotInfo|https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta4/controller/src/main/java/org/jboss/as/controller/persistence/ConfigurationFile.java#L821] which filter files in snapshotsDirectory and only take files match [timestamp prefix|https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta4/controller/src/main/java/org/jboss/as/controller/persistence/ConfigurationFile.java#L109]. 

I think it should pick files in snapshot directory with a more general filter.
",2021/08/05 9:40 AM
WFCORE-5529,"Elytron SubsystemTransformerTestCase has some methods prepared to test the transformation against 7.4.0, however, those methods are using 7.3.0 as the target controller version.

My guess is those methods were created before we had WF23 as the temporal EAP 7.4.0.

Once we have WFCORE-5347 resolved, these methods could use the new 7.4.0 controller version.

 ",2021/07/29 2:56 PM
WFCORE-5527,"Host Controller does not remove directories/files from the content repository if something such as the OS or other process creates a file in the directory.

{code}
[Host Controller] 12:54:16,402 ERROR [org.jboss.as.repository] (Host Controller Service Threads - 7) WFLYDR0010: Couldn't delete content /tmp/jboss-eap-7.3/domain/data/content/ed/fb2d3547f1dd4cfacd9118885cd0a915bccf5c: java.nio.file.DirectoryNotEmptyException: /tmp/jboss-eap-7.3/domain/data/content/ed/fb2d3547f1dd4cfacd9118885cd0a915bccf5c
[Host Controller] 	at sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:242)
[Host Controller] 	at sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:108)
[Host Controller] 	at java.nio.file.Files.deleteIfExists(Files.java:1165)
[Host Controller] 	at org.jboss.as.repository.ContentRepositoryImpl.removeContent(ContentRepositoryImpl.java:315)
[Host Controller] 	at org.jboss.as.repository.ContentRepositoryImpl.markAsObsolete(ContentRepositoryImpl.java:377)
[Host Controller] 	at org.jboss.as.repository.ContentRepositoryImpl.cleanObsoleteContent(ContentRepositoryImpl.java:353)
[Host Controller] 	at org.jboss.as.server.operations.CleanObsoleteContentHandler.execute(CleanObsoleteContentHandler.java:76)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:999)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:743)
[Host Controller] 	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:467)
[Host Controller] 	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1413)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:429)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:246)
[Host Controller] 	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:289)
[Host Controller] 	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:255)
[Host Controller] 	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:246)
[Host Controller] 	at org.jboss.as.controller.ModelControllerClientFactoryImpl$LocalClient.executeInModelControllerCl(ModelControllerClientFactoryImpl.java:259)
[Host Controller] 	at org.jboss.as.controller.ModelControllerClientFactoryImpl$LocalClient.executeOperation(ModelControllerClientFactoryImpl.java:157)
[Host Controller] 	at org.jboss.as.controller.ModelControllerClientFactoryImpl.lambda$executeInVm$0(ModelControllerClientFactoryImpl.java:351)
[Host Controller] 	at org.jboss.as.controller.access.InVmAccess.runInVm(InVmAccess.java:85)
[Host Controller] 	at org.jboss.as.controller.ModelControllerClientFactoryImpl.executeInVm(ModelControllerClientFactoryImpl.java:351)
[Host Controller] 	at org.jboss.as.controller.ModelControllerClientFactoryImpl.access$000(ModelControllerClientFactoryImpl.java:59)
[Host Controller] 	at org.jboss.as.controller.ModelControllerClientFactoryImpl$1.executeOperation(ModelControllerClientFactoryImpl.java:82)
[Host Controller] 	at org.jboss.as.controller.LocalModelControllerClient.execute(LocalModelControllerClient.java:54)
[Host Controller] 	at org.jboss.as.controller.LocalModelControllerClient.execute(LocalModelControllerClient.java:39)
[Host Controller] 	at org.jboss.as.server.deployment.ContentRepositoryCleaner$Execution$1.execute(ContentRepositoryCleaner.java:167)
[Host Controller] 	at org.jboss.as.server.deployment.ContentRepositoryCleaner.cleanObsoleteContent(ContentRepositoryCleaner.java:136)
[Host Controller] 	at org.jboss.as.server.deployment.ContentRepositoryCleaner$ContentRepositoryCleanerTask.run(ContentRepositoryCleaner.java:72)
[Host Controller] 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
[Host Controller] 	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
[Host Controller] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
[Host Controller] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
[Host Controller] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
[Host Controller] 	at java.lang.Thread.run(Thread.java:748)
[Host Controller] 	at org.jboss.threads.JBossThread.run(JBossThread.java:485)
{code}",2021/07/28 1:41 PM
WFCORE-5524,"Folowing tests fails only on windows: 
 * org.jboss.as.test.integration.mgmt.access.LegacyConfigurationChangesHistoryTestCase
 * org.jboss.as.test.integration.mgmt.access.ConfigurationChangesHistoryTestCase

Tests executes commands against cli for changing configuration. Then it executes cli command to see history of configuration changes and compares history with executed commands. Some times history lacks changes.

It seems that after executing command, in some cases server doesn't save config change to history, because it does not have enough time before execution of next command.

It was proven by running cli commands with timouts: [https://github.com/nikitagibor/wildfly-core/commit/3f2f2dd4dddf7b5044c57ae459256bef970ab5d2] with no failures.

Since tests wait for execution of cli command to complete, it is more likely to be a server issue than testsuite issue.

Tests fail after this commit: [https://github.com/wildfly/wildfly-core/commit/748402e746c31ba82e031c970971154c9501be2c]

We run tests one commit before this one 100 times and it never fails once.
 The bad commit fails one in 60 runs, with newer commits this frequency increase.

One of recent fails [https://ci.wildfly.org/viewLog.html?buildId=261152&buildTypeId=WildFlyCore_MasterWindowsJdk11ea&tab=buildResultsDiv|https://ci.wildfly.org/viewLog.html?buildId=261152&buildTypeId=WildFlyCore_MasterWindowsJdk11ea&tab=buildResultsDiv)]

Tests links:
 * [https://github.com/wildfly/wildfly-core/blob/main/testsuite/rbac/src/test/java/org/jboss/as/test/integration/mgmt/access/ConfigurationChangesHistoryTestCase.java]
 * https://github.com/wildfly/wildfly-core/blob/main/testsuite/rbac/src/test/java/org/jboss/as/test/integration/mgmt/access/LegacyConfigurationChangesHistoryTestCase.java",2021/07/28 7:19 AM
WFCORE-5521,"o.w.c.j.r.BootableJar uses Filestream without closing it properly.
 * [BootableJar#L142|https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta2/bootable-jar/runtime/src/main/java/org/wildfly/core/jar/runtime/BootableJar.java#L142]
 * [BootableJar#L180|https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta2/bootable-jar/runtime/src/main/java/org/wildfly/core/jar/runtime/BootableJar.java#L180]

o.j.a.c.p.XmlConfigurationPersister uses XMLStreamReader without finally closing it and doubles FileInputStream closing.
* [XmlConfigurationPersister#L125|https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta2/controller/src/main/java/org/jboss/as/controller/persistence/XmlConfigurationPersister.java#L125]

ArchiveHandler uses JarFile without closing it properly. SimpleTable uses Formatter without closing it properly.
* [ArchiveHandler#L162|https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta2/cli/src/main/java/org/jboss/as/cli/handlers/ArchiveHandler.java#L162]
* [SimpleTable#L111|https://github.com/wildfly/wildfly-core/blob/17.0.0.Beta2/cli/src/main/java/org/jboss/as/cli/util/SimpleTable.java#L111]

Fix: Use try-with-resources or ""safeClose"" util, depending on the current Exception Handling situation.",2021/07/24 8:09 AM
WFCORE-5520,"There are some codepoints per component having potential NullpointerException problems. This refers to [RSPEC-2259|https://rules.sonarsource.com/java/RSPEC-2259]

Fix: Individual check necessary.",2021/07/22 6:36 PM
WFCORE-5516,"If JBOSS_BASE_DIR variable is empty, then it is composed by 
{code:bash}
JBOSS_BASE_DIR=""$JBOSS_HOME/$JBOSS_MODE""
{code}
but not added to JBOSS_OPTS.

{code:bash}
if [ -z ""$JBOSS_BASE_DIR"" ]; then
         JBOSS_BASE_DIR=""$JBOSS_HOME/$JBOSS_MODE""
else
         JBOSS_OPTS=""$JBOSS_OPTS -Djboss.server.base.dir=$JBOSS_BASE_DIR""
fi
{code}
https://github.com/wildfly/wildfly-core/blob/1efe9fe93b5977dc5ef2d24ce75c5dd4871c42a1/core-feature-pack/common/src/main/resources/content/docs/contrib/scripts/init.d/wildfly-init-debian.sh#L98",2021/07/19 9:22 AM
WFCORE-5511,"A flaw was found in wildfly-core in all versions. If a vault expression is in the form of a single attribute that contains multiple expressions, a user who was granted access to the management interface can potentially access a vault expression they should not be able to access and possibly retrieve the item which was stored in the vault. The highest threat from this vulnerability is data confidentiality and integrity.",2021/07/15 11:51 AM
WFCORE-5499,"A test which is verifying the expected options are issued and logged at startup is failing on Windows when starting a cluster via {{domain.ps1}} Power Shell scripts.
The failure is visible only when JDK version is > 9, which is when the above mentioned options should be used.
The test is passing when using {{bat}} scripts.

I am setting this as {{Major}} because PS should be a technical preview feature. For the same reason I am not setting the Target Release. ",2021/07/07 6:36 AM
WFCORE-5493,"Issue WFCORE-5065 introduced the DeploymentTransformer to change the deployment during the operation ""add"".

The Wildfly Application Server uses this mechanism to perform the JavaEE -> JakartaEE transformation.

 

When the deployment is updated by the deployment scanner by dropping in a new WAR to the deployment directory, the server will do a ""full-replace-deployment"" operation and the deployment of the application fails. No deployment transformation is invoked as it is only implemented for the ""add"" operation.

 

If the deployed application is undeployed and then the new WAR is added to the deployment directory, everythings works as expected, because the server uses the ""add"" operation.

 ",2021/06/29 12:55 PM
WFCORE-5490,NoData,2021/06/27 10:00 AM
WFCORE-5452,"The following three tests started to fail on JDK16 & JDK17:

 - KeyStoresTestCase

 - CertificateAuthoritiesTestCase

 - AuthenticationClientTestCase

The problem appeared after recent Elytron related commits.

 

Steps to reproduce:

1) build wildfly-core with JDK8 - mvn clean install -DallTests -DskipTests=true

2) change directory to elytron maven submodule - cd elytron

3) change java to JDK17

4) run test, e.g.  - mvn clean test -Dtest=**/KeyStoresTestCase",2021/06/07 10:35 AM
WFCORE-5450,"java version ""1.8.0_281""
Java(TM) SE Runtime Environment (build 8.0.6.26 - pxa6480sr6fp26-20210216_01(SR6 FP26))
IBM J9 VM (build 2.9, JRE 1.8.0 Linux amd64-64-Bit Compressed References 20210216_465732 (JIT enabled, AOT enabled)
OpenJ9 - e5f4f96
OMR - 999051a
IBM - 358762e)
JCL - 20210108_01 based on Oracle jdk8u281-b09

---

[ERROR] Tests run: 23, Failures: 2, Errors: 0, Skipped: 7, Time elapsed: 15.246 s <<< FAILURE! - in org.wildfly.extension.elytron.TlsTestCase
[ERROR] testSslServiceAuthProtocolNoSSLv2HelloOnServerOrClient(org.wildfly.extension.elytron.TlsTestCase) Time elapsed: 0.482 s <<< FAILURE!
java.lang.AssertionError
 at org.wildfly.extension.elytron.TlsTestCase.getSslContext(TlsTestCase.java:672)
 at org.wildfly.extension.elytron.TlsTestCase.getSslContext(TlsTestCase.java:665)
 at org.wildfly.extension.elytron.TlsTestCase.testCommunication(TlsTestCase.java:691)
 at org.wildfly.extension.elytron.TlsTestCase.testSslServiceAuthProtocolNoSSLv2HelloOnServerOrClient(TlsTestCase.java:457)

[ERROR] testSslServiceAuthProtocolOnlyServerSupportsSSLv2Hello(org.wildfly.extension.elytron.TlsTestCase) Time elapsed: 0.521 s <<< FAILURE!
java.lang.AssertionError
 at org.wildfly.extension.elytron.TlsTestCase.getSslContext(TlsTestCase.java:672)
 at org.wildfly.extension.elytron.TlsTestCase.getSslContext(TlsTestCase.java:665)
 at org.wildfly.extension.elytron.TlsTestCase.testCommunication(TlsTestCase.java:691)
 at org.wildfly.extension.elytron.TlsTestCase.testSslServiceAuthProtocolOnlyServerSupportsSSLv2Hello(TlsTestCase.java:441)

 ",2021/06/07 10:13 AM
WFCORE-5445,"Some OR evaluations ( a == true || b == true ) are typed with a single | 
Refer to [https://wiki.sei.cmu.edu/confluence/display/c/EXP46-C.+Do+not+use+a+bitwise+operator+with+a+Boolean-like+operand|https://wiki.sei.cmu.edu/confluence/display/c/EXP46-C.+Do+not+use+a+bitwise+operator+with+a+Boolean-like+operand]

Fix: Use two |",2021/06/05 6:58 PM
WFCORE-5441,"The following code points hide exceptions. A good description of the issue can be found here [https://wiki.sei.cmu.edu/confluence/display/java/ERR04-J.+Do+not+complete+abruptly+from+a+finally+block]
 * [https://github.com/wildfly/wildfly-core/blob/master/cli/src/main/java/org/jboss/as/cli/impl/CommandContextImpl.java#L1800]
 * [https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/AbstractControllerService.java#L1001]
 * [https://github.com/wildfly/wildfly-core/blob/master/controller/src/main/java/org/jboss/as/controller/TemporaryModuleLayer.java#L291]
 * [https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/security/LdapCacheService.java#L335]

The approach is to add a catch clause, keep the original exception and add finally block exceptions as suppressed ones to the original one. The logic shall follow a ""either exception XOR return value"" principle. The interface of the methods shall remain compatible.",2021/06/03 12:59 PM
WFCORE-5408,"https://github.com/jbossas/jboss-classfilewriter/issues/24 fix is needed to prevent failures on SE 17.

https://github.com/jbossas/jboss-classfilewriter/compare/1.2.4.Final...1.2.5.Final",2021/05/16 4:25 PM
WFCORE-5407,"As part of work on WFLY-14431 we added a new testbom bom and added it to dependencyManagement for a few modules as an import scope dependency.

But this is leading to failures in the Dependency Tree Input Builder/check github action, e.g. https://github.com/wildfly/wildfly-core/pull/4590/checks?check_run_id=2588583680. I believe this is because the ""Build base"" step in the action is not building testbom, so the subsequent ""Grab base dependencies"" step fails because the testbom pom is not available in the maven repository.",2021/05/15 3:36 PM
WFCORE-5373,"The /x=y:remove should fail if there is no /x=y, so this one not doing that is a bug.",2021/04/14 6:24 PM
WFCORE-5370,"When RBAC is enabled and a role is map to a user, authenticated metrics requests still operate as 'anonymous', so the authenticated user's roles are not taken into account when determining authorization.",2021/04/09 2:39 PM
WFCORE-5367,"The reproducer shows a sequence of operations where a server group is completely removed and re-added later. If the server group has a server that is using its own jvm definition, when the server and server group are removed and added again, the system properties that the server group had are still shown in the internal model managed by the DC. 

This situation leads to an inconsistent state between the model persisted and the runtime model managed by the DC. The persisted model on the DC configuration (domain.xml) doesn't contain the system property at the server group, but the model managed at runtime has such an obsolete property. Read operations don't show this inconsistency.

At this point, if we try to re-add the same system property that the server group had, we get the following error:

{noformat}
[domain@localhost:9990 /] /server-group=main-server-group/system-property=test:read-resource
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0216: Management resource '[
    (\""server-group\"" => \""main-server-group\""),
    (\""system-property\"" => \""test\"")
]' not found"",
    ""rolled-back"" => true
}

[domain@localhost:9990 /]  /server-group=main-server-group/system-property=test:add(value=true)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => {""host-failure-descriptions"" => {""slave"" => ""WFLYCTL0212: Duplicate resource [
    (\""server-group\"" => \""main-server-group\""),
    (\""system-property\"" => \""test\"")
]""}},
    ""rolled-back"" => true,
    ""result"" => {}
}
{noformat}

Another way to verify this inconsistency is to start the server and inspect the java options passed by the HC. The obsolete property is still being used:

{noformat}
ps -fea | grep java | grep server-one | grep test
{noformat}

",2021/04/07 6:10 AM
WFCORE-5337,"After the following commit

https://github.com/wildfly/wildfly/commit/4319a04fd7c9719d9a0d98d810b2b2278172020c#diff-674f0dbb9b6eb5b35119b7ccc78581ce7a9062e722dbe06599bb0fb1a7b831ba

{{WFLYCTL33}} is being logged when starting the server with configurations that include the extension, e.g.: {{standalone.xml}}. 
The issue is present in WildFly 23.0.0.Final:
{code}
=========================================================================

16:10:55,372 INFO  [org.jboss.modules] (main) JBoss Modules version 1.11.0.Final
16:10:55,747 INFO  [org.jboss.msc] (main) JBoss MSC version 1.4.12.Final
16:10:55,753 INFO  [org.jboss.threads] (main) JBoss Threads version 2.4.0.Final
16:10:55,851 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Full 23.0.0.Final (WildFly Core 15.0.0.Final) starting
16:10:56,554 INFO  [org.wildfly.security] (ServerService Thread Pool -- 28) ELY00001: WildFly Elytron version 1.15.1.Final
16:10:56,851 WARN  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 32) WFLYCTL0033: Extension 'security' is deprecated and may not be supported in future versions
16:10:57,127 INFO  [org.jboss.as.controller.management-deprecated] (Controller Boot Thread) WFLYCTL0028: Attribute 'security-realm' in the resource at address '/core-service=management/management-interface=http-interface' is deprecated, and may be removed in a future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.

{code}

As can be seen from the log, there's another similar message for a deprecated attribute, but that is treated as an {{INFO}} rather than a {{WARN}}.

Following the discussion in the correspondent [JBEAP issue|https://issues.redhat.com/browse/JBEAP-21217?focusedCommentId=15948392&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-15948392], this issue is for reducing the log level for this message to {{INFO}}, see https://github.com/wildfly/wildfly-core/blob/15.0.0.Final/controller/src/main/java/org/jboss/as/controller/logging/ControllerLogger.java#L447",2021/03/12 10:08 AM
WFCORE-5334,"When a Wildfly standalone server is failed to pull Configuration Data from the remote GIT server via HTTPS or SSH, the Configuration Folder(Directory) is removed automatically.

It shouldn't be deleted even if the connection is failed.

 ",2021/03/11 8:25 AM
WFCORE-5333,NoData,2021/03/11 5:38 AM
WFCORE-5328,"{code:java}
  <testcase name=""testPreConfiguredHierarchy"" classname=""org.wildfly.extension.elytron.ExpressionResolutionTestCase"" time=""0.043"">
    <failure message=""{&#10;    &quot;outcome&quot; : &quot;failed&quot;,&#10;    &quot;failure-description&quot; : &quot;WFLYELY00926: Unable to initialize the credential store.&quot;,&#10;    &quot;rolled-back&quot; : true&#10;}"" type=""java.lang.AssertionError"">java.lang.AssertionError: 
{
    ""outcome"" : ""failed"",
    ""failure-description"" : ""WFLYELY00926: Unable to initialize the credential store."",
    ""rolled-back"" : true
}
	at org.wildfly.extension.elytron.ExpressionResolutionTestCase.assertSuccess(ExpressionResolutionTestCase.java:255)
	at org.wildfly.extension.elytron.ExpressionResolutionTestCase.testExpectedAliases(ExpressionResolutionTestCase.java:115)
	at org.wildfly.extension.elytron.ExpressionResolutionTestCase.testPreConfiguredHierarchy(ExpressionResolutionTestCase.java:101)
</failure>
    <system-out><![CDATA[Mar 05, 2021 11:52:28 AM org.jboss.as.controller.AttributeDefinition validateAndSet
INFO: WFLYCTL0028: Attribute 'location' in the resource at address '/subsystem=elytron/credential-store=CredentialStoreOne' is deprecated, and may be removed in a future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
Mar 05, 2021 11:52:28 AM org.jboss.as.controller.AttributeDefinition validateAndSet
INFO: WFLYCTL0028: Attribute 'location' in the resource at address '/subsystem=elytron/credential-store=CredentialStoreTwo' is deprecated, and may be removed in a future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.
Mar 05, 2021 11:52:28 AM org.jboss.as.controller.AbstractOperationContext executeStep
ERROR: WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""key-store"" => ""KeyStoreTwo"")
]) - failure description: ""WFLYELY00926: Unable to initialize the credential store.""
Mar 05, 2021 11:52:28 AM org.jboss.msc.service.ServiceControllerImpl startFailed
ERROR: MSC000001: Failed to start service org.wildfly.security.credential-store.CredentialStoreTwo
org.jboss.msc.service.StartException in service org.wildfly.security.credential-store.CredentialStoreTwo: WFLYELY00004: Unable to start the service.
	at org.wildfly.extension.elytron.CredentialStoreResourceDefinition$CredentialStoreDoohickey$1.get(CredentialStoreResourceDefinition.java:535)
	at org.wildfly.extension.elytron.CredentialStoreResourceDefinition$CredentialStoreDoohickey$1.get(CredentialStoreResourceDefinition.java:492)
	at org.wildfly.extension.elytron.ElytronDoohickey.get(ElytronDoohickey.java:106)
	at org.wildfly.extension.elytron.DoohickeyAddHandler$$Lambda$184.000000008412A3D0.get(Unknown Source)
	at org.wildfly.extension.elytron.TrivialService.start(TrivialService.java:61)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
	at java.lang.Thread.run(Thread.java:785)
Caused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store
	at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.load(KeyStoreCredentialStore.java:883)
	at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.initialize(KeyStoreCredentialStore.java:223)
	at org.wildfly.security.credential.store.CredentialStore.initialize(CredentialStore.java:160)
	at org.wildfly.extension.elytron.CredentialStoreResourceDefinition$CredentialStoreDoohickey$1$1.run(CredentialStoreResourceDefinition.java:527)
	at org.wildfly.extension.elytron.CredentialStoreResourceDefinition$CredentialStoreDoohickey$1.get(CredentialStoreResourceDefinition.java:531)
	... 12 more
Caused by: java.io.IOException: com.sun.crypto.provider.SealedObjectForKeyProtector
	at com.ibm.crypto.provider.JceKeyStore.engineLoad(Unknown Source)
	at java.security.KeyStore.load(KeyStore.java:1456)
	at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.load(KeyStoreCredentialStore.java:871)
	... 16 more

Mar 05, 2021 11:52:28 AM org.jboss.as.controller.AbstractOperationContext executeStep
ERROR: WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""credential-store"" => ""CredentialStoreTwo"")
]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.credential-store.CredentialStoreTwo"" => ""WFLYELY00004: Unable to start the service.
    Caused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store
    Caused by: java.io.IOException: com.sun.crypto.provider.SealedObjectForKeyProtector""}}
Mar 05, 2021 11:52:28 AM org.jboss.as.controller.ContainerStateMonitor logContainerStateChangesAndReset
INFO: WFLYCTL0183: Service status report
WFLYCTL0186:   Services which failed to start:      service org.wildfly.security.credential-store.CredentialStoreTwo: WFLYELY00004: Unable to start the service.
WFLYCTL0448: 1 additional services are down due to their dependencies being missing or failed
Mar 05, 2021 11:52:28 AM org.jboss.as.controller.AbstractOperationContext executeStep
ERROR: WFLYCTL0013: Operation (""read-aliases"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""credential-store"" => ""CredentialStoreTwo"")
]) - failure description: ""WFLYELY00926: Unable to initialize the credential store.""
{code}
 ",2021/03/04 3:49 PM
WFCORE-5322,The Bootable JAR runtime override the value of this system property with a path relative to bootable jar home. It should check that the value is not set prior to set it.,2021/03/03 11:44 AM
WFCORE-5302,"The {[reload}} operation of the {{secret-key-creadential-store}} resource results in an error

{noformat}
[domain@localhost:9990 /] /subsystem=elytron/secret-key-credential-store=a:add(path=ax)
{""outcome"" => ""success""}

[domain@localhost:9990 /] /subsystem=elytron/secret-key-credential-store=a:read-aliases
{
    ""outcome"" => ""success"",
    ""result"" => [""key""]
}

[domain@localhost:9990 /] /subsystem=elytron/secret-key-credential-store=a:reload
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.ClassCastException: class org.wildfly.extension.elytron.SecretKeyCredentialStoreDefinition$SecretKeyDoohickey cannot be cast to clas
s org.wildfly.extension.elytron.CredentialStoreResourceDefinition$CredentialStoreDoohickey (org.wildfly.extension.elytron.SecretKeyCredentialStoreDefinition$SecretKeyDoohickey and org.wildfly.extension.elytron.C
redentialStoreResourceDefinition$CredentialStoreDoohickey are in unnamed module of loader 'org.wildfly.extension.elytron@15.0.0.Beta1-SNAPSHOT' @50dfce09)"",
    ""rolled-back"" => true
}
{noformat}",2021/02/19 12:04 PM
WFCORE-5298,"The error message from the {{export-secret-key}} operation on the {{credential-store}} and {{secret-key-credential-store}} resources should be more helpful when exporting invalid alias

{noformat}
[standalone@localhost:9990 /] /subsystem=elytron/secret-key-credential-store=b:read-aliases
{
 ""outcome"" => ""success"",
 ""result"" => [""key""]
}

[standalone@localhost:9990 /] /subsystem=elytron/secret-key-credential-store=b:export-secret-key(alias=key2)
{
 ""outcome"" => ""failed"",
 ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.IllegalArgumentException: value is null"",
 ""rolled-back"" => true
}
{noformat}",2021/02/19 10:08 AM
WFCORE-5297,"In the Elytron subsystem, the {{secret-key-credential-store}} resource has the {{path}} attribute which is inconsistent with the {{credential-store}} resource with the {{location}} attribute.

The rest of the subsystem we have tried to stick to {{path}} and {{relative-to}} as a common pair.  Maybe we could deprecate {{location}} on {{credential-store}} and add path there.",2021/02/19 8:59 AM
WFCORE-5296,"The error message from the {{import-secret-key}} operation on the {{credential-store}} and {{secret-key-credential-store}} resources should be more helpful when importing invalid key (truncated in this case)
{noformat}
[standalone@localhost:9990 /] /subsystem=elytron/credential-store=a:import-secret-key(alias=a2,key=RUxZA)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""COM00501: Expected padding"",
    ""rolled-back"" => true
}
{noformat}
The same message appears when loading a file with a corrupted key.",2021/02/19 8:53 AM
WFCORE-5303,"The {{:resolve-expression}} operation does not resolve encrypted expressions.

{noformat}
[standalone@localhost:9990 /] /subsystem=elytron/expression=encryption:read-resource
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""default-resolver"" => ""Default"",
        ""prefix"" => ""ENC"",
        ""resolvers"" => [
            {
                ""name"" => ""Default"",
                ""credential-store"" => ""credentialstorethree"",
                ""secret-key"" => ""secretkey""
            },
            {
                ""name"" => ""resolver2"",
                ""credential-store"" => ""credentialstorethree"",
                ""secret-key"" => ""secretkey2""
            }
        ]
    }
}

[standalone@localhost:9990 /] /subsystem=elytron/expression=encryption:create-expression(clear-text=CredentialStoreTwoPassword)
{
    ""outcome"" => ""success"",
    ""result"" => {""expression"" => ""${ENC::RUxZAUMQHrI7PMuvU+0pJ9EgITJmFPWa9iIb5yZ6i9K3mtgnY2kLo3AIL4d/GIeo7GKzSkXB}""}
}

[standalone@localhost:9990 /] :resolve-expression(expression=""${ENC::RUxZAUMQHrI7PMuvU+0pJ9EgITJmFPWa9iIb5yZ6i9K3mtgnY2kLo3AIL4d/GIeo7GKzSkXB}"")
{
    ""outcome"" => ""success"",
    ""result"" => "":RUxZAUMQHrI7PMuvU+0pJ9EgITJmFPWa9iIb5yZ6i9K3mtgnY2kLo3AIL4d/GIeo7GKzSkXB""
}
{noformat}",2021/02/19 8:37 AM
WFCORE-5272,"Performing:

/subsystem=security:write-attribute(name=initialize-jacc, value=false)
/subsystem=elytron/policy=jacc:add(jacc-policy={})
reload

Generates:
-------------------------------------
Operation: /subsystem=elytron/policy=jacc:add(jacc-policy={})
Failure: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.policy"" => ""java
.lang.RuntimeException: WFLYELY01024: Failed to register policy context handlers
Caused by: java.lang.RuntimeException: WFLYELY01024: Failed to register policy
context handlers
Caused by: java.lang.IllegalStateException: WFLYELY01069: Invalid javax.securit
y.jacc.PolicyConfigurationFactory loaded, expected org.wildfly.security.authz.jacc.
ElytronPolicyConfigurationFactory but received org.jboss.security.jacc.JBossPolicyC
onfigurationFactory.""}}
-------------------------------------",2021/02/05 10:27 AM
WFCORE-5268,NoData,2021/02/04 6:07 AM
WFCORE-5265,Presently the testing of new resources and attributed to be rejected has been bundled into the EAP 7.2 test but we need to split this out into their own EAP 7.3 specific test.,2021/02/02 8:41 AM
WFCORE-5256,"Http management interface has an attribute console-enabled which allows expression:
{code:java}
[standalone@localhost:9990 /] /core-service=management/management-interface=http-interface:read-resource-description
...
 ""console-enabled"" => {
 ""type"" => BOOLEAN,
 ""description"" => ""Flag that indicates admin console is enabled"",
 ""expressions-allowed"" => true,
 ""required"" => false,
 ""nillable"" => true,
 ""default"" => true,
 ""access-type"" => ""read-write"",
 ""storage"" => ""configuration"",
 ""restart-required"" => ""all-services""
 },

...
{code}
However I am unable to set it:
{code:java}
[standalone@localhost:9990 /] /core-service=management/management-interface=http-interface:write-attribute(name=console-enabled, value=${my.var:true})
{
 ""outcome"" => ""failed"",
 ""failure-description"" => ""WFLYCTL0086: Failed to persist configuration change: WFLYCTL0084: Failed to marshal configuration"",
 ""rolled-back"" => true
}
{code}
WildFly stacktrace:
{code:java}
17:36:35,971 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0008: Failed to persist configuration change: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0084: Failed to marshal configuration
 at org.jboss.as.controller.persistence.AbstractFilePersistenceResource.<init>(AbstractFilePersistenceResource.java:53)
 at org.jboss.as.controller.persistence.ConfigurationFilePersistenceResource.<init>(ConfigurationFilePersistenceResource.java:46)
 at org.jboss.as.controller.persistence.BackupXmlConfigurationPersister.store(BackupXmlConfigurationPersister.java:120)
 at org.jboss.as.controller.ModelControllerImpl.writeModel(ModelControllerImpl.java:728)
 at org.jboss.as.controller.OperationContextImpl.createPersistenceResource(OperationContextImpl.java:535)
 at org.jboss.as.controller.AbstractOperationContext.executeDoneStage(AbstractOperationContext.java:821)
 at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:770)
 at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:468)
 at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1415)
 at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:431)
 at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:248)
 at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)
 at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)
 at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:248)
 at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:240)
 at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:138)
 at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:162)
 at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:158)
 at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)
 at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)
 at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
 at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
 at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:158)
 at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
 at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
 at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
 at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
 at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
 at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
 at java.lang.Thread.run(Thread.java:748)
 at org.jboss.threads.JBossThread.run(JBossThread.java:513)
Caused by: org.jboss.as.controller.persistence.ConfigurationPersistenceException: WFLYCTL0089: Failed to write configuration
 at org.jboss.as.controller.persistence.AbstractConfigurationPersister.marshallAsXml(AbstractConfigurationPersister.java:112)
 at org.jboss.as.controller.persistence.AbstractFilePersistenceResource.<init>(AbstractFilePersistenceResource.java:46)
 ... 30 more
Caused by: java.lang.IllegalArgumentException
 at org.jboss.dmr.ModelValue.asBoolean(ModelValue.java:73)
 at org.jboss.dmr.ModelNode.asBoolean(ModelNode.java:337)
 at org.jboss.as.server.parsing.StandaloneXml_15.writeHttpManagementProtocol(StandaloneXml_15.java:975)
 at org.jboss.as.domain.management.parsing.ManagementXml_5.writeManagementInterfaces(ManagementXml_5.java:2458)
 at org.jboss.as.domain.management.parsing.ManagementXml_5.writeManagement(ManagementXml_5.java:2020)
 at org.jboss.as.server.parsing.StandaloneXml_15.writeContent(StandaloneXml_15.java:757)
 at org.jboss.as.server.parsing.StandaloneXml.writeContent(StandaloneXml.java:148)
 at org.jboss.as.server.parsing.StandaloneXml.writeContent(StandaloneXml.java:52)
 at org.jboss.staxmapper.XMLMapperImpl.doDeparse(XMLMapperImpl.java:96)
 at org.jboss.staxmapper.XMLMapperImpl.deparseDocument(XMLMapperImpl.java:91)
 at org.jboss.as.controller.persistence.AbstractConfigurationPersister.marshallAsXml(AbstractConfigurationPersister.java:106)
 ... 31 more

{code}",2021/01/27 3:11 PM
WFCORE-5257,"First of all, I am not sure about the component, feel free to change it.

*Issue:*

When remoute outbound socket binding is added:
{code:java}
/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=node-3:add(host=localhost, port=7900)
{code}
I can not change fixed-source-port attribute  
{code:java}
[standalone@localhost:9990 /] /socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=node-3:write-attribute(name=fixed-source-port, value=false)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0155: 'socket-binding-ref' may not be null"",
    ""rolled-back"" => true
}
{code}
next try ends up with different error:
{code:java}
[standalone@localhost:9990 /] /socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=node-3:write-attribute(name=fixed-source-port, value=false)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: org.jboss.msc.service.ServiceNotFoundException: service org.wildfly.network.outbound-socket-binding.node-3 not found"",
    ""rolled-back"" => true
}


16:31:33,000 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""write-attribute"") failed - address: ([
    (""socket-binding-group"" => ""standard-sockets""),
    (""remote-destination-outbound-socket-binding"" => ""node-3"")
]): org.jboss.msc.service.ServiceNotFoundException: service org.wildfly.network.outbound-socket-binding.node-3 not found
	at org.jboss.msc.service.ServiceContainerImpl.getRequiredService(ServiceContainerImpl.java:663)
	at org.jboss.as.controller.OperationContextImpl$OperationContextServiceRegistry.getRequiredService(OperationContextImpl.java:2285)
	at org.jboss.as.server.services.net.OutboundSocketBindingWriteHandler.applyUpdateToRuntime(OutboundSocketBindingWriteHandler.java:75)
	at org.jboss.as.controller.AbstractWriteAttributeHandler$1.execute(AbstractWriteAttributeHandler.java:110)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1005)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:744)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:468)
	at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1415)
	at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:431)
	at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:248)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)
	at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:248)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:240)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:138)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:162)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:158)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
	at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:158)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
	at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:513)
{code}
 

However if the destination is used like the mail-smtp:
{code:java}
<subsystem xmlns=""urn:jboss:domain:mail:4.0"">
    <mail-session name=""default"" jndi-name=""java:jboss/mail/Default"">
        <smtp-server outbound-socket-binding-ref=""mail-smtp""/>
    </mail-session>
</subsystem>
{code}
the attribute can be changed. See the attached xml: node-1 vs node-2.

 ",2021/01/27 10:44 AM
WFCORE-5254,LegacyConfigurationChangeResourceDefinition and InMemoryAuditLogHandlerResourceDefinition populate the runtime from the operation. They should populate from the Resource tree's model.,2021/01/25 6:53 PM
WFCORE-5248,"When trying to specify the EvaluatorClass where the class exists in the module custom.evaluator , it fails with a ClassNotFound because the TCL is org.jboss.as.standalone instead of custom.evaluator module:

{code}
Loader.getTCL return: ModuleClassLoader for Module ""org.jboss.as.standalone"" from local module loader @6adede5 (finder: local module finder @2d928643 (roots: /tmp/jboss-eap-7.3/modules,/tmp/jboss-eap-7.3/modules/system/layers/base))
log4j:ERROR Could not instantiate class [org.apache.log4j.asm.INFOLevelEvaluator].
java.lang.ClassNotFoundException: org.apache.log4j.asm.INFOLevelEvaluator from [Module ""org.jboss.log4j.logmanager"" version 1.2.0.Final-redhat-00001 from local module loader @6adede5 (finder: local module finder @2d928643 (roots: /tmp/jboss-eap-7.3/modules,/tmp/jboss-eap-7.3/modules/system/layers/base))]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:264)
        at org.apache.log4j.helpers.Loader.loadClass(Loader.java:197)
        at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:326)
        at org.apache.log4j.net.SMTPAppender.setEvaluatorClass(SMTPAppender.java:549)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.jboss.logmanager.config.AbstractPropertyConfiguration$1.applyPostCreate(AbstractPropertyConfiguration.java:217)
        at org.jboss.logmanager.config.AbstractPropertyConfiguration$1.applyPostCreate(AbstractPropertyConfiguration.java:197)
        at org.jboss.logmanager.config.LogContextConfigurationImpl.doApplyPostCreate(LogContextConfigurationImpl.java:313)
        at org.jboss.logmanager.config.LogContextConfigurationImpl.doPrepare(LogContextConfigurationImpl.java:345)
        at org.jboss.logmanager.config.LogContextConfigurationImpl.prepare(LogContextConfigurationImpl.java:289)
        at org.jboss.logmanager.config.LogContextConfigurationImpl.commit(LogContextConfigurationImpl.java:298)
        at org.jboss.logmanager.PropertyConfigurator.configure(PropertyConfigurator.java:546)
        at org.jboss.logmanager.PropertyConfigurator.configure(PropertyConfigurator.java:97)
        at org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:170)
        at org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:132)
        at java.util.logging.LogManager$3.run(LogManager.java:399)
        at java.util.logging.LogManager$3.run(LogManager.java:396)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.util.logging.LogManager.readPrimordialConfiguration(LogManager.java:396)
        at java.util.logging.LogManager.access$800(LogManager.java:145)
        at java.util.logging.LogManager$2.run(LogManager.java:345)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.util.logging.LogManager.ensureLogManagerInitialized(LogManager.java:338)
        at java.util.logging.LogManager.getLogManager(LogManager.java:378)
        at org.jboss.modules.Main.main(Main.java:457)
{code}

{code}
            <custom-handler name=""email"" class=""org.apache.log4j.net.SMTPAppender"" module=""custom.evaluator"">
                <level name=""INFO""/>
                <filter-spec value=""match(&quot;WFLYSRV0025&quot;)""/>
                <formatter>
                    <named-formatter name=""PATTERN""/>
                </formatter>
                <properties>
                    <property name=""EvaluatorClass"" value=""org.apache.log4j.asm.INFOLevelEvaluator""/>
                ...
                </properties>
            </custom-handler>
{code}",2021/01/21 11:06 AM
WFCORE-5247,"Pressing TAB after typing ""read-attribute "" in /system-property displays a java.lang.IllegalArgumentException: newValue is null message and exits JBoss CLI.

 

{{/opt/wildfly/bin/jboss-cli.sh --connect}}
{{[standalone@localhost:9990 /] cd /system-property}}
{{[standalone@localhost:9990 system-property] read-attribute <TAB>}}

{{Exception in thread ""CLI Terminal Connection (uninterruptable)"" java.lang.IllegalArgumentException: newValue is null}}",2021/01/20 5:32 AM
WFCORE-5243,"If the security manager contains an invalid class or other data in the minimum-set it throws a NullPointerException instead of a useful error message.

 
{noformat}
ERROR [management-operation] WFLYCTL0013 : Operation (""add"") failed - address ([(""subsystem"" => ""security-manager"")]): java.lang.NullPointerException 
 at java.security.Permissions.getPermissionCollection(Permissions.java:240) 
 at java.security.Permissions.implies(Permissions.java:179) at org.jboss.modules.security.FactoryPermissionCollection.implies(FactoryPermissionCollection.java:75) at org.wildfly.extension.security.manager.SecurityManagerSubsystemAdd.performBoottime(SecurityManagerSubsystemAdd.java:101)
...{noformat}
 

 

The same thing happens with other missing data.
 * Works:
{noformat}
<permission class=""java.io.FilePermission"" name=""/foo"" actions=""read""/>{noformat}

 * Fail with NullPointerException:
{noformat}
<permission class=""invalid.class.name"" name=""/foo"" actions=""read""/>{noformat}
{noformat}
<permission class=""java.io.FilePermission"" name=""/foo""/>{noformat}
{noformat}
<permission class=""java.io.FilePermission"" actions=""read""/>{noformat}

 

The NullPointerException does not occur if maximum-set is absent, or contains *java.security.AllPermission*",2021/01/14 3:00 AM
WFCORE-5239," Steps to Reproduce work using OpenJDK 8, but on OpenJDK 11 the following exception gets thrown:
{code:java}
{{ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([}}
{{ (""subsystem"" => ""elytron""),}}
{{ (""key-store"" => ""pkcs11ks"")}}
{{]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.key-store.pkcs11ks"" => ""WFLYELY00004: Unable to start the service.}}
{{ Caused by: org.jboss.msc.service.StartException in anonymous service: WFLYELY00012: No suitable provider found for type 'PKCS11'""}}}}
{code}
Configuration loading for SunPKCS11 was changed after Java 8 and the constructor that accepts InputStream configuration is not present in openjdk 11. Maybe because of this, the configuration is ignored when it is passed in *provider-loader*. ",2021/01/06 6:52 AM
WFCORE-5238,"The legacy security realm automatically can generate a JKS keystore based on the following configuration:
{code:java}
            <security-realm name=""ApplicationRealm"">
                <server-identities>
                    <ssl>
                        <keystore path=""application.keystore"" relative-to=""jboss.server.config.dir"" keystore-password=""password"" alias=""server"" key-password=""password"" generate-self-signed-certificate-host=""localhost""/>
                    </ssl>
                </server-identities>
                <authentication>
                    <local default-user=""$local"" allowed-users=""*"" skip-group-loading=""true""/>
                    <properties path=""application-users.properties"" relative-to=""jboss.server.config.dir""/>
                </authentication>
                <authorization>
                    <properties path=""application-roles.properties"" relative-to=""jboss.server.config.dir""/>
                </authorization>
            </security-realm> {code}
The Elytron subsystem can also generate one but is configured to use PKCS#12:
{code:java}
            <tls>
                <key-stores>
                    <key-store name=""applicationKS"">
                        <credential-reference clear-text=""password""/>
                        <implementation type=""PKCS12""/>
                        <file path=""application.keystore"" relative-to=""jboss.server.config.dir""/>
                    </key-store>
                </key-stores>
                <key-managers>
                    <key-manager name=""applicationKM"" key-store=""applicationKS"" generate-self-signed-certificate-host=""localhost"">
                        <credential-reference clear-text=""password""/>
                    </key-manager>
                </key-managers>
                <server-ssl-contexts>
                    <server-ssl-context name=""applicationSSC"" key-manager=""applicationKM""/>
                </server-ssl-contexts>
            </tls> {code}
PKCS#12 would be the better option for the future but as this KeyStore definition is potentially reusing an existing generated KeyStore we will need to drop back to JKS.

 ",2021/01/05 12:49 PM
WFCORE-5219,"WFCORE-5183 caused OpenSSL tests started to be ignored on JDK 11, see short discussion:

https://github.com/wildfly/wildfly-core/pull/4419",2020/12/08 3:03 AM
WFCORE-5216,"Since JBoss EAP 7.3 for OpenShift, if environment variable JBOSS_MODULEPATH=${JBOSS_HOME}/modules:${HOME} which contains bash variable is set via DeploymentConfig, EAP Pod fails to start with the following messages:
{noformat}
INFO Duration: 347 milliseconds
ERROR Error applying /tmp/cli-configuration-script-1594252654.cli CLI script.
org.jboss.modules.ModuleNotFoundException: org.jboss.as.cli
	at org.jboss.modules.ModuleLoader.loadModule(ModuleLoader.java:297)
	at org.jboss.modules.Main.main(Main.java:371)
{noformat}

This issue does not occur on JBoss EAP 7.2 container.",2020/12/04 9:20 AM
WFCORE-5195,NoData,2020/11/20 5:49 AM
WFCORE-5193,"Testsuite: make IS_J9_JVM variable more robust

So far, this variable is defined by ""java.vendor"" system property.
{code:java}
IS_J9_JVM = System.getProperty(""java.vendor"").contains(""OpenJ9"") || IS_IBM_JVM;
{code}

But this detection fails on Eclipse OpenJ9 VM AdoptOpenJDK (where ""java.vendor"" is ""AdoptOpenJDK""). Which leads to the fail of JmxControlledStateNotificationsTestCase testcase in domain module on this JDK.

I suggest to add ""java.vm.vendor"" property to the previous detection (""Eclipse OpenJ9"" on Eclipse OpenJ9 VM AdoptOpenJDK)

Originally, IS_J9_JVM was introduced in WFCORE-4690",2020/11/18 9:15 AM
WFCORE-5187,"{{RemoteSshGitRepositoryTestCase}} results in error when the hostname is not {{localhost}}.

{noformat}
java.lang.RuntimeException: WFLYSRV0269: Failed to initialize the repository ssh://testEC@127.0.0.1:42235/doesntmatter
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.controller.git.GitRepository.<init>(GitRepository.java:150)
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.ServerEnvironment.<init>(ServerEnvironment.java:530)
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.Main.determineEnvironment(Main.java:388)
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.Main.main(Main.java:96)
	at org.jboss.modules.Module.run(Module.java:352)
	at org.jboss.modules.Module.run(Module.java:320)
	at org.jboss.modules.Main.main(Main.java:617)
Caused by: org.eclipse.jgit.api.errors.TransportException: ssh://testEC@127.0.0.1:42235/doesntmatter: DefaultAuthFuture[ssh-connection]: Failed (UnsupportedCredentialItem) to execute: ssh://testEC@okotek.abc:42235: org.eclipse.jgit.transport.CredentialItem$InformationalMessage:The authenticity of host 'okotek.abc' cannot be established.
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:222)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263)
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.controller.git.GitRepository.<init>(GitRepository.java:144)
	... 6 more
Caused by: org.eclipse.jgit.errors.TransportException: ssh://testEC@127.0.0.1:42235/doesntmatter: DefaultAuthFuture[ssh-connection]: Failed (UnsupportedCredentialItem) to execute: ssh://testEC@okotek.abc:42235: org.eclipse.jgit.transport.CredentialItem$InformationalMessage:The authenticity of host 'okotek.abc' cannot be established.
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:233)
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.controller.git.ElytronClientSshdSessionFactory.getSession(ElytronClientSshdSessionFactory.java:129)
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.controller.git.ElytronClientSshdSessionFactory.getSession(ElytronClientSshdSessionFactory.java:69)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.<init>(TransportGitSsh.java:254)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:144)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:105)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:91)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.Transport.fetch(Transport.java:1260)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:211)
	... 8 more
Caused by: org.apache.sshd.common.SshException: DefaultAuthFuture[ssh-connection]: Failed (UnsupportedCredentialItem) to execute: ssh://testEC@okotek.abc:42235: org.eclipse.jgit.transport.CredentialItem$InformationalMessage:The authenticity of host 'okotek.abc' cannot be established.
	at org.apache.sshd@2.4.0//org.apache.sshd.common.future.AbstractSshFuture.lambda$verifyResult$1(AbstractSshFuture.java:137)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.future.AbstractSshFuture.formatExceptionMessage(AbstractSshFuture.java:196)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:136)
	at org.apache.sshd@2.4.0//org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:39)
	at org.apache.sshd@2.4.0//org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:32)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:93)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:229)
	... 17 more
Caused by: org.eclipse.jgit.errors.UnsupportedCredentialItem: ssh://testEC@okotek.abc:42235: org.eclipse.jgit.transport.CredentialItem$InformationalMessage:The authenticity of host 'okotek.abc' cannot be established.
	at org.jboss.as.server@14.0.0.Beta2-SNAPSHOT//org.jboss.as.server.controller.git.ElytronClientCredentialsProvider.get(ElytronClientCredentialsProvider.java:95)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.transport.CredentialsProvider.get(CredentialsProvider.java:125)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.internal.transport.sshd.OpenSshServerKeyDatabase$AskUser.askUser(OpenSshServerKeyDatabase.java:422)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.internal.transport.sshd.OpenSshServerKeyDatabase$AskUser.acceptUnknownKey(OpenSshServerKeyDatabase.java:479)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.internal.transport.sshd.OpenSshServerKeyDatabase.accept(OpenSshServerKeyDatabase.java:243)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.internal.transport.sshd.JGitServerKeyVerifier.verifyServerKey(JGitServerKeyVerifier.java:94)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.internal.transport.sshd.JGitClientSession.checkKeys(JGitClientSession.java:342)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:578)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:464)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:392)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1304)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:348)
	at org.eclipse.jgit@5.9.0.202009080501-r//org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:330)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:63)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:368)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:346)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:343)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at org.apache.sshd@2.4.0//org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37)
	at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)
	at java.base/sun.nio.ch.Invoker$2.run(Invoker.java:219)
	at java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
...
{noformat}

This is a test issue, adding the hostname to test known hosts helps.",2020/11/10 8:20 AM
WFCORE-5185,"A new API is being added to JBoss Modules to optimise how loaded services can be filtered, this will allow us to filter out the JDK provided security providers before they are instantiated.  

Presently we can filter after instantiation which is wasted overhead during boot, including contributing the GC overhead.

Once this issue is available we can switch over:
  https://issues.redhat.com/browse/MODULES-402",2020/11/05 5:04 AM
WFCORE-5183,"We are running into an issue where calls to ServiceLoader.load(Provider, ClassLoader) are returning JVM security providers in addition to the providers defined in the META-INF/services of the individual module.

Ideally this should be handled within JBoss Modules but in the meantime these additional Providers are causing problems so this issue is to filter them out by detecting if they were loaded by a ModuleClassLoader.",2020/11/04 11:29 AM
WFCORE-5181,"A defined system property with a configured trailing blank should be used as is, as this might be an intended configuration by the user.

When starting the server trailing whitespaces in a system property containing an expression are trimmed.",2020/11/03 5:58 AM
WFCORE-5174,"{code}
Tests run: 29, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 12.721 s <<< FAILURE! - in org.wildfly.extension.elytron.KeyStoresTestCase
testGenerateKeyPair(org.wildfly.extension.elytron.KeyStoresTestCase)  Time elapsed: 0.31 s  <<< FAILURE!
java.lang.AssertionError: expected:<365> but was:<364>
	at org.wildfly.extension.elytron.KeyStoresTestCase.testGenerateKeyPair(KeyStoresTestCase.java:559)
{code}

KeyStoresTestCase wrongly rounds days which leads to a failure in case of different daylight saving time between the creation and expiration of a testing certificate, see https://github.com/wildfly/wildfly-core/blob/master/elytron/src/test/java/org/wildfly/extension/elytron/KeyStoresTestCase.java#L559
{code}
            Date notBefore = certificate.getNotBefore();
            Date notAfter = certificate.getNotAfter();
            assertEquals(365, (notAfter.getTime() - notBefore.getTime()) / (1000 * 60 * 60 * 24));
{code}

",2020/10/27 7:06 AM
WFCORE-5168,The artifacts org.wildfly.core:wildfly-core-feature-pack-common and org.wildfly.core:wildfly-core-feature-pack-ee-8-api are not in the WildFly distribution and can be excluded from the licenses,2020/10/22 3:42 PM
WFCORE-5167,NoData,2020/10/22 10:35 AM
WFCORE-5155,"WFCORE-5114 made a slight change with how the configuration API commits the logging changes. When upgrading the core version in wildfly-jar-maven-plugin a test failure occurred in the PR https://github.com/wildfly-extras/wildfly-jar-maven-plugin/pull/137.

{code}
Error:    BootLoggingConfigurationTestCase.testSocketHandler:321->executeOperation:711 Operation {
    ""operation"" => ""composite"",
    ""address"" => [],
    ""rollback-on-runtime-failure"" => true,
    ""steps"" => [
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""socket-binding-group"" => ""standard-sockets""),
                (""remote-destination-outbound-socket-binding"" => ""log-server"")
            ],
            ""host"" => ""127.0.0.1"",
            ""port"" => 10514
        },
        {
            ""operation"" => ""add"",
            ""address"" => [
                (""subsystem"" => ""logging""),
                (""socket-handler"" => ""socket"")
            ],
            ""named-formatter"" => ""PATTERN"",
            ""outbound-socket-binding-ref"" => ""log-server""
        },
        {
            ""operation"" => ""add-handler"",
            ""address"" => [
                (""subsystem"" => ""logging""),
                (""root-logger"" => ""ROOT"")
            ],
            ""name"" => ""socket""
        }
    ]
} failed: {""WFLYCTL0062: Composite operation failed and was rolled back. Steps that failed:"" => {""Operation step-2"" => {""WFLYCTL0080: Failed services"" => {""org.wildfly.logging.handler.\""org.wildfly.logging.handler.socket\"""" => ""Failed to start service
    Caused by: java.lang.NullPointerException""}}}}
{code}

The NPE is in the service where the {{DelayedHandler}} instance is used, but returns {{null}} for some reason. I could not reproduce this locally, however it did happen locally for me with the {{ascyn-handler}} in the test. This may be a way to reproduce this locally.",2020/10/12 12:13 PM
WFCORE-5136,"The fix for JBEAP-19870 causes a NPE being thrown for some JMX calls.
{code}
15:50:42,596 WARN  [org.jboss.remotingjmx.protocol.v2.ServerCommon] (pool-13-thread-1) Unexpected internal error: java.lang.NullPointerException
	at org.jboss.as.jmx.model.ModelControllerMBeanHelper.invoke(ModelControllerMBeanHelper.java:556) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.jmx.model.ModelControllerMBeanHelper.invoke(ModelControllerMBeanHelper.java:487) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.jmx.model.ModelControllerMBeanServerPlugin.invoke(ModelControllerMBeanServerPlugin.java:193) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.jmx.PluggableMBeanServerImpl.invoke(PluggableMBeanServerImpl.java:727) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.jmx.BlockingNotificationMBeanServer.invoke(BlockingNotificationMBeanServer.java:168) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.jmx.AuthorizingMBeanServer.invoke(AuthorizingMBeanServer.java:258) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.remotingjmx.protocol.v2.ServerProxy$InvokeHandler.handle(ServerProxy.java:950)
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1$1.run(ServerCommon.java:153)
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:71) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor$1.run(ServerInterceptorFactory.java:66) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:313) [wildfly-elytron-auth-server-1.10.8.Final-redhat-00001.jar:1.10.8.Final-redhat-00001]
	at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270) [wildfly-elytron-auth-server-1.10.8.Final-redhat-00001.jar:1.10.8.Final-redhat-00001]
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254) [wildfly-controller-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225) [wildfly-controller-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.as.jmx.ServerInterceptorFactory$Interceptor.handleEvent(ServerInterceptorFactory.java:66) [wildfly-jmx-10.1.12.Final-redhat-00001.jar:10.1.12.Final-redhat-00001]
	at org.jboss.remotingjmx.protocol.v2.ServerCommon$MessageReciever$1.run(ServerCommon.java:149)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [rt.jar:1.8.0_265]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [rt.jar:1.8.0_265]
	at java.lang.Thread.run(Thread.java:748) [rt.jar:1.8.0_265]

{code}
",2020/09/17 6:31 AM
WFCORE-5121,"I followed EAP 7.2 documentation [1]  and have successfully configured a JBoss EAP 7.2.8 Domain Controller to Administer a JBoss EAP 7.1.6 Host Controller.

I have followed all the steps listed in there and believe the configuration is OK. Both the master DC and host slave hosts started fine.

The remote slave host ""SlaveEAP71"" registered successfully into the EAP 7.2.8 DC

Cf.>>>
{code:java}
...

[Host Controller] 20:34:54,387 INFO [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: JBoss EAP 7.2.8.GA (WildFly Core 6.0.27.Final-redhat-00001) (Host Controller) started in 6162ms - Started 81 of 83 services (23 services are lazy, passive or on-demand)

... 
[Host Controller] 20:35:12,457 INFO [org.jboss.as.domain.controller] (Host Controller Service Threads - 9) WFLYHC0019: Registered remote slave host ""SlaveEAP71"", JBoss JBoss EAP 7.1.6.GA (WildFly 3.0.21.Final-redhat-00001)

 ...

{code}
 

However, when trying to add a new server in a server-group with profile copied from the older EAP 7.1.6 host , I'm not able to have this working. The following error always comes up on CLI started on EAP 7.2.8 Domain Controller
{code:java}
[domain@10.44.130.73:9990 /] /host=SlaveEAP71/server-config=SlaveJvm-EAP71:add(group=ServerGroup-eap71)
{
 ""outcome"" => ""failed"",
 ""result"" => {},
 ""failure-description"" => {""host-failure-descriptions"" => {""SlaveEAP71"" => ""WFLYHC0201: Error synchronizing the host model with the domain controller model with failure : WFLYDC0075: Cannot synchronize the model due to missing extensions: [org.wildfly.extension.microprofile.opentracing-smallrye, org.wildfly.extension.microprofile.config-smallrye, org.wildfly.extension.ee-security].""}},
 ""rolled-back"" => true
}

[domain@10.44.130.73:9990 /]

{code}
 

This is a the server group defined in the Host master domain.xml :
{code:java}
<server-groups>
    <server-group name=""ServerGroup-eap71"" profile=""full-ha-eap71"">
        <socket-binding-group ref=""full-ha-eap71-sockets""/>
     </server-group>
 </server-groups>

{code}
 

The profile=""full-ha-eap71"" is copied from the EAP 7.1.6 domain.xml and added into EAP 7.2.8 domain.xml, as well as the ""full-ha-eap71-sockets"" socket-binding-group.

 

*NOTE: The same issue does also happen with EAP 7.3.1 running as master host DC and EAP 7.1.6 as host slave.*

 

[1] [https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/configuration_guide/index#configure_eap71_administer_eap70]

 ",2020/09/08 5:32 AM
WFCORE-5119,This dependency is useless.,2020/09/07 5:40 AM
WFCORE-5118,Listener application cannot refer to their own resources from ContextClassLoader. In general the TCCL is not assigned to the module of the {{ProcessStateListener}}.,2020/09/07 4:16 AM
WFCORE-5114,"All the defined file handlers have a constructor which accepts the append and file name attributes. Currently the file name is ensured to be the last property set, however it would make more sense to use the constructor rather than relying on property order.",2020/09/02 11:58 AM
WFCORE-5113,"Most handlers on the logging subsystem have a legacy {{formatter}} attribute which accepts a pattern. When a {{named-formatter}} is not defined this value is used and a {{PatternFormatter}} is created for it's usage. However when the handler is removed the wrong name is checked against the formatter to be removed. This formatter is not used so it doesn't really create any issues, however it should be removed as it's not used.",2020/09/02 11:41 AM
WFCORE-5109,The entry point for the bootable JAR configures a custom log context. The logging subsystem looks on the root logger of that context to locate the {{Configurator}} which was used to configure the context. The configurator should be attached to the root logger so the subsystem locate it. Without this the context will be reconfigured resulting in possible truncation of log messages.,2020/09/01 11:04 AM
WFCORE-5103,"We are in a case where a CLI script is executed in an embedded server. They keystore added doesn't exist locally when the script is run. The operation is:

/subsystem=elytron/key-store=keystore:add(required=false, path=""/etc/foo/keystore.jks"", credential-reference=\{clear-text=${keystore.password}})

Error:

""failure-description"" => {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.key-store.keystore"" => ""WFLYELY00004: Unable to start the service.
[ERROR] Caused by: org.jboss.msc.service.StartException in anonymous service: WFLYELY00022: KeyStore file '/etc/wf-secrets/keystore.jks' does not exist and required.""}},",2020/08/26 12:07 PM
WFCORE-5088,"It is possible to create a {{credential-reference}} to the credential store just with the name of credential store in question - without specifying {{alias}} (or {{clear-text}} in case of automatic addition of new record into the credential store, see doc  [16.4.2. Automatic Updates of Credential Stores|https://docs.wildfly.org/20/WildFly_Elytron_Security.html#referencing-credentials]). Actual configuration error is revealed when server is reloaded with following error message in server log (note that I can see this error in case of 'key-store' example but not in case of 'imap' example - see Reproduction steps for this issue):
{code}
22:03:26,791 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""elytron""),
    (""key-store"" => ""exampleKS"")
]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.security.key-store.exampleKS"" => ""WFLYELY00004: Unable to start the service.
    Caused by: java.io.IOException: WFLYELY00910: Password cannot be resolved for key-store '/tmp/cred/wildfly-20.0.1.Final/standalone/configuration/example.keystore'""}}
{code}

This misconfiguration is not possible to do in {{Wildfly 19.1.0.Final}} as you are requested to specify {{alias}} attribute too.

I suspect that change in behavior has been introduced thanks to this new feature https://issues.redhat.com/browse/WFLY-12218 (see the doc referenced above).

Correct behavior is to require credential store name and:
# 'alias'
# or 'alias' and 'clear-text'
# or 'clear-text' (alias will be generated automatically in this case)

as described in the referenced documentation.",2020/08/07 4:54 PM
WFCORE-5080,"Same issue than WFCORE-5004 but in test case KeyStoresTestCase (inside elytron folder too). It's the same problem with the certificate comparison if using the EMAILADDRESS field. Previously it was hidden by the mock-server issue (WFCORE-5023).

[~szaldana] I'm assigning it to you, it's just repeating what you did for the previous JIRA but for the new class. If you don't have time or prefer that I do the JIRA just assign it back to me. Thanks a lot!",2020/08/04 11:07 AM
WFCORE-5073,"When using Galleon to provision a Wildfly instance which would include just the {{core-server}} and {{managment}} layers, the LOG will trace the following lines:

{code}
...
15:38:17,219 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 20.0.1.Final (WildFly Core 12.0.3.Final) started in 1625ms - Started 86 of 89 services (27 services are lazy, passive or on-demand)
15:38:17,221 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management
15:38:17,221 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990

{code}

This is a wrong message for the end user because the managment interface will be available at the reported URL but the Admin console won't, returning a HTTP 404 status code.",2020/07/31 10:06 AM
WFCORE-5069,"Looks like detection of `libwfssl` is broken in current build. When I try to configure OpenSSL security provider in legacy security, I can see following errors in standalone.log:
{code:java}
15:39:44,704 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC000001: Failed to start service org.wildfly.core.management.security.realm.ApplicationRealm.ssl-context: org.jboss.msc.service.StartException in service org.wildfly.core.management.security.realm.ApplicationRealm.ssl-context: WFLYDM0018: Unable to start service15:39:44,704 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC000001: Failed to start service org.wildfly.core.management.security.realm.ApplicationRealm.ssl-context: org.jboss.msc.service.StartException in service org.wildfly.core.management.security.realm.ApplicationRealm.ssl-context: WFLYDM0018: Unable to start service at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:116) at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739) at org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701) at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559) at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35) at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982) at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486) at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377) at java.lang.Thread.run(Thread.java:748)Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: openssl.TLSv1.2, provider: openssl, class: org.wildfly.openssl.OpenSSLContextSPI$OpenSSLTLS_1_2_ContextSpi) at java.security.Provider$Service.newInstance(Provider.java:1617) at sun.security.jca.GetInstance.getInstance(GetInstance.java:236) at sun.security.jca.GetInstance.getInstance(GetInstance.java:164) at javax.net.ssl.SSLContext.getInstance(SSLContext.java:156) at org.jboss.as.domain.management.security.SSLContextService.start(SSLContextService.java:105) ... 8 moreCaused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException at org.wildfly.openssl.SSL.init(SSL.java:87) at org.wildfly.openssl.OpenSSLContextSPI.<init>(OpenSSLContextSPI.java:129) at org.wildfly.openssl.OpenSSLContextSPI$OpenSSLTLS_1_2_ContextSpi.<init>(OpenSSLContextSPI.java:484) at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:423) at java.security.Provider$Service.newInstance(Provider.java:1595) ... 12 moreCaused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.wildfly.openssl.SSL.init(SSL.java:82) ... 19 moreCaused by: java.lang.UnsatisfiedLinkError: no wfssl in java.library.path at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860) at java.lang.Runtime.loadLibrary0(Runtime.java:870) at java.lang.System.loadLibrary(System.java:1124) at org.wildfly.openssl.SSL$LibraryLoader.load(SSL.java:288) ... 24 more
15:39:44,818 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([    (""core-service"" => ""management""),    (""security-realm"" => ""ApplicationRealm"")]) - failure description: {""WFLYCTL0080: Failed services"" => {""org.wildfly.core.management.security.realm.ApplicationRealm.ssl-context"" => ""WFLYDM0018: Unable to start service    Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: openssl.TLSv1.2, provider: openssl, class: org.wildfly.openssl.OpenSSLContextSPI$OpenSSLTLS_1_2_ContextSpi)    Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException    Caused by: java.lang.reflect.InvocationTargetException    Caused by: java.lang.UnsatisfiedLinkError: no wfssl in java.library.path""}} {code}
 

This is a regression against previous release - {{EAP7.3.1}}. Expected behaviour is no error in the log, libwfssl is loaded successfully and OpenSSL is correctly used for TLS connections.

Note - there has been a change in the location of the particular libwfssl native binaries in the distribution, see https://github.com/wildfly-security/wildfly-openssl/commit/c5c07d3dc0d6376409a028ffcff9af35dbc1b616

{code:title=7.3.1}
$ find . -name *wfssl*
./modules/system/layers/base/org/wildfly/openssl/main/lib/solaris-sparcv9/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/solaris-x86_64/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/win-x86_64/wfssl.dll
./modules/system/layers/base/org/wildfly/openssl/main/lib/win-i386/wfssl.dll
./modules/system/layers/base/org/wildfly/openssl/main/lib/linux-i386/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/linux-s390x/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/linux-x86_64/libwfssl.so
{code}

and

{code:title=7.4.0.CD20-CR1}
$ find . -name *ssl*
./modules/system/layers/base/org/wildfly/openssl
./modules/system/layers/base/org/wildfly/openssl/main/wildfly-openssl-java-1.1.0.Final-redhat-00001.jar
./modules/system/layers/base/org/wildfly/openssl/main/lib/solaris-sparcv9/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/solaris-x86_64/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/win-x86_64/wfssl.dll
./modules/system/layers/base/org/wildfly/openssl/main/lib/win-i386/wfssl.dll
./modules/system/layers/base/org/wildfly/openssl/main/lib/linux-s390x/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/el8-x86_64/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/el7-x86_64/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/el6-x86_64/libwfssl.so
./modules/system/layers/base/org/wildfly/openssl/main/lib/el6-i386/libwfssl.so
./modules/system/layers/base/org/wildfly/security/elytron-private/main/wildfly-elytron-ssl-1.12.1.Final-redhat-00001.jar
{code}

 ",2020/07/28 2:33 PM
WFCORE-5064,"When configuring https using the old security-realm the trust-manager factory is selected using [the line|https://github.com/wildfly/wildfly-core/blob/12.0.3.Final/domain-management/src/main/java/org/jboss/as/domain/management/security/FileTrustManagerService.java#L111]:

{code:java}
            trustManagerFactory = TrustManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
{code}

Which is incorrect and should use the TrustManagerFactory. Therefore by default in openjdk we are using the {{SunX509}} factory instead of the default {{PKIX}} implementation. The default values for both factories are defined in the {{java.security}} file from the jdk:

{code:java}
#
# Determines the default key and trust manager factory algorithms for
# the javax.net.ssl package.
#
ssl.KeyManagerFactory.algorithm=SunX509
ssl.TrustManagerFactory.algorithm=PKIX
{code}

Using a exotic configuration can lead to an error if the KeyManagerFactory is configured to an algorithm that is not valid for the TrustManagerFactory (NewSunX509 for example).",2020/07/27 6:18 AM
WFCORE-5063,"https://github.com/jboss/jboss-parent-pom/compare/jboss-parent-35...jboss-parent-37

Particularly pick up https://github.com/jboss/jboss-parent-pom/issues/93 which brings in the fix for https://nvd.nist.gov/vuln/detail/CVE-2019-10782",2020/07/24 3:57 PM
WFCORE-5062,"The issue occurs with --install-dir Bootable JAR option,

In case the first entry to be unzipped is not a directory, the unzip fails because the install dir doesn't exist.

This issue is hidden on some platforms where the first entries are directories, in such case, directories hierarchy is created.

This issue impacts Arquilian container for Bootable JAR that contains a workaround for it.",2020/07/24 3:06 PM
WFCORE-5048,"Tests org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfacePKCS12TestCase and HTTPSManagementInterfaceTestCase fail when -Delytron is set.

{code:java}
  org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfacePKCS12TestCase  Time elapsed: 0.003 s  <<< ERROR!org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfacePKCS12TestCase  Time elapsed: 0.003 s  <<< ERROR!java.lang.RuntimeException: 

{    ""WFLYCTL0412: Required services that are not installed:"" => [""org.wildfly.core.management.security.realm.ManagementRealm""],    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""jboss.remoting.server.management is missing [org.wildfly.core.management.security.realm.ManagementRealm]""]}

at org.jboss.as.test.integration.security.common.CoreUtils.applyUpdate(CoreUtils.java:271) at org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfaceTestCase.serverSetup(HTTPSManagementInterfaceTestCase.java:346) at org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfaceTestCase.startAndSetupContainer(HTTPSManagementInterfaceTestCase.java:125) at org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfacePKCS12TestCase.startAndSetupContainer(HTTPSManagementInterfacePKCS12TestCase.java:41) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24) at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27) at org.junit.runners.ParentRunner.run(ParentRunner.java:363) at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109) at org.junit.runners.Suite.runChild(Suite.java:128) at org.junit.runners.Suite.runChild(Suite.java:27) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) at org.junit.runners.ParentRunner.run(ParentRunner.java:363) at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75) at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158) at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383) at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344) at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125) at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417) [ERROR] org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfacePKCS12TestCase  Time elapsed: 0.004 s  <<< ERROR!java.io.IOException: java.net.ConnectException: WFLYPRT0053: Could not connect to remoting://127.0.0.1:9999. The connection failed at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:149) at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:80) at org.jboss.as.test.integration.security.common.CoreUtils.applyUpdate(CoreUtils.java:263) at org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfaceTestCase.resetHttpInterfaceConfiguration(HTTPSManagementInterfaceTestCase.java:398) at org.wildfly.core.test.standalone.mgmt.HTTPSManagementInterfaceTestCase.stopContainer(HTTPSManagementInterfaceTestCase.java:241) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33) at org.junit.runners.ParentRunner.run(ParentRunner.java:363) at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109) at org.junit.runners.Suite.runChild(Suite.java:128) at org.junit.runners.Suite.runChild(Suite.java:27) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) at org.junit.runners.ParentRunner.run(ParentRunner.java:363) at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83) at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75) at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158) at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383) at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344) at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125) at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)Caused by: java.net.ConnectException: WFLYPRT0053: Could not connect to remoting://127.0.0.1:9999. The connection failed at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:129) at org.jboss.as.protocol.ProtocolConnectionManager$EstablishingConnection.connect(ProtocolConnectionManager.java:259) at org.jboss.as.protocol.ProtocolConnectionManager.connect(ProtocolConnectionManager.java:70) at org.jboss.as.protocol.mgmt.ManagementClientChannelStrategy$Establishing.getChannel(ManagementClientChannelStrategy.java:167) at org.jboss.as.controller.client.impl.RemotingModelControllerClient.getOrCreateChannel(RemotingModelControllerClient.java:132) at org.jboss.as.controller.client.impl.RemotingModelControllerClient$2.getChannel(RemotingModelControllerClient.java:85) at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:135) at org.jboss.as.protocol.mgmt.ManagementChannelHandler.executeRequest(ManagementChannelHandler.java:110) at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeRequest(AbstractModelControllerClient.java:263) at org.jboss.as.controller.client.impl.AbstractModelControllerClient.execute(AbstractModelControllerClient.java:168) at org.jboss.as.controller.client.impl.AbstractModelControllerClient.executeForResult(AbstractModelControllerClient.java:147) ... 32 moreCaused by: java.net.ConnectException: Connection refused at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717) at org.xnio.nio.WorkerThread$ConnectHandle.handleReady(WorkerThread.java:327) at org.xnio.nio.WorkerThread.run(WorkerThread.java:591) at ...asynchronous invocation...(Unknown Source) at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:599) at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:561) at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:549) at org.jboss.as.protocol.ProtocolConnectionUtils.connect(ProtocolConnectionUtils.java:209) at org.jboss.as.protocol.ProtocolConnectionUtils.connectSync(ProtocolConnectionUtils.java:121) ... 42 more
{code}",2020/07/14 4:21 AM
WFCORE-5046,"If the runtime environment defines a _JAVA_OPTIONS environment variable, java likes to output: ""Picked up _JAVA_OPTIONS: ..."" to the console.

Because this test reads the console output verbatim, it fails if the JVM outputs noise on startup.",2020/07/11 11:09 AM
WFCORE-5045,"If the runtime environment defines a _JAVA_OPTIONS environment variable, java likes to output: ""Picked up _JAVA_OPTIONS: ..."" to the console.

Because this test reads the console output verbatim, it fails if the JVM outputs noise on startup.",2020/07/11 11:08 AM
WFCORE-5043,"If the runtime environment defines a _JAVA_OPTIONS environment variable, java likes to output: ""Picked up _JAVA_OPTIONS: ..."" to the console.

Because the longCommand test reads the console output verbatim, it fails if the JVM outputs noise on startup.",2020/07/10 12:30 PM
WFCORE-5037,See JBEAP-19870 for more details ,2020/07/07 2:43 PM
WFCORE-5030,"I am in context where an embedded server version 12.x is started for a version 11 (or 10) of wildfly-core.

This occurs with Bootable JAR maven plugin that depends on 12.x for its CLI support.

This can also happen using CLI shaded client JAR of WildFly 20 to start an embedded server for a WildFly 19 installation.

The problem has been introduced by https://issues.redhat.com/browse/WFCORE-4893 that defined a new method not supported by older versions.

The EmbeddedServer should be able to fallback to legacy logic if the new method is not present.

 ",2020/07/03 5:08 AM
WFCORE-5029,"Unmanaged deploys show a checkmark that they are ""managed"" if you view the deployment under Server Groups. The deployment does however show correctly that it is un-managed in the Content Repository section.",2020/07/03 5:05 AM
WFCORE-5028,"WFCORE-4976 made an update to ProtocolConnectionUtils so that a supplied CallbackHandler takes priority - this works where a client is using ModelControllerClient.create() and passing in a CallbackHandler as we should take that as an indication that the caller wants control of authentication.

However by fixing in ProtocolConnectionUtils it has also picked up the case where the CLI passes in the CallbackHandler - that case however should only use the CBH if the information can not be obtained from the AuthenticationConfiguration.  This call does not come via ModelControllerClient but both paths meet at ProtocolConnectionUtils.

Either the adjustment of the AuthenticationContext to give the CallbackHandler should happen in ModelControllerClient - or an additional boolean should be passed into ProtocolConnectionUtils to indicate if the CallbackHandler should be given priority.  The latter may be a less invasive evolution of the fix prepared so far.

 

 ",2020/07/02 5:56 AM
WFCORE-5023,"After JIRA WFCORE-4850 the mock-server 5.9.0 does not work with IBM JDK which makes a few tests fail with the following error:

{code:bash}
cd ./testsuite/standalone/
export JAVA_HOME=/home/rmartinc/apps/ibm-java-x86_64-80/
mvn clean test -Dtest=org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase
...
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase
[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.005 s <<< FAILURE! - in org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase
[ERROR] org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase  Time elapsed: 0.003 s  <<< ERROR!
java.lang.NoClassDefFoundError: sun.security.x509.GeneralNameInterface
	at org.mockserver.socket.tls.jdk.JDKKeyAndCertificateFactory.<init>(JDKKeyAndCertificateFactory.java:36)
	at org.mockserver.socket.tls.NettySslContextFactory.<init>(NettySslContextFactory.java:37)
	at org.mockserver.client.MockServerClient.<init>(MockServerClient.java:57)
	at org.mockserver.integration.ClientAndServer.<init>(ClientAndServer.java:19)
	at org.jboss.as.test.integration.management.cli.SecurityCommandsTestCase.setup(SecurityCommandsTestCase.java:358)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:90)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)
	at java.lang.reflect.Method.invoke(Method.java:508)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:157)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
Caused by: java.lang.ClassNotFoundException: sun.security.x509.GeneralNameInterface
	at java.net.URLClassLoader.findClass(URLClassLoader.java:610)
	at java.lang.ClassLoader.loadClassHelper(ClassLoader.java:944)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:889)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:872)
	... 36 more
{code}

The tests that don't work are the following three classes:

* CertificateAuthoritiesTestCase.java (elytron)
* KeyStoresTestCase.java (elytron)
* SecurityCommandsTestCase.java (testsuite/standalone)

This is explained in the mock-server [issue 750|https://github.com/mock-server/mockserver/issues/750]. For the moment the only solution is doing a downgrade to 5.8.1. Although it is expected to be fixed soon in the mock-server (maybe in the next version 5.10.1 or 5.11.0).",2020/06/25 3:15 AM
WFCORE-5014,"After receiving a jboss.as.management.blocking.timeout error on startup, all the log files are truncated to zero bytes.  This behavior happens on any patch level of EAP 7.2.x and also on EAP 7.3 but does not happen on EAP 7.1.6.",2020/06/19 11:59 AM
WFCORE-5011,The artifact org.wildfly.core:wildfly-jar-boot is not in the WildFly distribution and can be excluded from the licenses,2020/06/17 11:16 AM
WFCORE-5004,"TlsTestCase#testReloadTrustManager fails on IBM Java 8 at [TlsTestCase.java#L439|https://github.com/wildfly/wildfly-core/blob/master/elytron/src/test/java/org/wildfly/extension/elytron/TlsTestCase.java#L439] reporting the same DN. When I try to compare using canonical names, there is a difference. Using RFC1779 or RFC2253 names is ok.

{noformat}
Assert.assertEquals(originalFoundDN.getIssuerX500Principal().getName(X500Principal.CANONICAL), ISSUER_DN.getName(X500Principal.CANONICAL));

[ERROR]   TlsTestCase.testReloadTrustManager:439 expected:<....2.840.113549.1.9.1=[#1613656c7974726f6e4077696c64666c792e6f7267],c=uk,st=elytron,cn=...> but was:<....2.840.113549.1.9.1=[elytron@wildfly.org],c=uk,st=elytron,cn=...>
{noformat}

Is it just a test issue, or can there be an impact on functionality? In case it's just a test issue, can we assert equality of names? I.e.

{noformat}
Assert.assertEquals(originalFoundDN.getIssuerX500Principal().getName(), ISSUER_DN.getName());
{noformat}

The same for [TlsTestCase.java#L465|https://github.com/wildfly/wildfly-core/blob/master/elytron/src/test/java/org/wildfly/extension/elytron/TlsTestCase.java#L465] then.",2020/06/11 6:32 AM
WFCORE-4982,"Presently the following is executed for every deployment for every deployment phase: -

{code:java}
Set<String> subSystemNames = list.stream().map(e -> e.getSubsystemName()).collect(Collectors.toSet());
{code}

This will be leading to a lot of unnecessary object allocation which could be avoided with a simple for loop instead.",2020/05/23 6:43 AM
WFCORE-4967,"Our deployment is quite complex, EAR app containing several modules. 
After move to different data-center some of EJB timers will not be triggered at all after server restart (randomly).

There was no change to wildfly server version and application itself. 
Only hardware/network changed and issue started occurring.

Classified as : WEIRDO and some race conditions was assumed.
",2020/05/14 3:01 AM
WFCORE-4965,"When using a security-realm configured with SSL like this:

{code:xml}
<security-realm name=""CertificateRealm"">
    <server-identities>
        <ssl>
            <keystore provider=""PKCS12"" path=""${jboss.server.config.dir}/keystore.p12"" alias=""jboss"">
                <keystore-password-credential-reference store=""sample-store"" alias=""p12-password""/>
            </keystore>
         </ssl>
    </server-identities>
</security-realm>
{code}

The EAP startup fails with the following exception:

{noformat}
org.wildfly.core.management.security.realm.CertificateRealm.key-manager: Failed to start service
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1731)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1363)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.NullPointerException: invalid null input
	at java.security.KeyStore$PrivateKeyEntry.<init>(KeyStore.java:524)
	at sun.security.pkcs12.PKCS12KeyStore.engineGetEntry(PKCS12KeyStore.java:1311)
	at sun.security.provider.KeyStoreDelegator.engineGetEntry(KeyStoreDelegator.java:172)
	at sun.security.provider.JavaKeyStore$DualFormatJKS.engineGetEntry(JavaKeyStore.java:70)
	at java.security.KeyStore.getEntry(KeyStore.java:1521)
	at org.jboss.as.domain.management.security.FileKeystore.load(FileKeystore.java:134)
	at org.jboss.as.domain.management.security.FileKeyManagerService.loadKeyStore(FileKeyManagerService.java:175)
	at org.jboss.as.domain.management.security.AbstractKeyManagerService.createKeyManagers(AbstractKeyManagerService.java:128)
	at org.jboss.as.domain.management.security.AbstractKeyManagerService.start(AbstractKeyManagerService.java:93)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)
	... 6 more
{noformat}",2020/05/11 2:55 AM
WFCORE-4950,"WFCORE issue related to JBEAP-19195. The root exception is the following:

{noformat}
javax.naming.NamingException: WFLYNAM0027: Failed instantiate InitialContextFactory com.sun.jndi.ldap.LdapCtxFactory from classloader ModuleClassLoader for Module ""org.wildfly.extension.io"" version 12.0.0.Beta1 from local module loader @5f2108b5 (finder: local module finder @31a5c39e (roots: /home/rmartinc/wildfly-20.0.0.Beta1-SNAPSHOT/modules,/home/rmartinc/wildfly-20.0.0.Beta1-SNAPSHOT/modules/system/layers/base)) [Root exception is java.lang.ClassNotFoundException: com.sun.jndi.ldap.LdapCtxFactory from [Module ""org.wildfly.extension.io"" version 12.0.0.Beta1 from local module loader @5f2108b5 (finder: local module finder @31a5c39e (roots: /home/rmartinc/wildfly-20.0.0.Beta1-SNAPSHOT/modules,/home/rmartinc/wildfly-20.0.0.Beta1-SNAPSHOT/modules/system/layers/base))]]
 	at org.jboss.as.naming.InitialContext.getDefaultInitCtx(InitialContext.java:120)
 	at org.jboss.as.naming.InitialContext.init(InitialContext.java:101)
 	at javax.naming.ldap.InitialLdapContext.<init>(InitialLdapContext.java:154)
 	at org.jboss.as.naming.InitialContext.<init>(InitialContext.java:91)
 	at org.jboss.as.naming.InitialContextFactory.getInitialContext(InitialContextFactory.java:43)
 	at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)
 	at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313)
 	at javax.naming.InitialContext.init(InitialContext.java:244)
 	at javax.naming.InitialContext.<init>(InitialContext.java:216)
 	at javax.naming.directory.InitialDirContext.<init>(InitialDirContext.java:101)
 	at org.jboss.as.domain.management.connections.ldap.LdapConnectionManagerService.getConnection(LdapConnectionManagerService.java:272)
 	at org.jboss.as.domain.management.connections.ldap.LdapConnectionManagerService.getConnection(LdapConnectionManagerService.java:184)
 	at org.jboss.as.domain.management.connections.ldap.LdapConnectionManagerService.getConnection(LdapConnectionManagerService.java:180)
 	at org.jboss.as.domain.management.security.LdapConnectionHandler.getConnection(LdapConnectionHandler.java:78)
 	at org.jboss.as.domain.management.security.LdapUserSearcherFactory$LdapUserSearcherImpl.search(LdapUserSearcherFactory.java:125)
 	at org.jboss.as.domain.management.security.LdapUserSearcherFactory$LdapUserSearcherImpl.search(LdapUserSearcherFactory.java:66)
 	at org.jboss.as.domain.management.security.LdapCacheService$NoCacheCache.search(LdapCacheService.java:232)
 	at org.jboss.as.domain.management.security.UserLdapCallbackHandler$SecurityRealmImpl.getRealmIdentity(UserLdapCallbackHandler.java:339)
 	at org.jboss.as.domain.management.security.SecurityRealmService$SharedStateSecurityRealm.getRealmIdentity(SecurityRealmService.java:776)
 	at org.wildfly.security.auth.server.ServerAuthenticationContext.assignName(ServerAuthenticationContext.java:1197)
 	at org.wildfly.security.auth.server.ServerAuthenticationContext$UnassignedState.setPrincipal(ServerAuthenticationContext.java:1726)
 	at org.wildfly.security.auth.server.ServerAuthenticationContext.setAuthenticationPrincipal(ServerAuthenticationContext.java:410)
 	at org.wildfly.security.auth.server.ServerAuthenticationContext.setAuthenticationName(ServerAuthenticationContext.java:384)
 	at org.wildfly.security.auth.server.ServerAuthenticationContext.setAuthenticationName(ServerAuthenticationContext.java:368)
 	at org.wildfly.security.auth.server.ServerAuthenticationContext$1.handleOne(ServerAuthenticationContext.java:912)
 	at org.wildfly.security.auth.server.ServerAuthenticationContext$1.handle(ServerAuthenticationContext.java:853)
 	at org.wildfly.security.auth.callback.SocketAddressQueryCallbackHandler.handle(SocketAddressQueryCallbackHandler.java:57)
 	at org.wildfly.security.sasl.util.TrustManagerSaslServerFactory.lambda$createSaslServer$0(TrustManagerSaslServerFactory.java:105)
 	at org.wildfly.security.sasl.plain.PlainSaslServer.evaluateResponse(PlainSaslServer.java:118)
 	at org.wildfly.security.sasl.util.AuthenticationCompleteCallbackSaslServerFactory$1.evaluateResponse(AuthenticationCompleteCallbackSaslServerFactory.java:58)
 	at org.wildfly.security.sasl.util.AuthenticationTimeoutSaslServerFactory$DelegatingTimeoutSaslServer.evaluateResponse(AuthenticationTimeoutSaslServerFactory.java:110)
 	at org.wildfly.security.sasl.util.SecurityIdentitySaslServerFactory$1.evaluateResponse(SecurityIdentitySaslServerFactory.java:59)
 	at org.xnio.sasl.SaslUtils.evaluateResponse(SaslUtils.java:245)
 	at org.xnio.sasl.SaslUtils.evaluateResponse(SaslUtils.java:217)
 	at org.jboss.remoting3.remote.ServerConnectionOpenListener$AuthStepRunnable.run(ServerConnectionOpenListener.java:484)
 	at org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:991)
 	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
 	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
 	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
 	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1348)
 	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.ClassNotFoundException: com.sun.jndi.ldap.LdapCtxFactory from [Module ""org.wildfly.extension.io"" version 12.0.0.Beta1 from local module loader @5f2108b5 (finder: local module finder @31a5c39e (roots: /home/rmartinc/wildfly-20.0.0.Beta1-SNAPSHOT/modules,/home/rmartinc/wildfly-20.0.0.Beta1-SNAPSHOT/modules/system/layers/base))]
 	at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)
 	at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)
 	at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
 	at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)
 	at java.lang.Class.forName0(Native Method)
 	at java.lang.Class.forName(Class.java:348)
 	at org.jboss.as.naming.InitialContext.getDefaultInitCtx(InitialContext.java:115)
 	... 40 more
{noformat}
",2020/04/29 4:54 AM
WFCORE-4935,"If server is started in suspend mode, :shutdown via cli does not trigger a shutdown; if I run :resume first then :shutdown, then it works. ",2020/04/20 12:21 PM
WFCORE-4923,"The problem affects all versions. The wildfly controller does not resolve expression resursively which causes improper behaviour of the jbos CLI. 

{code:json}
[standalone@localhost:9992 /] /subsystem=batch-jberet:read-resource(include-runtime=true,recursive=true,resolve-expressions=true)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""restart-jobs-on-resume"" => true,
        ""security-domain"" => undefined,
        ""default-job-repository"" => ""in-memory"",
        ""default-thread-pool"" => ""batch"",
        ""in-memory-job-repository"" => {""in-memory"" => {}},
        ""jdbc-job-repository"" => undefined,
        ""thread-factory"" => undefined,
        ""thread-pool"" => {""batch"" => {
            ""active-count"" => 0,
            ""completed-task-count"" => 0L,
            ""current-thread-count"" => 0,
            ""keepalive-time"" => {
                ""time"" => 30L,
                ""unit"" => ""SECONDS""
            },
            ""largest-thread-count"" => 0,
            ""max-threads"" => expression ""${batch-max-threads}"",
            ""name"" => ""batch"",
            ""queue-size"" => 0,
            ""rejected-count"" => 0,
            ""task-count"" => 0L,
            ""thread-factory"" => undefined
        }}
    }
}

{code}


The missing recursive expression resolvation also causes runtime errors in the wildfly console (HAL) if you use properties your configuration XML-s (standalone.xml, domain.xml, ...) Two examples can be found in the attachements. 

The solution would be only adding the 

{code:java}
rrOp.get(ModelDescriptionConstants.RESOLVE_EXPRESSIONS).set(resolve);
{code}

line after 

{code:java}
rrOp.get(ModelDescriptionConstants.INCLUDE_DEFAULTS).set(defaults);
{code}

in the doExecuteInternal method of the 

\controller\src\main\java\org\jboss\as\controller\operations\global\ReadResourceHandler.java 

The wildfly console (HAL) source code is also buggy, which when creates an operation like this

{code:java}
Operation operation = new Operation.Builder(address, READ_RESOURCE_OPERATION)
{code}

in several places I found does not contain the line 

{code:java}
.param(RESOLVE_EXPRESSIONS, true)
{code}

and this will cause unresolved expressions to be returned and later numeric error to be thrown while trying to read them.",2020/04/15 9:06 AM
WFCORE-4922,"Recently we changed the way the {{EmbedHostControllerHandler}} and {{EmbedServerHandler}} wait for the embedded host/server until it starts. 

We were using a pooling executing management operations to check the process state. We needed a different solution to be able to check the process state when the embedded host/server was launched with and empty configuration file.

In the new approach we exposed the process state to the client so it can be directly pooling without requiring a management operation. 

Currently the update of this internal field is racy, and a hang can occurs starting the embedded.

We saw this bug in the CI test suite: https://ci.wildfly.org/viewLog.html?buildId=197876&buildTypeId=WF_MasterWindowsJdk12

",2020/04/14 12:15 PM
WFCORE-4909,"The class org.jboss.as.model.test.ModelTestControllerVersion is used to provide component versioning information for various versions of EAP and Wildfly. 

Given a version of EAP, say, 7.2.0, this class can be used to find the maven version for the product maven artifact, as well the maven version of Wildfly Core artifact used, etc.

The maven versions for EAP and Wildfly Core use ""productized"" versions, incorporating the -redhat- tag (e.g. org.wildfly.core:wildfly-threads:6.0.11.Final-redhat-1)

Currently, ModelTestControllerVersion uses ""productized"" version numbers for the EAP maven artifact but not for Wildfly Core maven artifact. This means that this class cannot be used to easily specify the maven version for the Wildfly Core component of the EAP version.    ",2020/04/07 8:14 PM
WFCORE-4908,"Under a hosts server config, {{/host=master/server-config=server-one/}}, there is a {{jvm}} resource. On this resource the {{write-attribute}} operation does not work expected.

{code}
[domain@embedded /] /host=master/server-config=server-one/jvm=default:add
{
    ""outcome"" => ""success"",
    ""result"" => undefined,
    ""server-groups"" => undefined
}

[domain@embedded /] /host=master/server-config=server-one/jvm=default:write-attribute(name=jvm-options[""-Xlog:gc*:file=${jboss.domain.servers.dir}/server-two/log/gc.log""])
{
    ""outcome"" => ""success"",
    ""result"" => undefined,
    ""server-groups"" => undefined
}

[domain@embedded /] /host=master/server-config=server-one/jvm=default:read-resource
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""agent-lib"" => undefined,
        ""agent-path"" => undefined,
        ""debug-enabled"" => undefined,
        ""debug-options"" => undefined,
        ""env-classpath-ignored"" => undefined,
        ""environment-variables"" => undefined,
        ""heap-size"" => undefined,
        ""java-agent"" => undefined,
        ""java-home"" => undefined,
        ""jvm-options"" => undefined,
        ""launch-command"" => undefined,
        ""max-heap-size"" => undefined,
        ""max-permgen-size"" => undefined,
        ""permgen-size"" => undefined,
        ""stack-size"" => undefined,
        ""type"" => undefined
    }
}
{code}

As you can see from the above command does not update the {{jvm-options}}. However if you use the {{add-jvm-option}} operation that does work. It seems the {{write-attribute}} operation should also work.",2020/04/07 12:07 PM
WFCORE-4901,"TCCL not set to application classloader when MBean Notification is invoked
If an application registers an MBean notification and it receives a notification, the Thread Context ClassLoader is not set to the application, this causes ClassNotFound exceptions on classes that are in the application's classpath.

javax.naming.NamingException: WFLYNAM0027: Failed instantiate InitialContextFactory org.wildfly.naming.client.WildFlyInitialContextFactory from classloader ModuleClassLoader for Module ""org.jboss.as.server"" version 6.0.21.Final-redhat-00001 from local module loader @dfd3711 (finder: local module finder @42d3bd8b (roots: /tmp/jboss-eap-7.2/modules,/tmp/jboss-eap-7.2/modules/system/layers/base)) [Root exception is java.lang.ClassNotFoundException: org.wildfly.naming.client.WildFlyInitialContextFactory from [Module ""org.jboss.as.server"" version 6.0.21.Final-redhat-00001 from local module loader @dfd3711 (finder: local module finder @42d3bd8b (roots: /tmp/jboss-eap-7.2/modules,/tmp/jboss-eap-7.2/modules/system/layers/base))]]
at org.jboss.as.naming.InitialContext.getDefaultInitCtx(InitialContext.java:120)
at org.jboss.as.naming.InitialContext.init(InitialContext.java:101)
at javax.naming.ldap.InitialLdapContext.<init>(InitialLdapContext.java:154)
at org.jboss.as.naming.InitialContext.<init>(InitialContext.java:91)
at org.jboss.as.naming.InitialContextFactory.getInitialContext(InitialContextFactory.java:43)
at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)
at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313)
at javax.naming.InitialContext.init(InitialContext.java:244)
at javax.naming.InitialContext.<init>(InitialContext.java:216)
at test.Client.getInitialContext(Client.java:66)
at test.Client.invoke(Client.java:44)
at test.Client.handleNotification(Client.java:117)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor$ListenerWrapper.handleNotification(DefaultMBeanServerInterceptor.java:1754)
at javax.management.NotificationBroadcasterSupport.handleNotification(NotificationBroadcasterSupport.java:275)
at javax.management.NotificationBroadcasterSupport$SendNotifJob.run(NotificationBroadcasterSupport.java:352)
at javax.management.NotificationBroadcasterSupport$1.execute(NotificationBroadcasterSupport.java:337)
at javax.management.NotificationBroadcasterSupport.sendNotification(NotificationBroadcasterSupport.java:248)
at javax.management.MBeanServerDelegate.sendNotification(MBeanServerDelegate.java:209)
at org.jboss.as.jmx.model.ModelControllerMBeanServerPlugin$ResourceRegistrationNotificationHandler.handleNotification(ModelControllerMBeanServerPlugin.java:431)
at org.jboss.as.controller.notification.NotificationSupports.fireNotifications(NotificationSupports.java:126)
at org.jboss.as.controller.notification.NotificationSupports.access$000(NotificationSupports.java:47)
at org.jboss.as.controller.notification.NotificationSupports$NonBlockingNotificationSupport$1.run(NotificationSupports.java:105)
at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
at java.lang.Thread.run(Thread.java:748)
at org.jboss.threads.JBossThread.run(JBossThread.java:485)
Caused by: java.lang.ClassNotFoundException: org.wildfly.naming.client.WildFlyInitialContextFactory from [Module ""org.jboss.as.server"" version 6.0.21.Final-redhat-00001 from local module loader @dfd3711 (finder: local module finder @42d3bd8b (roots: /tmp/jboss-eap-7.2/modules,/tmp/jboss-eap-7.2/modules/system/layers/base))]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:348)
at org.jboss.as.naming.InitialContext.getDefaultInitCtx(InitialContext.java:115)
... 27 more",2020/04/02 3:24 AM
WFCORE-4883,"CompositeOperationTestCase#testCompositeOperationsWriteLockAcquired is failing intermittently with the following error trace:

{noformat}
[ERROR] testCompositeOperationsWriteLockAcquired(org.jboss.as.test.integration.domain.suites.CompositeOperationTestCase)  Time elapsed: 25.6 s  <<< FAILURE!
[testCompositeOperationsWriteLockAcquired] java.lang.AssertionError: It is expected deployment operation is still in progress expected:<false> but was:<true>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.jboss.as.test.integration.domain.suites.CompositeOperationTestCase.testCompositeOperationsWriteLockAcquired(CompositeOperationTestCase.java:619)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
{noformat}


Test history:
https://ci.wildfly.org/project.html?projectId=WildFlyCore_PullRequest&testNameId=-2353905023235758296&tab=testDetails",2020/03/20 11:02 AM
WFCORE-4875,"The EJB3 subsystem  has an element <remote/> which performs a few different functions relating to external clients accessing EJBs on the server:
* sets up a Remoting connector service so that external clients may connect to the server using  EJB / Remoting or EJB / HTTP Upgrade / Remoting
* sets up client mappings entries for those remote clients which are used in topology updates to allow the client to find the server's connectors

The Remoting subsystem has two connector types which may be supplied to the <remote connector-ref/> attribute. <connector name=""remoting-connector""/> represents a Remoting endpoint and <http-connector name=""http-connector""/> represents an Undertow listener which may be used with HTTP Upgrade.

At present, in the Remoting subsystem, these connectors have two separately defined capabilities:
// for <connector/> 
private static final String CONNECTOR_CAPABILITY_NAME =""org.wildfly.remoting.connector"";
static final RuntimeCapability<Void> CONNECTOR_CAPABILITY = RuntimeCapability.Builder.of(CONNECTOR_CAPABILITY_NAME, true).build();

// for <http-connector/>
private static final String HTTP_CONNECTOR_CAPABILITY_NAME = ""org.wildfly.remoting.http-connector"";
static final RuntimeCapability<Void> HTTP_CONNECTOR_CAPABILITY = RuntimeCapability.Builder.of(HTTP_CONNECTOR_CAPABILITY_NAME, true).build();

The proposal here is to allow referencing both connectors using a single capability base name, ""org.wildfly.remoting.connector"" to simplify specification of the capabilities which the <remote/> element needs (i.e. it may depend on one or the other). These are both dynamically named capabilities, so their names will vary based on the name of the management resource instance they represent. Because capability names are considered public API, the existing capability name for org.wildfly.remoting.http-connector cannot be removed to further simplify.",2020/03/16 6:11 PM
WFCORE-4841,"With WFCORE-3337 the logging subsystem introduced capabilities. While looking at WFCORE-966 I determined the capabilities were not correctly implemented. In some cases invalid capabilities are allowed to be add in admin-only mode. In other cases they're allowed to be assigned even when invalid and running a full server.

The tests are also incorrect. They seemed correct as they checked for failed operations. However the result of the failure was not checked and some of the operations were failing, but not for the reasons expected. This was all a poor design on my part.

New tests need to be added. One thing I did notice was these tests don't seem to work in a static {{KernelServices}} test controller. For some reason when running against a logging profile the capability recorder seems to be empty. However using a manual mode test works fine. I believe this is just a flaw in the unit test controller. This will require the tests to be moved to manual mode tests so they can be test against an admin-only booted server.
",2020/02/11 3:46 PM
WFCORE-4833,"The following sequence can be configured using the embedded server, however it doesn't work when we start the server in admin only:

{noformat}
/subsystem=security/security-domain=HiThere:add(cache-type=default)
/subsystem=security/security-domain=HiThere/authentication=classic:add(login-modules=[{code=""UsersRoles"", flag=required, module-options={""usersProperties""=>""${jboss.server.config.dir}/users.properties"",""rolesProperties""=>""${jboss.server.config.dir}/roles.properties""}}])
/subsystem=security/elytron-realm=HiThere:add(legacy-jaas-config=HiThere)
/subsystem=elytron/security-domain=HiThere:add(realms=[{realm=HiThere}],default-realm=HiThere,permission-mapper=default-permission-mapper)
/subsystem=elytron/http-authentication-factory=HiThere-http:add(http-server-mechanism-factory=global,security-domain=HiThere,mechanism-configurations=[{mechanism-name=BASIC},{mechanism-name=FORM}])
{noformat}

Executing it in admin-only mode, the following exception is thrown on the last command:

{noformat}
[standalone@localhost:9990 /] /subsystem=elytron/http-authentication-factory=HiThere-http:add(http-server-mechanism-factory=global,security-domain=HiThere,mechanism-configurations=[{mechanism-name=BASIC},{mechanism-name=FORM}])
{
    ""outcome"" => ""failed"",
    ""failure-description"" => undefined,
    ""rolled-back"" => true
}
{noformat}


{noformat}
11:43:43,034 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 19.0.0.Beta2-SNAPSHOT (WildFly Core 11.0.0.Beta8-SNAPSHOT) started in 129ms - Started 81 of 90 services (32 services are lazy, passive or on-demand)
11:43:47,923 INFO  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0183: Service status report
WFLYCTL0184:    New missing/unsatisfied dependencies:
      service org.wildfly.security.security-realm.HiThere (missing) dependents: [service org.wildfly.security.security-domain.HiThere.initial]
WFLYCTL0448: 1 additional services are down due to their dependencies being missing or failed

{noformat}

The execution using the embedded server works fine.

This issue basically is a follow up on WFCORE-4407, where we fixed this issue on the embedded server, however, it looks like we were pretty conservative with the changes. Now we need this on a standard admin-only server mode to allow cloud images to apply the server configuration using CLI operations.



",2020/02/04 6:54 AM
WFCORE-4830,Host Controller (slave) can not register to Domain Controller during its start up when there are managed servers starting. ,2020/01/31 3:27 AM
WFCORE-4829,"Using an operation like {{/subsystem=logging/pattern-formatter=formatter:add}} will correctly add the formatter to the model. However after a reload an exception is logged as the default values are not marshalled into the XML. 

Along with this even if the element is marshalled, the {{pattern}} attribute seems to get set to ""undefined"" in the logging configuration which just logs the ""undefined"" for every log message.",2020/01/30 7:24 PM
WFCORE-4827,"[~ropalka] I believe this is caused by the MSC refactoring.

Steps, in the default host.xml for domain mode.

1.  Define the following security realm: -

{noformat}
        <security-realms>
            <security-realm name=""ldap_security_realm"">
                <server-identities>
                    <ssl>
                        <keystore path=""generated.keystore"" relative-to=""jboss.server.config.dir"" keystore-password=""password"" alias=""server"" key-password=""password"" generate-self-signed-certificate-host=""localhost""/>
                    </ssl>
                </server-identities>
                <authentication>
                    <ldap connection=""testLdap"" base-dn=""dc=test,dc=sbc,dc=com"" recursive=""true"">
                        <username-filter attribute=""samaccountname""/>
                    </ldap>
                </authentication>
            </security-realm>
{noformat}

2. Define the following outbound connection: -

{noformat}
        <outbound-connections>
            <ldap name=""testLdap"" url=""ldap://localhost:636"" search-dn=""CN=mxxxxxx,OU=GenericID,OU=testUsers,DC=testServices,DC=test,DC=com"" search-credential=""passowrd"" />
        </outbound-connections>
{noformat}

3. Update the management interfaces to: -

{noformat}
        <management-interfaces>
            <http-interface security-realm=""ldap_security_realm"">
                <http-upgrade enabled=""true""/>
                <socket interface=""management"" port=""${jboss.management.http.port:9990}""/>
            </http-interface>
        </management-interfaces>
{noformat}

The server fails to boot with just the following error: -

{noformat}
[Host Controller] 17:56:40,052 FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0034: Host Controller boot has failed in an unrecoverable manner; exiting. See previous messages for details.
{noformat}

If the management interface is then updated to reference the ManagementRealm instead the error is now: -

{noformat}
[Host Controller] 18:01:48,595 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([
[Host Controller]     (""host"" => ""master""),
[Host Controller]     (""core-service"" => ""management""),
[Host Controller]     (""security-realm"" => ""ldap_security_realm"")
[Host Controller] ]) - failure description: {
[Host Controller]     ""WFLYCTL0412: Required services that are not installed:"" => [""jboss.server.path.\""jboss.server.config.dir\""""],
[Host Controller]     ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [""org.wildfly.core.management.security.realm.ldap_security_realm.key-manager is missing [jboss.server.path.\""jboss.server.config.dir\""]""]
[Host Controller] }
{noformat}

This error is expected as the realm defined in step 1 referenced an invalid path.

I believe the error reporting should come from this method: -
  org.jboss.as.controller.ServiceVerificationHelper.execute(OperationContext, ModelNode)
However something seems to have changes with the MSC migration.

This was recently encountered debugging the bug report in https://issues.redhat.com/browse/WFCORE-4820, if you see an error ""Multiple CallbackHandlerServices for the same mechanism (PLAIN)"" that has been covered by WFCORE-4820.



",2020/01/30 1:05 PM
WFCORE-4822,"We need to fix the version state before WildFly 19 is released.

* The KernelAPIVersion must be bumped to 12.0
* We also need to release wildly-config-12.0.xsd with the proper host-exclude for
  * WildFlY18, Version.10
  * EAP73, Version.10
 (and add those to KnownRelease too)
",2020/01/29 10:47 AM
WFCORE-4820,"error:
WFLYDM0042: Multiple CallbackHandlerServices for the same mechanism (PLAIN)
We get an error with the following ldap configuration. This works for version 17. 
<security-realm name=""ldap_security_realm"">
<server-identities>
<ssl>
<engine enabled-protocols=""TLSv1.2""/>
<keystore path=""/opt/app/workload/jboss/ssl_jboss/psftest2s.jboss.keystore"" keystore-password=""${VAULT::ssl_cert::password::1}""/>
</ssl>
</server-identities>
<authentication>
<ldap connection=""testLdap"" base-dn=""dc=test,dc=sbc,dc=com"" recursive=""true"">
<username-filter attribute=""samaccountname""/>
</ldap>
</authentication>
</security-realm>
</security-realms>
<outbound-connections>
<ldap name=""testLdap"" url=""ldap://its-ad-ldap.it.test.com:636"" search-dn=""CN=mxxxxxx,OU=GenericID,OU=testUsers,DC=testServices,DC=test,DC=com"" search-credential=""${VAULT::ldap_searchdn::password::1}"" security-realm=""ldap_security_realm""/>
</outbound-connections>
<management-interfaces>
<http-interface security-realm=""ldap_security_realm"">
<http-upgrade enabled=""true""/>
<socket interface=""management"" port=""${jboss.management.http.port:9990}""/>
</http-interface>
</management-interfaces>",2020/01/27 4:57 PM
WFCORE-4817,"If the user has a _JAVA_OPTIONS environment variable defined, this test consistently fails - as it does not account for the fact that stuff may already have been written to stdout.
e.g.
{noformat}
    <failure message=""expected:&lt;[]Unknown argument: --...&gt; but was:&lt;[Picked up _JAVA_OPTIONS: -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel -Dswing.crossplatformlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel -Dawt.useSystemAAFontSettings=gasp -Djdk.gtk.version=3 -Dsun.java2d.opengl=true&#10;]Unknown argument: --...&gt;"" type=""org.junit.ComparisonFailure""><![CDATA[org.junit.ComparisonFailure: 
expected:<[]Unknown argument: --...> but was:<[Picked up _JAVA_OPTIONS: -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel -Dswing.crossplatformlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel -Dawt.useSystemAAFontSettings=gasp -Djdk.gtk.version=3 -Dsun.java2d.opengl=true
]Unknown argument: --...>
{noformat}",2020/01/27 7:26 AM
WFCORE-4791,"Commit 68928b0b in WildFly-Core introduced new regression.
High probably test doesn't do proper test environment clean up
and some tests following it are thus failing. The issue isn't visible
in our CI environment so it probably depends on actual tests ordering.
I am able to reproduce this issue on my laptop always.",2020/01/07 9:14 AM
WFCORE-4782,"HttpManagementConstantHeadersTestCase doesn't do assertions on headerList.contains

It just does {{headerList.contains(new BasicHeader(TEST_HEADER, TEST_VALUE));}}",2019/12/20 4:08 AM
WFCORE-4778,"Runtime operations and access to runtime attributes fail for legacy LDAP realm.

{noformat}
ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 2) WFLYCTL0013: Operation (""read-attribute"") failed - address: ([
    (""core-service"" => ""management""),
    (""security-realm"" => ""authn-by-search-time-neg-neg""),
    (""authentication"" => ""ldap""),
    (""cache"" => ""by-search-time"")
]): java.lang.UnsupportedOperationException
        at org.jboss.msc.service.ServiceControllerImpl.awaitValue(ServiceControllerImpl.java:1115)
        at org.jboss.msc.service.DelegatingServiceController.awaitValue(DelegatingServiceController.java:110)
        at org.jboss.as.domain.management.security.LdapCacheResourceDefinition$BaseRuntimeOpHandler.lookupService(LdapCacheResourceDefinition.java:321)
        at org.jboss.as.domain.management.security.LdapCacheResourceDefinition$BaseRuntimeOpHandler.readAttribute(LdapCacheResourceDefinition.java:288)
        at org.jboss.as.domain.management.security.LdapCacheResourceDefinition$BaseRuntimeOpHandler$1.execute(LdapCacheResourceDefinition.java:269)
        at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:999)
        at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:743)
        at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:467)
        at org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1413)
        at org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:423)
        at org.jboss.as.controller.ModelControllerImpl.lambda$execute$1(ModelControllerImpl.java:243)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:289)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:255)
        at org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:243)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:240)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:138)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:162)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:158)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:313)
        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)
        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)
        at org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:158)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)
        at org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)
        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
        at java.lang.Thread.run(Thread.java:748)
        at org.jboss.threads.JBossThread.run(JBossThread.java:485)
{noformat}",2019/12/18 5:29 AM
WFCORE-4774,"In the RHAMT team we are trying to migrate the application from WF 15 to WF 18.
As part of the build the process starts WF and execute few .cli commands .

 I get a StackOverflowError in a command :

{code:java}
/subsystem=undertow/server=default-server/host=default-host/location=\//:write-attribute(name=handler,value=windup-web-redirect)
Error 
 Command execution failed for command '/subsystem=undertow/server=default-server/host=default-host/location=\//:write-attribute(name=handler,value=windup-web-redirect)'. {
[ERROR]     ""outcome"" => ""failed"",
[ERROR]     ""failure-description"" => ""java.lang.StackOverflowError:null""
[ERROR] }

^[[0m^[[31m17:48:42,651 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0403: Unexpected failure during execution of the following operation(s): [{
    ""address"" => [
        (""subsystem"" => ""undertow""),
        (""server"" => ""default-server""),
        (""host"" => ""default-host""),
        (""location"" => ""/"")
    ],
    ""operation"" => ""write-attribute"",
    ""name"" => ""handler"",
    ""value"" => ""windup-web-redirect"",
    ""operation-headers"" => {
        ""caller-type"" => ""user"",
        ""access-mechanism"" => ""NATIVE""
    }
}]: java.lang.StackOverflowError
        at org.jboss.as.controller.CapabilityRegistry.getDependentCapabilityStatus(CapabilityRegistry.java:418)
        at org.jboss.as.controller.CapabilityRegistry.getCapabilityStatus(CapabilityRegistry.java:392)
        at org.jboss.as.controller.CapabilityRegistry.getDependentCapabilityStatus(CapabilityRegistry.java:426)
        at org.jboss.as.controller.CapabilityRegistry.getCapabilityStatus(CapabilityRegistry.java:392)
        at org.jboss.as.controller.CapabilityRegistry.getDependentCapabilityStatus(CapabilityRegistry.java:426)
        at org.jboss.as.controller.CapabilityRegistry.getCapabilityStatus(CapabilityRegistry.java:392)
        at org.jboss.as.controller.CapabilityRegistry.getDependentCapabilityStatus(CapabilityRegistry.java:426)
{code}

If I connect to WF 18, using jboss-cli.sh and this is the result of the read command :
{code}
[standalone@localhost:9990 /] /subsystem=undertow/server=default-server/host=default-host/location=\//:read-attribute(name=handler)
{
    ""outcome"" => ""success"",
    ""result"" => ""welcome-content"",
    ""response-headers"" => {""process-state"" => ""restart-required""}
}
{code}

But if I do the write command :
{code}
[standalone@localhost:9990 /] /subsystem=undertow/server=default-server/host=default-host/location=\//:write-attribute(name=handler,value=windup-web-redirect)
{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""java.lang.StackOverflowError:null""
}
{code}

Even if I try to write the same value as I get from the read command it gives the same error.
If I try to use *add* instead of *write-attribute*, I get a resource duplicated error.

*This is stopping our current migration of RHAMT 4.3.0 to WF 18*",2019/12/11 3:17 AM
WFCORE-4768,"[org.wildfly.extension.io] (ServerService Thread Pool -- 52) WFLYIO001: Worker 'default' has auto-configured to 24 core threads with 192 task threads based on your 12 available processors

The IO subsystem by default picks values for the thread default sizes.
The '24 core threads' is actually io-threads
The '192 task threads' is the 'task-max-threads'
The task-core-threads looks like it actually defaults to 2

It would be better to change '24 core threads' to '24 IO threads' and 192 task threads'  to 192 max task threads' 

{code}
list-get                    map-put                     read-attribute-group        read-children-types         read-resource-description   write-attribute
[standalone@localhost:9990 /] /subsystem=io:read-resource(include-runtime=true,recursive=true)
{
    ""outcome"" => ""success"",
    ""result"" => {
        ""buffer-pool"" => {""default"" => {
            ""buffer-size"" => undefined,
            ""buffers-per-slice"" => undefined,
            ""direct-buffers"" => undefined
        }},
        ""worker"" => {""default"" => {
            ""busy-task-thread-count"" => 0,
            ""core-pool-size"" => 2,
            ""io-thread-count"" => 24,
            ""io-threads"" => ""24"",
            ""max-pool-size"" => 192,
            ""queue-size"" => 0,
            ""shutdown-requested"" => false,
            ""stack-size"" => ""0"",
            ""task-core-threads"" => ""2"",
            ""task-keepalive"" => ""60000"",
            ""task-max-threads"" => ""192"",
{code}",2019/12/02 11:12 AM
WFCORE-4745,"In some cases, seems to happen in CI, the modules created in the logging subsystem tests fail to load. There are a couple issues with the test environment.
# There are some invalid version properties used in the {{module.xml}} files
# The {{maven.repo.local}} system property needs to be set in the surefire system properties.

The combinations of these fixes seems to fix the test suite issues seen only on an internal CI box for some reason. Either way this should be corrected as it is invalid and could fail in other environments as well.",2019/11/08 3:49 PM
WFCORE-4733,"Install WildFly on two different machines, add an 'admin' user and start the {{host-master.xml}} configurations on each node, like:

machineA: (10.10.10.1)
{noformat}
$JBOSS_HOME/bin/add-user.sh -u admin -p admin
$JBOSS_HOME/bin/domain.sh --host-config.xml -Djboss.bind.address.management=10.10.10.1
{noformat}

machineB: 10.10.10.2
{noformat}
$JBOSS_HOME/bin/add-user.sh -u admin -p admin
$JBOSS_HOME/bin/domain.sh --host-config.xml -Djboss.bind.address.management=10.10.10.2
{noformat}

And then applying a simplified script like below to machineB:

{code}
batch
/host=master:write-attribute(name=name, value=slave)
/host=master/core-service=discovery-options/static-discovery=primary:add(host=10.10.10.1, port=9990, protocol=remote+http)
/host=master:write-remote-domain-controller(username=admin, security-realm=""ManagementRealm"")
/host=master/core-service=management/security-realm=ManagementRealm/server-identity=secret:add(value=""YWRtaW4="")
run-batch

/host=master:reload
{code}

Executing this scripts results in a server log output like below and stopping of the 'DomainController':

{noformat}
[Host Controller] INFO  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0003: Creating http management service using network interface (management) port (9990) securePort (-1)
[Host Controller] WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-2) WFLYDM0111: Keystore /jboss/jboss-eap-7.2/domain/configuration/application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
[Host Controller] WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0001: Could not connect to remote domain controller remote+http://10.0.0.1:9990: 2-$-WFLYDC0015: There is already a registered host named 'master'
[Host Controller] 	at org.jboss.as.host.controller.RemoteDomainConnection$HostControllerConnectRequest.handleRequest(RemoteDomainConnection.java:390)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:321)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleRequest(AbstractMessageHandler.java:286)
[Host Controller] 	at org.jboss.as.protocol.mgmt.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:234)
[Host Controller] 	at org.jboss.as.protocol.mgmt.ManagementChannelReceiver.handleMessage(ManagementChannelReceiver.java:85)
[Host Controller] 	at org.jboss.remoting3.remote.RemoteConnectionChannel.lambda$handleMessageData$3(RemoteConnectionChannel.java:430)
[Host Controller] 	at org.jboss.remoting3.EndpointImpl$TrackingExecutor.lambda$execute$0(EndpointImpl.java:991)
[Host Controller] 	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
[Host Controller] 	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
[Host Controller] 	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
[Host Controller] 	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
[Host Controller] 	at java.lang.Thread.run(Thread.java:748)
[Host Controller] 
[Host Controller] WARN  [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0147: No domain controller discovery options remain.
[Host Controller] ERROR [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0002: Could not connect to master. Error was: java.lang.IllegalStateException: WFLYHC0120: Tried all domain controller discovery option(s) but unable to connect
[Host Controller] FATAL [org.jboss.as.host.controller] (Controller Boot Thread) WFLYHC0178: Aborting with exit code 99
[Host Controller] INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: JBoss EAP 7.2.4.GA (WildFly Core 6.0.16.Final-redhat-00002) stopped in 77ms
{noformat}",2019/10/28 9:27 AM
WFCORE-4723,"This test is dependent on a bad host address triggering a UDP write failure, however later Linux Kernel updates are more tolerant to this bad address - overall the Java APIs can not be relied upon in this situation so the test will be removed.

",2019/10/23 8:45 AM
WFCORE-4707,"Consider the call:
{code:java}
OperationContext.getCapabilityServiceName(""test"", ""foo.bar"");
{code}
This method first resolves the qualified capability name as ""test.foo.bar"".  If no capability is registered with that name, the service name is generated using:
{code:java}
ServiceNameFactory.parseServiceName(""test.foo.bar"");
{code}
This generates a ServiceName with 3 elements.

However, when this capability is actually created with name of ""test"" and dynamic part ""foo.bar"", its service name will contain 2 elements, not 3.
i.e.
{code:java}
RuntimeCapability.Builder.of(""test"", true, ServiceType.class).fromBaseCapability(""foo.bar"").getCapabilityServiceName();
{code}

Interestingly, the correspond method return by the OperationContext.getCapabilityServiceSupport() implementation does this correctly.
i.e.
{code:java}
OperationContext.getCapabilityServiceSupport().getCapabilityServiceName(""test"", ""foo.bar"");
{code}
returns the result of:
{code:java}
ServiceNameFactory.parseServiceName(""test"").append(""foo.bar"");
{code}",2019/10/10 5:05 PM
WFCORE-4688,"With OpenJDK11 + OpenJ9, I can see following error during the server bootup:
{code}
JVMJ9VM085W Malformed option: '-Xlog:gc*:file=<JBOSS_HOME_PATH>/standalone/log/gc.log:time'
{code}

Based on the [discussion here|https://github.com/eclipse/openj9/issues/3999], the {{-Xlog:gc}} option is not supported in this JDK and it won't be.

Relevant part of the startup script for standalone.sh in [upstream WildFly|https://github.com/wildfly/wildfly-core/blob/master/core-feature-pack/src/main/resources/content/bin/standalone.sh#L281].

This warning occurs only on OpenJDK11 + OpenJ9. This does not show up when using OpenJDK8 + OpenJ9 as different branch in script is used in that case ({{-verbose:gc -Xloggc:\""$JBOSS_LOG_DIR/gc.log\"" -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=3M -XX:-TraceClassUnloading}}).",2019/09/30 1:19 PM
WFCORE-4659,"The definition of the default security context was removed to be static https://github.com/wildfly/wildfly-core/pull/3892/commits/4f34c962fec06e81673c17f8f37b4122c1034623#diff-8396de3001749ce06e45825a9bea821dR439 as it could cause defective behaviour. To quote Stuart:
{quote}
The 'standard' default is basically random, as it can vary based on what the first TCCL to access it is.
{quote}

But removing the static default authentication context makes troubles for the transaction recovery which does not have an authentication context specified. Recovery can use only global one and while it's a workaround to the real issue of recovery has not defined any, it was a working solution. With the mentioned change this solution stopped to work.

Loading of the static authentication context should be reverted back and later fix properly.",2019/09/11 3:20 AM
WFCORE-4636,"Both CLASS and MODULE use setFlags(Flag.RESTART_RESOURCE_SERVICES) but I believe that is incorrect; it should be setFlags(Flag.RESTART_ALL_SERVICES). The uses I saw appear to require a server reload. If there are any that don't then those need to use a different AD.

I mark this Blocker not because it's a huge thing but because https://github.com/wildfly/wildfly-core/pull/3908 adds another use of these and there is no reason to publish additional incorrect API descriptions.

I see no compatibility issue with simply changing this. #3908 means there is a new API version and this change is just a metadata correction to reflect the actual behavior.",2019/08/30 9:31 AM
WFCORE-4633,"[INFO] Running org.wildfly.scripts.test.StandaloneScriptTestCase
[ERROR] Tests run: 10, Failures: 1, Errors: 0, Skipped: 8, Time elapsed: 20.724 s <<< FAILURE! - in org.wildfly.scripts.test.StandaloneScriptTestCase
[ERROR] testBashScript[1](org.wildfly.scripts.test.StandaloneScriptTestCase)  Time elapsed: 3.729 s  <<< FAILURE!
java.lang.AssertionError: Missing gc.log.0.current file in /home/opalka/git/redhat/wildfly-core/testsuite/scripts/target/wildfly-core/standalone/log
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.wildfly.scripts.test.StandaloneScriptTestCase.testScript(StandaloneScriptTestCase.java:135)
	at org.wildfly.scripts.test.ScriptTestCase.executeTests(ScriptTestCase.java:257)
	at org.wildfly.scripts.test.ScriptTestCase.testBashScript(ScriptTestCase.java:170)
",2019/08/28 8:08 AM
WFCORE-4627,Bug fix to fix parsing and adding of responder-certificate and responder-keystore to ocsp configuration. Fix will be adding RESPONDER_CERTIFICATE and RESPONDER_KEYSTORE to the OCSP attribute builder and adding responder-certificate and responder-keystore attributes to the ocspType in elytron schema.,2019/08/26 3:50 PM
WFCORE-4617,"If the --controller is not spelled correctly, the CLI is ignoring it and then trying to connect to the default localhost:9990 in from the jboss-cli.xml.  This makes it look like there is a connection error when the actual issue is the option passed to the CLI is not a valid option.

{code}
./bin/standalone.sh -Djboss.socket.binding.port-offset=9
{code}

{code}
/bin/jboss-cli.sh --controler=myhost:9999 --connect
Failed to connect to the controller: The controller is not available at localhost:9990: java.net.ConnectException: WFLYPRT0053: Could not connect to remote+http://localhost:9990. The connection failed: WFLYPRT0053: Could not connect to remote+http://localhost:9990. The connection failed: Connection refused
{code}",2019/08/22 3:55 AM
WFCORE-4613,"{noformat}
[standalone@localhost:9990 /] /subsystem=discovery/static-provider=mod_cluster:write-attribute(name=services,value=[{uri=mod_cluster:http://localhost:8090},{abstract-type=mod_cluster,uri=http://localhost:8090}]
{
    ""outcome"" => ""success"",
    ""response-headers"" => {
        ""operation-requires-reload"" => true,
        ""process-state"" => ""reload-required""
    }
}

[standalone@localhost:9990 /] reload
Failed to establish connection in 6014ms
{noformat}

yields

{noformat}
00:05:43,104 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 48) WFLYCTL0013: Operation (""add"") failed - address: ([
    (""subsystem"" => ""discovery""),
    (""static-provider"" => ""mod_cluster"")
]): java.lang.IllegalArgumentException: Illegal character in scheme name at index 3: mod_cluster:http://localhost:8090
	at java.net.URI.create(URI.java:852)
	at org.wildfly.extension.discovery.StaticDiscoveryProviderAddHandler.performRuntime(StaticDiscoveryProviderAddHandler.java:60)
	at org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:159)
	at org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:999)
	at org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:743)
	at org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:467)
	at org.jboss.as.controller.ParallelBootOperationStepHandler$ParallelBootTask.run(ParallelBootOperationStepHandler.java:384)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1348)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:485)
Caused by: java.net.URISyntaxException: Illegal character in scheme name at index 3: mod_cluster:http://localhost:8090
	at java.net.URI$Parser.fail(URI.java:2848)
	at java.net.URI$Parser.checkChars(URI.java:3021)
	at java.net.URI$Parser.parse(URI.java:3048)
	at java.net.URI.<init>(URI.java:588)
	at java.net.URI.create(URI.java:850)
	... 12 more

...

00:05:43,164 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) ""WFLYCTL0193: Failed executing subsystem discovery boot operations""
00:05:43,164 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""parallel-subsystem-boot"") failed - address: ([]) - failure description: ""\""WFLYCTL0193: Failed executing subsystem discovery boot operations\""""

{noformat}",2019/08/19 6:13 PM
WFCORE-4607,DeploymentReplaceHandler recursively reads the root model node just to check if it has a couple direct children. A non-recursive read can provide that information without requiring a clone of the model.,2019/08/14 12:19 PM
WFCORE-4587,Trivial extension of 'maximum-cert-path' attribute of trust-manager to give message when this value actually takes any effect - only if OCSP or CRL are configured.,2019/07/31 3:58 AM
WFCORE-4586," patch apply ... --override-all does not work if layer module is corrupted

--override-all and the other overrides seems to work if there is a corruption in the base layer, but if one of the CP layers is corrupt, then the override does not seem to have any effect.

patch apply ../jboss-eap-7.2.3-patch.zip --override-all 
java.io.SyncFailedException: WFLYPAT0018: copied content does not match expected hash for item: ModuleItem{com.fasterxml.jackson.core.jackson-annotations:main}

",2019/07/30 9:03 AM
WFCORE-4576,"wildfly-core-vault-test-galleon-pack is a wildfly-core-parent managed dependency, yet wildfly-core releases do not deploy it to remote Maven repositories. Any import, such as wildfly-parent or component matrix BOMs, of such dependency management than includes a non existent artifact...

There are two high level solutions for a fix:
a) deploy such artifact to remote maven repos
b) remove such artifact from WildFly-core-parent's dependency management

Please note that b) implies that either all dependants are updated to include <version/>, or such artifact version management is moved to testsuite/pom.xml (a non managed pom that is parent of all dependants).",2019/07/19 6:06 PM
WFCORE-4575,"WildFly-core-parent's dependency management includes

{code}
<dependency>
  <groupId>org.wildfly.core</groupId>
  <artifactId>wildfly-self-contained</artifactId>
  <version>${project.version}</version>
</dependency>
{code}

but such artifact does not exists anymore in the project.",2019/07/19 5:07 PM
WFCORE-4574,"The NonceManager creates a ScheduledThreadPoolExecutor in

https://github.com/wildfly-security/wildfly-elytron/blob/master/http/digest/src/main/java/org/wildfly/security/http/digest/NonceManager.java#L49

but there is no way to shut it down, thus resulting in a thread leak when stopping an application.",2019/07/19 4:31 PM
WFCORE-4572,"There appears to be a typo in UndertowHttpManagementService.java where in its start method it has this code:

{code:java}
...
if(secureBindAddress != null) {
            ListenerRegistry.Listener https = new ListenerRegistry.Listener(""https"", HTTPS_MANAGEMENT, SERVER_NAME, bindAddress);
            ...
        }
{code}
Notice that it creates a Listener by passing it ""bindAddress"". This IMO is a typo and should instead pass the ""secureBindAddress"".

This isn't causing any visible issues right now since there appear to be no one who uses this value from the instantiated Listener (no calls to Listener.getBindAddress()).
",2019/07/19 4:06 AM
WFCORE-4571,"Value of the 'soft-fail' attribute that is used in 'trust-manager' resource is not propagated from configuration to server correctly. As such, server always thinks the value is set to 'false'. See steps to reproduce section for more details.",2019/07/18 12:22 PM
WFCORE-4561,"JMX audit logs don't actually show all values needed to audit JMX operations.

Output for EAP's JMX audit logging currently looks like the following:


{code:json}
2019-05-29 16:01:40 - {
    ""type"" : ""jmx"",
    ""r/o"" : false,
    ""booting"" : false,
    ""version"" : ""7.1.3.GA"",
    ""user"" : ""jmxuser"",
    ""domainUUID"" : null,
    ""access"" : ""JMX"",
    ""remote-address"" : ""localhost/127.0.0.1"",
    ""method"" : ""invoke"",
    ""sig"" : [
        ""javax.management.ObjectName"",
        ""java.lang.String"",
        ""[Ljava.lang.Object;"",
        ""[Ljava.lang.String;""
    ],
    ""params"" : [
        ""java.util.logging:type=Logging"",
        ""getLoggerLevel"",
        ""[Ljava.lang.Object;@5755b7fa"",
        ""[Ljava.lang.String;@784a9d0d""
    ]
}
{code}


This result follows the format of the Java interface {{MBeanServerConnection.invoke()}} [1], but does not actually display the values in the ""sig"" and ""params"" blocks for the two arrays passed in as parameters ({{[Ljava.lang.Object;}} and {{[Ljava.lang.String;}} are just what {{Object.toString()}} returns for any array of Objects or array of Strings).

This means that we can gather the name of the MBean and the method of it which has been invoked, but we cannot gather any information on what values were sent to the MBean. Because of this, we cannot determine what change has been attempted. This absence of information is relatively important for what is supposed to be an auditing log.

Auditing output should contain the actual values of (at least) the Object array so that customers can audit what JMX alterations were attempted.

[1] https://docs.oracle.com/javase/8/docs/api/javax/management/MBeanServerConnection.html#invoke-javax.management.ObjectName-java.lang.String-java.lang.Object:A-java.lang.String:A-",2019/07/08 10:43 AM
WFCORE-4559,"Addon patches are added to the wrong instance of ModelNode which breaks the CLI `patch info --verbose`. Here is how it should be fixed
{code:java}
diff --git a/patching/src/main/java/org/jboss/as/patching/tool/PatchOperationTarget.java b/patching/src/main/java/org/jboss/as/patching/tool/PatchOperationTarget.java
index e739c73847..4901ccc25d 100644
--- a/patching/src/main/java/org/jboss/as/patching/tool/PatchOperationTarget.java
+++ b/patching/src/main/java/org/jboss/as/patching/tool/PatchOperationTarget.java
@@ -183,9 +183,10 @@ public abstract class PatchOperationTarget {
                     }
                 }
                 if(vInfo.hasAddOns()) {
-                    final ModelNode layerNode = result.get(Constants.ADD_ON);
+                    final ModelNode layersNode = result.get(Constants.ADD_ON);
                     for(String name : vInfo.getAddOnNames()) {
                         final TargetInfo layerInfo = vInfo.getAddOnInfo(name);
+                        final ModelNode layerNode = layersNode.get(name);
                         layerNode.get(Constants.CUMULATIVE).set(layerInfo.getCumulativePatchID());
                         final ModelNode patchesNode = layerNode.get(Constants.PATCHES).setEmptyList();
                         if(!layerInfo.getPatchIDs().isEmpty()) {
{code}
",2019/07/04 8:37 AM
WFCORE-4558,"During the boot of the logging subsystem values from the configuration are compared against the values from the model to determine if a change to the configuration is needed. When getting the configuration value it is wrapped with a {{String.valueOf()}} which for {{null}} values returns {{""null""}}. This fails the comparison and results in the configuration being overwritten. For something like a handler this means log messages could be lost if {{rotate-on-boot}} is set to {{true}} or {{append}} is set to {{false}}.",2019/07/03 12:19 PM
WFCORE-4557,"When we are reading the http-upgrade-enabled, the model is read acquiring the write lock. That could make the operation block until the write lock is released by any other underlying operation that previously has acquired it.

The read handler only reads the value and put it in the response, so taking the write lock here is unnecessary.

This issue affects the ongoing work in WFCORE-4283, there, we could have servers starting with the write lock taken, so it negatively affects to any reading of this attribute.
",2019/07/02 11:25 AM
WFCORE-4553,"On application output found:
{code}
Bad level value for property: handler.CLIFILE.level
{code}

handler.CLIFILE.level is the name of a property from the test property file used in standalone testsuite

Stack trace:
{code}
java.lang.AssertionError
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertTrue(Assert.java:52)
	at org.jboss.as.test.integration.management.cli.SilentModeTestCase.checkIfEmpty(SilentModeTestCase.java:152)
	at org.jboss.as.test.integration.management.cli.SilentModeTestCase.testLogging(SilentModeTestCase.java:99)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:90)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)
	at java.lang.reflect.Method.invoke(Method.java:508)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:109)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junitcore.JUnitCore.run(JUnitCore.java:55)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:137)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
	at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
	at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:158)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:383)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:344)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:125)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:417)
{code}",2019/06/28 10:37 AM
WFCORE-4545,The WFCORE-4406 fix did not cover a number of dependencies that were added during the development of WF Core 9.,2019/06/23 6:15 PM
WFCORE-4544,The docs/licenses/core-feature-pack-licenses.html file is missing most of the expected content. Seems to have only org.wildfly.core:wildfly-event-logger and various org.wildfly.security items.,2019/06/23 5:15 PM
WFCORE-4542,"Currently, this is required, thus an operation like:
/subsystem=discovery/static-provider=foo:add(services=[{uri=http://localhost:8080}])

... fails because the ""attributes"" of a ""service"" is required.",2019/06/21 10:36 AM
WFCORE-4541,"{code}

[standalone@embedded /] /subsystem=discovery/static-provider=foo:write-attribute(name=services,value=[{uri=a:b:c}]
15:50:11,877 ERROR [org.jboss.as.controller.management-operation] (pool-3-thread-2) WFLYCTL0013: Operation (""write-attribute"") failed - address: ([
    (""subsystem"" => ""discovery""),
    (""static-provider"" => ""foo"")
]): java.lang.StackOverflowError
	at java.util.Collections$UnmodifiableCollection$1.<init>(Collections.java:1039)
	at java.util.Collections$UnmodifiableCollection.iterator(Collections.java:1038)
	at org.jboss.as.controller.operations.validation.ModelTypeValidator.validateParameter(ModelTypeValidator.java:157)
	at org.jboss.as.controller.operations.validation.StringLengthValidator.validateParameter(StringLengthValidator.java:86)
	at org.jboss.as.controller.operations.validation.NillableOrExpressionParameterValidator.validateParameter(NillableOrExpressionParameterValidator.java:78)
	at org.jboss.as.controller.AttributeDefinition.validateOperation(AttributeDefinition.java:1228)
	at org.jboss.as.controller.AttributeDefinition.validateOperation(AttributeDefinition.java:491)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.execute(WriteAttributeHandler.java:70)
	at org.wildfly.extension.discovery.StaticProviderAddHandler.modifyRegistrationModel(StaticProviderAddHandler.java:70)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.doExecuteInternal(WriteAttributeHandler.java:194)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.execute(WriteAttributeHandler.java:115)
	at org.wildfly.extension.discovery.StaticProviderAddHandler.modifyRegistrationModel(StaticProviderAddHandler.java:70)
  ...
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.execute(WriteAttributeHandler.java:115)
	at org.wildfly.extension.discovery.StaticProviderAddHandler.modifyRegistrationModel(StaticProviderAddHandler.java:70)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.doExecuteInternal(WriteAttributeHandler.java:194)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.execute(WriteAttributeHandler.java:115)
	at org.wildfly.extension.discovery.StaticProviderAddHandler.modifyRegistrationModel(StaticProviderAddHandler.java:70)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.doExecuteInternal(WriteAttributeHandler.java:194)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.execute(WriteAttributeHandler.java:115)
	at org.wildfly.extension.discovery.StaticProviderAddHandler.modifyRegistrationModel(StaticProviderAddHandler.java:70)
	at org.jboss.as.controller.operations.global.WriteAttributeHandler.doExecuteInternal(WriteAttributeHandler.java:194)

{
    ""outcome"" => ""failed"",
    ""failure-description"" => ""WFLYCTL0158: Operation handler failed: java.lang.StackOverflowError"",
    ""rolled-back"" => true
}
{code}",2019/06/21 9:54 AM
WFCORE-4543,"CLI output is doubled after embed-server reload:

{noformat}
[okotek@localhost wildfly-18.0.0.Beta1-SNAPSHOT]$ ./bin/jboss-cli.sh 
You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.
[disconnected /] embed-server 
[standalone@embedded /] :whoami
{
    ""outcome"" => ""success"",
    ""result"" => {""identity"" => {""username"" => ""anonymous""}}
}

[standalone@embedded /] reload 
[standalone@embedded /] :whoami
12:34:27,735 INFO  [org.jboss.as.cli.CommandContext] (CLI command) {
    ""outcome"" => ""success"",
    ""result"" => {""identity"" => {""username"" => ""anonymous""}}
}
{
    ""outcome"" => ""success"",
    ""result"" => {""identity"" => {""username"" => ""anonymous""}}
}
{noformat}",2019/06/21 6:40 AM
WFCORE-4535,"The discovery subsystem registers capabilities of the form RuntimeCapability<Void> with a service type of DiscoveryProvider.class with the model.

However, during runtime it registers capabilities of the form RuntimeCapability<DiscoveryProvider> with the OperationContext using the same name.

This violates the capability contract.  Since the capability specified during resource registration is what defines the contract, and since non-trivial discovery provider implementations cannot reasonably register an implementation during the model phase without requiring runtime dependencies, we should prefer the former definition over the latter.",2019/06/20 1:11 PM
WFCORE-4525,"The following tests are failing on latest IBM JDK 8:

---
# testsuite/standalone
SilentModeTestCase
# testsuite/manualmode
CLIEmbedHostControllerTestCase
CLIEmbedServerTestCase
---

Tested on:

---
java version ""1.8.0_211""
Java(TM) SE Runtime Environment (build 8.0.5.36 - pxa6480sr5fp36-20190510_01(SR5 FP36))
IBM J9 VM (build 2.9, JRE 1.8.0 Linux amd64-64-Bit Compressed References 20190502_415899 (JIT enabled, AOT enabled)
OpenJ9   - 46e57f9
OMR      - 06a046a
IBM      - 0b909bf)
JCL - 20190409_01 based on Oracle jdk8u211-b25
---",2019/06/13 8:19 AM
WFCORE-4521,"When you have a wildfly installation with no domain configuration directory (WILDFLY_HOME/domain) the {{bin/add-user.sh}} fails because it expects both (standalone and domain) configs to exists in order to update the properties file...

It seems this behavior is fixed in the code implementation at [org.jboss.as.domain.management.security.adduser.AddUser.java|https://github.com/wildfly/wildfly-core/blob/master/domain-management/src/main/java/org/jboss/as/domain/management/security/adduser/AddUser.java#L160]",2019/06/12 12:54 PM
WFCORE-4519,"In domain mode, there is a cleanup task that removes obsolete content from the deployment repository of each process (DC, slave HC, and servers). By default, this task is executed every five minutes. 

The task checks if there is any content to be marked as obsolete, if there is, it is marked and deleted on the next task execution.

Deployment content is considerate obsolete in a slave HC if there are no references to it, that means if there is no server group that has this deployment configured.

The issue here is the deployment handler that replaces the deployment content in a slave is not adding a reference to the new content if there are affected server groups. 

The consequence is the cleanup task could delete the slave HC content. If this occurs when the servers are starting, the servers could fail to start with the following error:


{noformat}
2019-06-12 08:51:32,813 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""add"") failed - address: ([(""deployment"" => ""test-application.war"")]) - failure description: ""WFLYSRV0137: No deployment content with hash b1fb3b872b3490bbdbd152bd082791b1f170397d is available in the deployment content repository for deployment 'test-application.war'. This is a fatal boot error. To correct the problem, either restart with the --admin-only switch set and use the CLI to install the missing content or remove it from the configuration, or remove the deployment from the xml configuration file and restart.""
2019-06-12 08:51:32,817 FATAL [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0056: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
2019-06-12 08:51:32,833 INFO  [org.jboss.as] (MSC service thread 1-4) WFLYSRV0050: WildFly Full 17.0.0.Final-SNAPSHOT (WildFly Core 9.0.1.Final-SNAPSHOT) stopped in 5ms
{noformat}

The issue is difficult to hit because it is the server who requests the required files to the slave HC. In order to reproduce it, there must be a coincidence when the server has requested a deployment file to its HC, the  HC already has this file in its deployment repository marked as obsolete and, before send it to the server, the cleanup task removes it. ",2019/06/12 4:06 AM
WFCORE-4516,"The expression for secret value under server-identities in test-security-realm does not work , even though it shows ""expressions-allowed"" to true like below .

----------------------------
[standalone@localhost:9990 /] /core-service=management/security-realm=test-security-realm/server-identity=secret:read-resource-description()
{
""outcome"" => ""success"",
.
.

""attributes"" =>

{. . . . . }
,
""value"" =>

{ ""type"" => STRING, ""description"" => ""The secret / password - Base64 Encoded."", ""expressions-allowed"" => true, ""required"" => true, ""nillable"" => true, ""alternatives"" => [""credential-reference""], ""min-length"" => 1L, ""max-length"" => 2147483647L, ""access-type"" => ""read-write"", ""storage"" => ""configuration"", ""restart-required"" => ""no-services"" }
},
""operations"" => undefined,
""notifications"" => undefined,
""children"" => {}
}
}
----------------------------",2019/06/11 10:43 AM
WFCORE-4510,Originally we could not get remote+http to work with a non-default worker after following all the changes we found in the schema. It looks like remoting uses the default worker even when the endpoint is configured to use a different worker.,2019/06/06 6:32 PM
WFCORE-4508,"https://ci.wildfly.org/viewLog.html?buildId=153795&buildTypeId=WF_PullRequest_WindowsJdk11

{code}
15:16:39,417 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC000001: Failed to start service jboss.deployment.unit.""test.ear"".metrics: org.jboss.msc.service.StartException in service jboss.deployment.unit.""test.ear"".metrics: Failed to start service
	at org.jboss.msc@1.4.6.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1730)
	at org.jboss.msc@1.4.6.Final//org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1558)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.util.ConcurrentModificationException
	at java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:1493)
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1526)
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1524)
	at java.base/java.util.HashMap.putMapEntries(HashMap.java:507)
	at java.base/java.util.HashMap.<init>(HashMap.java:485)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.ConcreteResourceRegistration.getAttributes(ConcreteResourceRegistration.java:862)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.NodeSubregistry.getAttributes(NodeSubregistry.java:332)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.ConcreteResourceRegistration.getAttributes(ConcreteResourceRegistration.java:858)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.NodeSubregistry.getAttributes(NodeSubregistry.java:328)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.ConcreteResourceRegistration.getAttributes(ConcreteResourceRegistration.java:858)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.NodeSubregistry.getAttributes(NodeSubregistry.java:332)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.ConcreteResourceRegistration.getAttributes(ConcreteResourceRegistration.java:858)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.NodeSubregistry.getAttributes(NodeSubregistry.java:332)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.ConcreteResourceRegistration.getAttributes(ConcreteResourceRegistration.java:858)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.AbstractResourceRegistration.getAttributes(AbstractResourceRegistration.java:301)
	at org.jboss.as.controller@9.0.0.Final//org.jboss.as.controller.registry.AbstractResourceRegistration.getAttributes(AbstractResourceRegistration.java:298)
	at org.wildfly.extension.microprofile.metrics-smallrye@17.0.0.Final-SNAPSHOT//org.wildfly.extension.microprofile.metrics.MetricCollector.collectResourceMetrics0(MetricCollector.java:105)
	at org.wildfly.extension.microprofile.metrics-smallrye@17.0.0.Final-SNAPSHOT//org.wildfly.extension.microprofile.metrics.MetricCollector.collectResourceMetrics0(MetricCollector.java:166)
	at org.wildfly.extension.microprofile.metrics-smallrye@17.0.0.Final-SNAPSHOT//org.wildfly.extension.microprofile.metrics.MetricCollector.collectResourceMetrics0(MetricCollector.java:166)
	at org.wildfly.extension.microprofile.metrics-smallrye@17.0.0.Final-SNAPSHOT//org.wildfly.extension.microprofile.metrics.MetricCollector.collectResourceMetrics0(MetricCollector.java:166)
	at org.wildfly.extension.microprofile.metrics-smallrye@17.0.0.Final-SNAPSHOT//org.wildfly.extension.microprofile.metrics.MetricCollector.collectResourceMetrics(MetricCollector.java:92)
	at org.wildfly.extension.microprofile.metrics-smallrye@17.0.0.Final-SNAPSHOT//org.wildfly.extension.microprofile.metrics.deployment.DeploymentMetricService.start(DeploymentMetricService.java:55)
	at org.jboss.msc@1.4.6.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1738)
	at org.jboss.msc@1.4.6.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1700)
	... 6 more
{code}",2019/06/05 8:43 PM
WFCORE-4475,"Follow up to JBEAP-13094 and JBEAP-14310 

annotations=true on a sub deployment module reference fails to deploy.
This is the same test app from JBEAP-13094, the only change is the api jar is listed as a module in application.xml and then the j-d-s.xml depends on its deployment module.

{code}
<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?>
<jboss-deployment-structure xmlns=""urn:jboss:deployment-structure:1.2"">
  <sub-deployment name=""application-exception-ejb.jar"">
    <dependencies>
      <module name=""deployment.application-exception-api.jar"" annotations=""true"" meta-inf=""export""/>
    </dependencies>
  </sub-deployment>
  <sub-deployment name=""application-exception-client-singleton.jar"">
    <dependencies>
      <module name=""deployment.application-exception-api.jar"" annotations=""true"" meta-inf=""export""/>
    </dependencies>
  </sub-deployment>
</jboss-deployment-structure>
{code}

{code}
23:28:46,235 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""deploy"") failed - address: ([(""deployment"" => ""application-exception-using-dynamic-module.ear"")]) - failure description: {
    ""WFLYCTL0412: Required services that are not installed:"" => [""jboss.module.service.\""deployment.application-exception-using-dynamic-module.ear.application-exception-api.jar\"".main""],
    ""WFLYCTL0180: Services with missing/unavailable dependencies"" => [
        ""jboss.deployment.subunit.\""application-exception-using-dynamic-module.ear\"".\""application-exception-client-singleton.jar\"".PARSE is missing [jboss.module.service.\""deployment.application-exception-using-dynamic-module.ear.application-exception-api.jar\"".main]"",
        ""jboss.deployment.subunit.\""application-exception-using-dynamic-module.ear\"".\""application-exception-ejb.jar\"".PARSE is missing [jboss.module.service.\""deployment.application-exception-using-dynamic-module.ear.application-exception-api.jar\"".main]""
    ]
}
{code}",2019/05/17 11:30 AM
WFCORE-4460,"The CLI returns a JSON output just when the CLI command got 'success'. In case of the output 'failed' the output is only DMR syntax.

The following command was used in the tests: 
{noformat}
$JBOSS_HOME/bin/boss-cli.sh --connect --controller=localhost:9990 --command=""/host=*/server=*/deployment=*/:read-resource(recursive=false,include-runtime=true)"" --output-json
{noformat}",2019/05/07 4:23 AM
WFCORE-4458,"We test Web Console with {{:take-snapshot}} {{:reload}} scenario to ensure we have fresh server each time. After one of these many reloads, {{StackOverflowError}} appears in server log and server starts with errors but it never recovers. You can find whole log in attachements.

{code}
2019-04-29 17:08:20,134 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.iiop-openjdk.poa-service.rootpoa: org.jboss.msc.service.StartException in service jboss.iiop-openjdk.poa-service.rootpoa: Failed to start service
	at org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1730)
	at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1558)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.StackOverflowError
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:100)
	at org.jboss.logmanager.ClassLoaderLogContextSelector$1.run(ClassLoaderLogContextSelector.java:91)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.jboss.logmanager.ClassLoaderLogContextSelector.getLogContext(ClassLoaderLogContextSelector.java:121)
	at org.jboss.logmanager.ThreadLocalLogContextSelector.getLogContext(ThreadLocalLogContextSelector.java:55)
	at org.jboss.as.logging.logmanager.WildFlyLogContextSelectorImpl.getLogContext(WildFlyLogContextSelectorImpl.java:60)
{code}",2019/04/30 2:33 AM
WFCORE-4489,"To be able to pass special characters (paratheses in our case) as Java options we added quotes in standalone.bat / line 251:
  set ""JAVA_OPTS=%JAVA_OPTS% !TMP_PARAM!""",2019/04/26 5:04 AM
WFCORE-4440,"The value from this operation is not persisted in the host xml file, nor is it reflected in a read-resource response:

/host=slave/core-service=discovery-options/static-discovery=primary:write-attribute(name=port,value=9999)

It also doesn't put the HC in reload-required state.

This works:

/host=slave/core-service=discovery-options:write-attribute(name=options,value=[{static-discovery={name=primary,protocol=""${jboss.domain.master.protocol:remote+http}"",host=""${jboss.domain.master.address}"",port=9999}}]

The /host=slave/core-service=discovery-options/static-discovery=* resources are meant to be a kind of alias for elements in that 'options' list to make it easier to manipulate the details. But that linkage has a bug. (Probably several.)",2019/04/24 11:36 AM
WFCORE-4438,There is no welcome/error page by default in CD17 on {{http://127.0.0.1:9990}}. See screenshots comparing WildFly 17 to 16.,2019/04/23 7:51 AM
WFCORE-4436,"Executing {{embed-server --admin-only=false}} will cause an NPE due to the fix in WFCORE-4358.

{code}
LogManager error of type FLUSH_FAILURE: Error on flush
java.lang.NullPointerException
	at org.jboss.as.cli.embedded.ThreadLocalContextSelector.getStdioContext(ThreadLocalContextSelector.java:72)
	at org.jboss.stdio.StdioContext$1.getDelegate(StdioContext.java:148)
	at org.jboss.stdio.StdioContext$DelegatingPrintStream.write(StdioContext.java:264)
	at org.jboss.logmanager.handlers.UncloseableOutputStream.write(UncloseableOutputStream.java:44)
	at org.jboss.logmanager.handlers.UncloseableOutputStream.write(UncloseableOutputStream.java:44)
	at org.jboss.logmanager.handlers.UninterruptibleOutputStream.write(UninterruptibleOutputStream.java:84)
	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
	at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
	at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
	at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
	at java.io.BufferedWriter.flush(BufferedWriter.java:254)
	at org.jboss.logmanager.handlers.WriterHandler.safeFlush(WriterHandler.java:170)
	at org.jboss.logmanager.handlers.WriterHandler.flush(WriterHandler.java:139)
	at org.jboss.logmanager.ExtHandler.doPublish(ExtHandler.java:105)
	at org.jboss.logmanager.handlers.WriterHandler.doPublish(WriterHandler.java:67)
	at org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:77)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:333)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:341)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:341)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:341)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:341)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:341)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:341)
	at org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:341)
	at org.jboss.logmanager.Logger.logRaw(Logger.java:850)
	at org.jboss.logmanager.Logger.log(Logger.java:802)
	at org.jboss.logmanager.Logger.log(Logger.java:814)
	at org.jboss.logging.JBossLogManagerLogger.doLog(JBossLogManagerLogger.java:42)
	at org.jboss.logging.Logger.error(Logger.java:1518)
	at org.jboss.logging.DelegatingBasicLogger.error(DelegatingBasicLogger.java:714)
	at org.jboss.jca.deployers.common.AbstractDsDeployer.createObjectsAndInjectValue(AbstractDsDeployer.java:328)
{code}

This is like due to the TCCL being {{null}}. This can always be a possibility and should be checked for a {{null}} value.",2019/04/22 6:59 PM
WFCORE-4420,"This will always return false:

if (uri != null&&!"""".equals(XMLConstants.NULL_NS_URI))

The second test should use 'uri', not '""""'. (The value of XMLConstants.NULL_NS_URI is '""""').",2019/04/12 12:32 PM
WFCORE-4416,"Specifically, if the resource does not have any attribute, the requirement on the capabilities are not recorded in the features generated by Galleon. ReadFeatureDescriptionHandler is the handler responsible to read those features.

As an example, the subsystem JCA in wildfly has three capability requirements. However, when we are creating the Galleon feature pack, those capabilities are not recorded in the subsystem.jca feature.",2019/04/12 3:56 AM
WFCORE-4405,"Binary jar files are in model-test module, which will break the CC requirements in downstream project.

It would be good to fix in upstream as well so that it won't be missing when new stream is created.",2019/04/08 4:46 AM
WFCORE-4400,Validation introduced by [WFCORE-4309|https://issues.jboss.org/browse/WFCORE-4309] is too strict and does not allow user to input regular expressions. ,2019/04/04 4:19 AM
WFCORE-4398,"The WorkerResourceDefinition.WorkerWriteAttributeHandler implementations are not checking for undefined values before attempting type conversions:

{code}
10:12:28,243 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (""undefine-attribute"") failed - address: ([
    (""subsystem"" => ""io""),
    (""worker"" => ""default"")
]): java.lang.IllegalArgumentException
        at org.jboss.dmr.ModelValue.asInt(ModelValue.java:61)
        at org.jboss.dmr.ModelNode.asInt(ModelNode.java:288)
        at org.wildfly.extension.io.WorkerResourceDefinition$5.setValue(WorkerResourceDefinition.java:201)
        at org.wildfly.extension.io.WorkerResourceDefinition$WorkerWriteAttributeHandler.applyUpdateToRuntime(WorkerResourceDefinition.java:262)
        at org.jboss.as.controller.AbstractWriteAttributeHandler$1.execute(AbstractWriteAttributeHandler.java:104)
{code}

That stack trace maps to WildFly 14 / WildFly Core 6 code.

It should be fine for the attributes that have default values, as there the default value would be passed in instead of undefined. But for the others some sort of handling is needed.

I believe that special handling should be to pass in the default value used in the XNIO code.

_*Any change to add any default value to the IO subsystem management API should be done via a separate JIRA. Do not mix this bug fix with an API change.*_",2019/04/02 4:42 PM
WFCORE-4388,"Currently, the JGroups subsystem transformer tests only succeed because the only protocol in the stack with an override model appears first (i.e. add-index=0).  If I move this protocol to a different location in the stack, the transformed model comparison fails, because the test framework reorders the children in its Resource model (so that children with override registration come first) before transforming it.",2019/03/27 10:06 AM
WFCORE-4387,"Some descriptions lack a space on line break:
{code:java}
""authorize-id"" => {
                ""type"" => STRING,
                ""description"" => ""The SASL authorization ID.  Used as authentication user name to use if no authentication CallbackHandler is specifiedand the se
lected SASL mechanism demands a user name."",
....
""heartbeat-interval"" => {
                ""type"" => INT,
                ""description"" => ""The interval to use for connection heartbeat, in milliseconds.  If the connection is idle in the outbound directionfor this amount of time, a ping message will be sent, which will trigger a corresponding reply message."",
                ""expressions-allowed"" => true,
{code}",2019/03/27 4:57 AM
WFCORE-4383,"The WFCORE-4329 fix results in DomainCommandBuilder ignoring a configured JVM and instead using Jvm.current() for the HC and PC.

https://github.com/wildfly/wildfly-core/pull/3692/files#diff-86e68a2cbfc652da1a61f3528a6f7fd5R70

This is the cause of mixed-domain testsuite failures in full when the test driver uses JDK 11. The test's configuring of the PC/HC to use JDK 8 is being ignored.",2019/03/23 10:33 AM
WFCORE-4376,AbstractCapability ,2019/03/19 7:11 AM
WFCORE-4369,"Deprecated com.sun.net.ssl package have been removed from JDK since version 13, see:
[bug] https://bugs.openjdk.java.net/browse/JDK-8215430
[commit] http://hg.openjdk.java.net/jdk/jdk/rev/43c2ab1bdfd3",2019/03/12 3:59 PM
WFCORE-4359,"There is issue when tab completion is used in following malformed command:
{code}
    [standalone@embedded /]  /subsystem=modcluster/proxy=modcluster:add(advertise=false,proxies=mod_cluster-pro14:56:17,909 WARN  [org.jboss.as.cli.impl.ValueTypeCompleter] (CLI Terminal Connection (uninterruptable)) Invalid syntax.: org.jboss.as.cli.CommandFormatException: Invalid syntax.
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.ValueTypeCompleter$ValueTypeCallbackHandler.enteredState(ValueTypeCompleter.java:951)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser$ParsingContextImpl.enterState(StateParser.java:420)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.ValueTypeCompleter$PropertyListState$1.handle(ValueTypeCompleter.java:1248)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser$ParsingContextImpl.enterState(StateParser.java:421)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.ValueTypeCompleter$InitialValueState$1.handle(ValueTypeCompleter.java:1184)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser$ParsingContextImpl.parse(StateParser.java:261)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser.doParse(StateParser.java:150)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser.parseLine(StateParser.java:124)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser.parseLine(StateParser.java:117)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser.parseLine(StateParser.java:95)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser.parseLine(StateParser.java:75)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.parsing.StateParser.parse(StateParser.java:65)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.ValueTypeCompleter.parse(ValueTypeCompleter.java:401)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.ValueTypeCompleter.complete(ValueTypeCompleter.java:381)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.operation.OperationRequestCompleter.completeWithValueCompleter(OperationRequestCompleter.java:413)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.operation.OperationRequestCompleter.completeProperties(OperationRequestCompleter.java:672)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:709)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.operation.OperationRequestCompleter.complete(OperationRequestCompleter.java:90)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.CommandCompleter.complete(CommandCompleter.java:99)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.aesh.CLICompletionHandler.completeLegacyCommands(CLICompletionHandler.java:157)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.aesh.CLICompletionHandler.complete(CLICompletionHandler.java:133)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.CLICommandCompleter.doComplete(CLICommandCompleter.java:132)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.CLICommandCompleter.complete(CLICommandCompleter.java:54)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.aesh.CLICompletionHandler.complete(CLICompletionHandler.java:69)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.aesh.CLICompletionHandler.complete(CLICompletionHandler.java:45)
            at org.aesh//org.aesh.readline.completion.CompletionHandler.createCompletionList(CompletionHandler.java:135)
            at org.aesh//org.aesh.readline.completion.CompletionHandler.complete(CompletionHandler.java:103)
            at org.aesh//org.aesh.readline.action.mappings.Complete.accept(Complete.java:62)
            at org.aesh//org.aesh.readline.Readline$AeshInputProcessor.parse(Readline.java:246)
            at org.aesh//org.aesh.readline.Readline$AeshInputProcessor.access$100(Readline.java:174)
            at org.aesh//org.aesh.readline.Readline.readInput(Readline.java:95)
            at org.aesh//org.aesh.readline.Readline.access$1000(Readline.java:57)
            at org.aesh//org.aesh.readline.Readline$AeshInputProcessor.lambda$start$1(Readline.java:333)
            at org.aesh//org.aesh.terminal.EventDecoder.accept(EventDecoder.java:118)
            at org.aesh//org.aesh.terminal.EventDecoder.accept(EventDecoder.java:31)
            at org.aesh//org.aesh.io.Decoder.write(Decoder.java:133)
            at org.aesh//org.aesh.readline.tty.terminal.TerminalConnection.openBlocking(TerminalConnection.java:216)
            at org.aesh//org.aesh.readline.tty.terminal.TerminalConnection.openBlocking(TerminalConnection.java:203)
            at org.jboss.as.cli@7.0.1.Final-redhat-00001//org.jboss.as.cli.impl.ReadlineConsole$CLITerminalConnection.lambda$null$1(ReadlineConsole.java:178)
            at java.base/java.lang.Thread.run(Thread.java:834)
     
     
    {
        ""outcome"" => ""failed"",
        ""failure-description"" => ""WFLYCTL0155: 'listener' may not be null"",
        ""rolled-back"" => true
    }

{code}

where attribute {{proxies}} should take a list. Exception should not be thrown. ",2019/03/05 10:57 AM
WFCORE-4357,"When org.jboss.as.server.deployment.DeploymentPhaseContextImpl#addDeploymentDependency is used, it is expecting the service to be old-API org.jboss.msc.service.Service and use its getValue() method.

This needs to be fixed so that using new MSC Service API works too.",2019/03/05 7:25 AM
WFCORE-4349,The PowerShell script tests should run with {{-ExecutionPolicy Unrestricted}}. Not having this could fail on users who don't disable the policy which by default is enabled.,2019/02/21 12:36 PM
WFCORE-4348,"The script tests seem to be intermittently [failing on Windows|https://ci.wildfly.org/viewLog.html?buildId=140714&buildTypeId=WildFlyCore_PullRequest_WindowsJdk11&tab=buildResultsDiv]. 

The {{AddUserTestCase}} and {{CliScriptTestCase}} seem to only be failing with PowerShell and are timing out. The {{StandaloneScriptTestCase}} and {{DomainScriptTestCase}} seem to have an issue where the management address and port are already in use.

On all tests we should increase the timeout as it may be too low which is leading to the other issues. Though we need to test this to confirm it.

For the standalone and domain tests it may be wise to introduce a pre-check looking for a running server and shutdown that server if it's running.",2019/02/21 11:29 AM
WFCORE-4335,"When starting standalone.bat on Windows, a file named ""null"" is created in the bin directory.

Looking at the standalone.bat file, I find this new line which was added:

            rem Remove the gc.log file from the -version check
            del /F /Q ""%JBOSS_LOG_DIR%\gc.log"" > null 2>&1

But, this is a typo.  What it's trying to do is suppress the output of the del command.  In unix, you'd redirect it to /dev/null.  In Windows, you're supposed to redirect it to nul (with one L), as in this example line from slightly earlier in the standalone.bat file:

        move /y ""%JBOSS_LOG_DIR%\gc.log"" ""%JBOSS_LOG_DIR%\backupgc.log"" > nul 2>&1",2019/02/18 4:33 AM
WFCORE-4331,LOGMGR-30 introduced the ability to compress rotated files. However the logging subsystem validation for suffix parameters was never updated to allow these suffixes.,2019/02/15 11:46 AM
WFCORE-4329,"The launcher API checks the {{$JAVA_HOME/jmods}} directory and if missing assumes it's a non-modular JVM, e.g. Java 8 or lower. In some cases this directory does not exist. We need a better way to determine the JVM version.

It's done in the wildfly-maven-plugin like:
{code}
    /**
     * Checks to see if the {@code javaHome} is a modular JVM.
     *
     * @param javaHome the Java Home if {@code null} an attempt to discover the Java Home will be done
     *
     * @return {@code true} if this is a modular environment
     */
    public static boolean isModularJvm(final Path javaHome) {
        boolean result;
        final List<String> cmd = new ArrayList<>();
        cmd.add(getJavaCommand(javaHome));
        cmd.add(""--add-modules=java.se"");
        cmd.add(""-version"");
        final ProcessBuilder builder = new ProcessBuilder(cmd);
        Process process = null;
        Path stdout = null;
        try {
            // Create a temporary file for stdout
            stdout = Files.createTempFile(""stdout"", "".txt"");
            process = builder.redirectErrorStream(true)
                    .redirectOutput(stdout.toFile()).start();

            if (process.waitFor(1, TimeUnit.SECONDS)) {
                result = process.exitValue() == 0;
            } else {
                if (LOGGER.isDebugEnabled()) {
                    LOGGER.debug(getStdoutMessage(""The process timed out waiting for the response."", stdout));
                }
                result = false;
            }
        } catch (IOException | InterruptedException e) {
            if (LOGGER.isDebugEnabled()) {
                LOGGER.debug(getStdoutMessage(""The process ended in error."", stdout), e);
            }
            result = false;
        } finally {
            if (process != null && process.isAlive()) {
                process.destroyForcibly();
            }
            if (stdout != null) {
                try {
                    Files.deleteIfExists(stdout);
                } catch (IOException ignore) {
                }
            }
        }
        return result;
    }
{code}

This works, however requires a new process to be created and launched which is not ideal.

It does look like there might be a {{$JAVA_HOME/release}} file which looks like a properties file with the {{JAVA_VERSION}} property. However we need to determine if all vendors include this file.",2019/02/13 12:05 PM
WFCORE-4327,"Switched order of method arguments - ModuleSpecProcessor line 287
Introduced in https://github.com/wildfly/wildfly-core/pull/3661

method call
{code}
return ModuleLoadService.install(phaseContext.getServiceTarget(), moduleIdentifier,
   dependencies, localDependencies, userDependencies);
{code}

ModuleLoadService.install signature:
{code}
public static ServiceName install(final ServiceTarget target, final ModuleIdentifier identifier,
  final List<ModuleDependency> systemDependencies,
  final List<ModuleDependency> userDependencies,
  final List<ModuleDependency> localDependencies) {   
{code}

https://github.com/wildfly/wildfly-core/blob/master/server/src/main/java/org/jboss/as/server/deployment/module/ModuleSpecProcessor.java#L287
So localDependencies and userDependencies should be switched.
",2019/02/13 7:11 AM
WFCORE-4326,"The fix developed under WFCORE-3826 fixes the HTTP connector, this issue is to add the same fix to the native connector.",2019/02/12 11:41 AM
WFCORE-4325,"Running the {{testsuite/domain}} tests in Elytron mode results in error:

{noformat}
[ERROR] Failed to execute goal org.wildfly.plugins:wildfly-maven-plugin:1.2.1.Final:execute-commands (default) on project wildfly-core-testsuite-domain: Failed to execute commands: See /home/okotek/test/asts-core-intermit/testsuite/domain/target/wildfly-plugin.log for full details of failure.
[ERROR] Cannot start embedded server: WFLYEMB0022: Cannot invoke 'start' on embedded process: WFLYSRV0122: Server base directory does not exist: /home/okotek/test/asts-core-intermit/testsuite/domain/target/wildfly-core/standalone
{noformat}

WFCORE-4304 excluded {{standalone}} configs that are configured for the Elytron mode by default (see {{testsuite/shared/enable-elytron.cli}}).

The fix for this should be splitting testsuite/shared/enable-elytron.cli into separate scripts for standalone and domain and only executing the appropriate script in the different testsuites.",2019/02/12 7:01 AM
WFCORE-4324,"{{CommandTimeoutHandlerTestCase#testComandExecutor}} intermittently fails (in ~7%), see https://ci.wildfly.org/project.html?projectId=WildFlyCore&testNameId=8771251577225903936&tab=testDetails

In most cases it fails on AdoptOpenJDK 11 + OpenJ9 (but not only).

{noformat}
java.lang.Exception: Ls has not timeouted
	at org.jboss.as.test.manualmode.management.cli.CommandTimeoutHandlerTestCase.testComandExecutor(CommandTimeoutHandlerTestCase.java:507)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
{noformat}
",2019/02/12 4:39 AM
WFCORE-4298,"Pull request https://github.com/wildfly/wildfly-core/pull/3636 introduced support for loading resources from multi-release jar files, through VFSResourceLoader. However, right now, it just looks for the presence of the `Multi-Release` manifest attribute but doesn't check the value of that attribute before deciding whether or not to process the jar as a multi-release jar. As per the spec[1], the expectation is to consider the jar as multi-release enabled only if the value of `Multi-Release` attribute is `true`

[1] https://mail.openjdk.java.net/pipermail/core-libs-dev/2019-January/058131.html",2019/01/25 10:54 PM
WFCORE-4283,"​In EAP 7.1 domain setup,  web management console executes the op `:read-children-resources(child-type=host)` when it starts. A host controller triggers ​managed server instances startup sequentially (​SERVER_STOPPED to SERVER_STARTING) which may take some very long time for host controller to finish boot process (when there are dozens of managed server instances). And in this case `:read-children-resources(child-type=host)` operation could fail with 500 error when using web management console on domain master node. Resulting in the web console becomes un-usable for long time.


The operation `:read-children-resources(child-type=host)`  needs a fix to avoid 500 error. 

The web management console should start up as soon as the domain controller (master node) is available. Hosts and servers in the topology view should show up as soon as they're available.
 ",2019/01/21 7:07 AM
WFCORE-4253,"{{org.jboss.as.test.integration.security.ssl.sni.SNICombinedWithALPNTestCase}} fails with security manager on Java 11 due to missing permissions:

{noformat}
[ERROR] Failure when constructing test  Time elapsed: 0.029 s  <<< FAILURE!
java.lang.AssertionError: 
Failed to deploy test.jar: 10 assets: {""WFLYCTL0080: Failed services"" => {""jboss.undertow-test-server"" => ""Failed to start service
    Caused by: java.lang.ExceptionInInitializerError
    Caused by: java.security.AccessControlException: WFSM000001: Permission check failed (permission \""(\""java.io.FilePermission\"" \""/home/okotek/test/asts-core-intermit/testsuite/standalone/target/wildfly-core/modules/system/layers/base/io/undertow/core/main/undertow-core-2.0.15.Final.jar\"" \""read\"")\"" in code source \""(vfs:/content/test.jar <no signer certificates>)\"" of \""ModuleClassLoader for Module \""deployment.test.jar\"" from Service Module Loader\"")""}}
	at org.junit.Assert.fail(Assert.java:88)
	at org.jboss.as.test.integration.security.ssl.sni.SNICombinedWithALPNTestCase.deploy(SNICombinedWithALPNTestCase.java:414)
	at org.jboss.as.test.integration.security.ssl.sni.SNICombinedWithALPNTestCase$Setup.setup(SNICombinedWithALPNTestCase.java:188)
	at org.wildfly.core.testrunner.WildflyTestRunner.runSetupTasks(WildflyTestRunner.java:121)
	at org.wildfly.core.testrunner.WildflyTestRunner.run(WildflyTestRunner.java:107)
	at org.junit.runners.Suite.runChild(Suite.java:128)
...
{noformat}

-A customer should not be asked to add such permission for reading a module file, it brings bad UX and it could bring security flaws.-",2018/12/11 10:24 AM
WFCORE-4249,"WildFlyInitialContextFactory EJB proxy security behavior inconsistent with different context lookups

Using WildFlyInitialContextFactory and calling a remote EJB server.

Observations: 

1) If the ejb lookup is ""reproducer/TestSLSB!test.Test"" (basically like a RemoteNaming lookup), the ejb is invoked successfully, but the caller is seen as anonymous instead of the ejbuser which is specified in the Context properties.

Using the ejb-client type lookup: ejb:/reproducer/TestSLSB!test.Test , then it shows up as ejbuser as expected

2) if a client creates 2 InitialContexts and uses the lookup reproducer/TestSLSB!test.Test"" on ctx1 , then uses the lookup ""ejb:/reproducer/TestSLSB!test.Test "" on ctx2 in that order, then they both show anonymous (as if it uses only the context that was created first).

If you switch the order, and use ejb:/reproducer/TestSLSB!test.Test first, then they both show ejbuser
",2018/12/06 8:15 AM
WFCORE-4246,"Even if scanEnabled=""false"" is specified in the deployment-scanner subsystem, a deployment marker can be created for files located under the deployment-scanner directory. This happens when deploying an application which has the same filename to the file through the management CLI.

This behavior did not happen in EAP 6.4.x, but this happens since EAP 7.x because of FileSystemDeploymentService#handleNotification() processing.

I think this behavior itself does not have a negative effect, so this is a minor issue. However, it's better to avoid creating an unneeded marker file.",2018/12/04 10:35 PM
